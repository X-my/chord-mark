import { CM, CCS, CS } from '../../../../../src/components/shortcuts';
import TabbedChordMark from '../../../../../src/components/TabbedChordMark';

# إعلان المفتاح

## سطور إعلان المفتاح

من الممكن إعلان مفتاح أي جزء من الأغنية باستخدام الكلمة الرئيسية `key`:

<TabbedChordMark src={'key C\nC F G C'} />

إذا حدث تغيير في المفتاح قبل تغيير القسم، فيمكن إعلانه مباشرة في القسم الجديد، أو على السطر المباشر السابق لملصق القسم، لتفادي أن يتم تكراره بالنسبة للقسم السابق عند استخدام ميزة تكرار الأكورديات تلقائيًا.

بصرف النظر عن جلب الوضوح لقراء مخطط الأكورديات، والذي هو دائمًا أمر جيد، فإن إعلان واحد أو أكثر من المفاتيح سينتج عنه على الأقل 3 فوائد.

### 1/ الترانسبوزيشن التلقائية

الفائدة الأولى - في رأيي - هي واحدة من أروع ميزات <CM />!
في أي وقت يحدث تغيير في المفتاح أثناء الأغنية، وعند استخدام تكرار الأكورديات تلقائيًا عبر الأقسام، سينتج <CM /> ترانسبوزيشن الأكورديات المتكررة استنادًا إلى إعلان المفتاح الجديد.
انظر المثال أدناه:

<TabbedChordMark
	src={
		'key C\n#v\nDm7 G7 C %\nThe first verse is in the key of C\n\nkey G\n#v\nAnd the second one in the key of G!'
	}
/>

المفتاح الأساسي الذي يتم من خلاله الترانسبوزيشن دائمًا هو الأول الذي يتم إعلانه صراحةً، لذا تأكد من دائمًا تعريف مفتاح قبل السطر الأول من الأكورديات.

### 2/ عرض الصحيحات بشكل صحيح

الفائدة الثانية تتعلق بعرض الصحيحات (`#` و `b`).
إذا كان ملف المصدر يحتوي على صحيحات مختلطة، فإن إعلان المفتاح سيسمح لـ <CM/> بالتحكم تلقائيًا في الصحيحات، واختيار الرمز الصحيح

<TabbedChordMark
	src={
		'#v\nkey C#m\nC#m7 Ab7\n_ What will you do when you get _lonely?\nC#m7.. C. D. E.. E7..\n_ No one _waiting _by your _side _'
	}
/>

ملاحظة أن إذا لم يتم إعلان المفتاح، سيتحاول <CM/> اكتشافه تلقائيًا استنادًا إلى الأكورديات المستخدمة في الأغنية.
في حين أن هذا يجب أن يعمل جيدًا بالنسبة للأغاني البسيطة، فإنه سيفشل على الأغاني الأكثر تعقيدًا.
لذلك، من الأفضل دائمًا إعلان المفتاح صراحةً.

الصحيحات يتم اختيارها بشكل صحيح أيضًا إذا احتوت الأغنية على مفاتيح متعددة:

<TabbedChordMark
	src={
		'#v\nkey C#m\nC#m7 Ab7\n_ What will you do when you get _lonely?\nC#m7.. C. D. E.. E7..\n_ No one _waiting _by your _side _\n\n#c\nkey Dm\nDm.. Bb..\nLayla_\nC.. Dm.. Dm.. A#..\n_Got me on my _knees, Layla'
	}
/>

عندما يتم الترانسبوزيشن في وضع الصحيحات `auto`, يحاول <CM/> أن يكون ذكيًا وتجنب [المفاتيح النظرية](https://en.wikipedia.org/wiki/Theoretical_key) التي لا تستخدم في الممارسة.
على سبيل المثال، الترانسبوزيشن لأسفل `Layla` بمقدار نصف نغمة واحدة سينتج عنه مفتاح من `C#m` بدلاً من `Dbm` للجوقة. مرة أخرى، ملاحظة أن الصحيحات الصحيحة يتم استخدامها لكل مفتاح.

<TabbedChordMark
	src={
		'#v\nkey C#m\nC#m7 Ab7\n_ What will you do when you get _lonely?\nC#m7.. C. D. E.. E7..\n_ No one _waiting _by your _side _\n\n#c\nkey Dm\nDm.. Bb..\nLayla_\nC.. Dm.. Dm.. A#..\n_Got me on my _knees, Layla'
	}
	options={{ transposeValue: -1 }}
/>

### 3/ التحليل التوافقي

الفائدة الثالثة لاستخدام المفاتيح تكمن في قدرة <CM/> على مساعدة التحليل التوافقي من خلال عرض رموز الأكورديات ك[رموز رومانية](https://en.wikipedia.org/wiki/Roman_numeral_analysis).
هذا يمكن أن يتم فقط إذا تم تعيين المفتاح صراحةً، وإلا فسيتم عرض جميع الرموز ك `I`, `i` أو `?`.
النهج لتحويل الأكورديات من ملاحظات إلى رموز رومانية بسيط ونايف: استنادًا إلى المفتاح المعلن، سيتحقق <CM/> من أن الأكورديات في الأغنية هي دياتونية بالنسبة إلى المفتاح، أو دياتونية بالنسبة إلى المفتاح الرئيسي/الصغير المتوازي (مثل "الأكورديات المستعارة").
بالتأكيد هناك المزيد من التحليل التوافقي من هذا النهج البسيط، وأتمنى أن أثرثر قدرات <CM/> مع المزيد من الوظائف في المستقبل.

<TabbedChordMark
	src={
		'key Em\n6/8\nEm D. C.\n_ Forever trusting _who we are\nG.  B7. Em %\n_ and _nothing else _matters'
	}
	options={{ symbolType: 'roman' }}
/>

يرجى ملاحظة أن:

-   الرموز الدياتونية بالنسبة إلى المفاتيح يتم عرضها مع خلفية ملونة
-   الأكورديات المستعارة يتم عرضها مع خلفية أغمق قليلاً
-   الأكورديات غير المعروفة يتم عرضها بدون خلفية ملونة

<TabbedChordMark
	src={'key C\nC/E Dm7/F Fm Gm Ab7'}
	options={{ symbolType: 'roman' }}
/>

إذا كنت غير متأكد من المفتاح، فقط جرب بعض المرشحين! ستتمكن من رؤية فورًا إذا كانت الأغنية تحتوي على الكثير من الأكورديات الدياتونية لهذا المفتاح.
وإذا فعلت، فمن المحتمل أن يكون المفتاح المحدد مرشحًا جيدًا.
