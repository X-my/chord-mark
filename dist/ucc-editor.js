!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=354)}([function(t,e,n){var r=n(1),o=n(53).f,i=n(11),s=n(13),a=n(73),c=n(111),u=n(76);t.exports=function(t,e){var n,f,l,p,h,d=t.target,v=t.global,m=t.stat;if(n=v?r:m?r[d]||a(d,{}):(r[d]||{}).prototype)for(f in e){if(p=e[f],l=t.noTargetGet?(h=o(n,f))&&h.value:n[f],!u(v?f:d+(m?".":"#")+f,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;c(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),s(n,f,p,t)}}},function(t,e){t.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(35)("wks"),o=n(52),i=n(1).Symbol,s=n(109);t.exports=function(t){return r[t]||(r[t]=s&&i[t]||(s?i:o)("Symbol."+t))}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(255),o=1,i=4;t.exports=function(t){return r(t,o|i)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(7),o=n(107),i=n(4),s=n(36),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(i(t),e=s(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(9),o=n(47);t.exports=n(7)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(117),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(1),o=n(11),i=n(8),s=n(73),a=n(110),c=n(37),u=c.get,f=c.enforce,l=String(a).split("toString");n(35)("inspectSource",function(t){return a.call(t)}),(t.exports=function(t,e,n,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),f(n).source=l.join("string"==typeof e?e:"")),t!==r?(c?!p&&t[e]&&(u=!0):delete t[e],u?t[e]=n:o(t,e,n)):u?t[e]=n:s(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&u(this).source||a.call(this)})},function(t,e,n){"use strict";e.__esModule=!0,e.extend=a,e.indexOf=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}if(!i.test(t))return t;return t.replace(o,s)},e.isEmpty=function(t){return!t&&0!==t||!(!f(t)||0!==t.length)},e.createFrame=function(t){var e=a({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,i=/[&<>"'`=]/;function s(t){return r[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var c=Object.prototype.toString;e.toString=c;var u=function(t){return"function"==typeof t};u(/x/)&&(e.isFunction=u=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)}),e.isFunction=u;var f=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===c.call(t)};e.isArray=f},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(34),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(46),o=n(15);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(4),o=n(201),i=n(75),s=n(202),a=n(108),c=n(54)("IE_PROTO"),u=function(){},f=function(){var t,e=a("iframe"),n=i.length;for(e.style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f.prototype[i[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[c]=t):n=f(),void 0===e?n:o(n,e)},n(38)[c]=!0},function(t,e,n){var r=n(219),o=n(222);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(12).isFinite;t.exports=function(t){return"number"==typeof t&&r(t)}},function(t,e,n){var r=n(15);t.exports=function(t){return Object(r(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(40),o=n(194),i=n(195),s="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:c&&c in Object(t)?o(t):i(t)}},function(t,e,n){"use strict";var r=n(123);n(0)({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(t,e,n){var r=n(124),o=n(123),i=n(11),s=n(1);for(var a in r){var c=s[a],u=c&&c.prototype;if(u&&u.forEach!==o)try{i(u,"forEach",o)}catch(t){u.forEach=o}}},function(t,e,n){t.exports=n(321).default},function(t,e,n){var r=n(25),o=n(10),i=n(16),s="[object String]";t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&r(t)==s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(119);r.__exportStar(n(41),e),r.__exportStar(n(120),e),r.__exportStar(n(196),e)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});n(26),n(27);var r=n(5),o=n.n(r);function i(t,e){var n=o()(t);return n.forEach(function(t){"chord"===t.type&&t.model.allBars.forEach(function(t){t.allChords.forEach(function(t){e(t)})})}),n}},function(t,e,n){"use strict";var r=n(50)(1),o=n(106)("map");n(0)({target:"Array",proto:!0,forced:!o},{map:function(t){return r(this,t,arguments[1])}})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(1),o=n(73),i=r["__core-js_shared__"]||o("__core-js_shared__",{});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.0.0",mode:n(51)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r,o,i,s=n(187),a=n(6),c=n(11),u=n(8),f=n(54),l=n(38),p=n(1).WeakMap;if(s){var h=new p,d=h.get,v=h.has,m=h.set;r=function(t,e){return m.call(h,t,e),e},o=function(t){return d.call(h,t)||{}},i=function(t){return v.call(h,t)}}else{var g=f("state");l[g]=!0,r=function(t,e){return c(t,g,e),e},o=function(t){return u(t,g)?t[g]:{}},i=function(t){return u(t,g)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!a(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e){var n=[][t];return!n||!r(function(){n.call(null,e||function(){throw Error()},1)})}},function(t,e,n){var r=n(12).Symbol;t.exports=r},function(t,e,n){"use strict";var r,o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.AFlat="Ab",t.A="A",t.ASharp="A#",t.BFlat="Bb",t.B="B",t.C="C",t.CSharp="C#",t.DFlat="Db",t.D="D",t.DSharp="D#",t.EFlat="Eb",t.E="E",t.F="F",t.FSharp="F#",t.GFlat="Gb",t.G="G",t.GSharp="G#"}(e.Notes||(e.Notes={})),function(t){t.Major="Major",t.Minor="Minor",t.MinorMajor="MinorMajor",t.Augmented="Augmented",t.AugmentedMajor="AugmentedMajor",t.Diminished="Diminished",t.HalfDiminished="HalfDiminished",t.Power="Power"}(e.Qualities||(e.Qualities={})),function(t){t.Seventh="Seventh"}(e.Sevenths||(e.Sevenths={})),function(t){t.Major9="Major9",t.Minor9="Minor9",t.Sharpened9="Sharpened9"}(e.Ninths||(e.Ninths={})),function(t){t.Perfect11="Perfect11",t.Sharpened11="Sharpened11",t.Flattened11="Flattened11"}(e.Elevenths||(e.Elevenths={})),function(t){t.Major13="Major13",t.Minor13="Minor13"}(e.Thirteenths||(e.Thirteenths={})),function(t){t.Add9="Add9",t.Add11="Add11",t.Add13="Add13"}(r=e.Addeds||(e.Addeds={})),e.addedOrder=[r.Add13,r.Add11,r.Add9],function(t){t.Sus4="Sus4",t.Sus2="Sus2"}(o=e.Suspendeds||(e.Suspendeds={})),e.suspendedOrder=[o.Sus2,o.Sus4],function(t){t.Sharpened5="Sharpened5",t.Flattened5="Flattened5"}(e.AlteredFifths||(e.AlteredFifths={}))},function(t,e,n){var r=n(133),o=n(249),i=n(138);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e){t.exports={}},function(t,e,n){"use strict";e.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];function o(t,e){var n=e&&e.loc,i=void 0,s=void 0;n&&(t+=" - "+(i=n.start.line)+":"+(s=n.start.column));for(var a=Error.prototype.constructor.call(this,t),c=0;c<r.length;c++)this[r[c]]=a[r[c]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=i,Object.defineProperty?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(t){}}o.prototype=new Error,e.default=o,t.exports=e.default},function(t,e,n){t.exports=function(){"use strict";var t=Object.freeze||function(t){return t},e=t(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),n=t(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),r=t(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o=t(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),i=t(["#text"]),s=Object.freeze||function(t){return t},a=s(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),c=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),u=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),f=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),l=Object.hasOwnProperty,p=Object.setPrototypeOf,h=("undefined"!=typeof Reflect&&Reflect).apply;function d(t,e){p&&p(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=r.toLowerCase();o!==r&&(Object.isFrozen(e)||(e[n]=o),r=o)}t[r]=!0}return t}function v(t){var e={},n=void 0;for(n in t)h(l,t,[n])&&(e[n]=t[n]);return e}h||(h=function(t,e,n){return t.apply(e,n)});var m=Object.seal||function(t){return t},g=m(/\{\{[\s\S]*|[\s\S]*\}\}/gm),y=m(/<%[\s\S]*|[\s\S]*%>/gm),b=m(/^data-[\-\w.\u00B7-\uFFFF]/),x=m(/^aria-[\-\w]+$/),w=m(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),S=m(/^(?:\w+script|data):/i),O=m(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function k(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var C=("undefined"!=typeof Reflect&&Reflect).apply,A=Array.prototype.slice,T=Object.freeze,E=function(){return"undefined"==typeof window?null:window};C||(C=function(t,e,n){return t.apply(e,n)});var N=function(t,e){if("object"!==(void 0===t?"undefined":M(t))||"function"!=typeof t.createPolicy)return null;var n=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=e.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function t(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E(),l=function(e){return t(e)};if(l.version="1.0.10",l.removed=[],!s||!s.document||9!==s.document.nodeType)return l.isSupported=!1,l;var p=s.document,h=!1,m=!1,_=s.document,D=s.DocumentFragment,j=s.HTMLTemplateElement,R=s.Node,P=s.NodeFilter,F=s.NamedNodeMap,I=void 0===F?s.NamedNodeMap||s.MozNamedAttrMap:F,z=s.Text,B=s.Comment,L=s.DOMParser,V=s.TrustedTypes;if("function"==typeof j){var $=_.createElement("template");$.content&&$.content.ownerDocument&&(_=$.content.ownerDocument)}var q=N(V,p),H=q?q.createHTML(""):"",J=_,W=J.implementation,G=J.createNodeIterator,U=J.getElementsByTagName,K=J.createDocumentFragment,Q=p.importNode,Y={};l.isSupported=W&&void 0!==W.createHTMLDocument&&9!==_.documentMode;var X=g,Z=y,tt=b,et=x,nt=S,rt=O,ot=w,it=null,st=d({},[].concat(k(e),k(n),k(r),k(o),k(i))),at=null,ct=d({},[].concat(k(a),k(c),k(u),k(f))),ut=null,ft=null,lt=!0,pt=!0,ht=!1,dt=!1,vt=!1,mt=!1,gt=!1,yt=!1,bt=!1,xt=!1,wt=!1,St=!0,Ot=!0,Mt=!1,kt={},Ct=d({},["audio","head","math","script","style","template","svg","video"]),At=d({},["audio","video","img","source","image"]),Tt=d({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Et=null,Nt=_.createElement("form"),_t=function(t){Et&&Et===t||(t&&"object"===(void 0===t?"undefined":M(t))||(t={}),it="ALLOWED_TAGS"in t?d({},t.ALLOWED_TAGS):st,at="ALLOWED_ATTR"in t?d({},t.ALLOWED_ATTR):ct,ut="FORBID_TAGS"in t?d({},t.FORBID_TAGS):{},ft="FORBID_ATTR"in t?d({},t.FORBID_ATTR):{},kt="USE_PROFILES"in t&&t.USE_PROFILES,lt=!1!==t.ALLOW_ARIA_ATTR,pt=!1!==t.ALLOW_DATA_ATTR,ht=t.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=t.SAFE_FOR_JQUERY||!1,vt=t.SAFE_FOR_TEMPLATES||!1,mt=t.WHOLE_DOCUMENT||!1,bt=t.RETURN_DOM||!1,xt=t.RETURN_DOM_FRAGMENT||!1,wt=t.RETURN_DOM_IMPORT||!1,yt=t.FORCE_BODY||!1,St=!1!==t.SANITIZE_DOM,Ot=!1!==t.KEEP_CONTENT,Mt=t.IN_PLACE||!1,ot=t.ALLOWED_URI_REGEXP||ot,vt&&(pt=!1),xt&&(bt=!0),kt&&(it=d({},[].concat(k(i))),at=[],!0===kt.html&&(d(it,e),d(at,a)),!0===kt.svg&&(d(it,n),d(at,c),d(at,f)),!0===kt.svgFilters&&(d(it,r),d(at,c),d(at,f)),!0===kt.mathMl&&(d(it,o),d(at,u),d(at,f))),t.ADD_TAGS&&(it===st&&(it=v(it)),d(it,t.ADD_TAGS)),t.ADD_ATTR&&(at===ct&&(at=v(at)),d(at,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&d(Tt,t.ADD_URI_SAFE_ATTR),Ot&&(it["#text"]=!0),mt&&d(it,["html","head","body"]),it.table&&d(it,["tbody"]),T&&T(t),Et=t)},Dt=function(t){l.removed.push({element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=H}},jt=function(t,e){try{l.removed.push({attribute:e.getAttributeNode(t),from:e})}catch(t){l.removed.push({attribute:null,from:e})}e.removeAttribute(t)},Rt=function(t){var e=void 0,n=void 0;if(yt)t="<remove></remove>"+t;else{var r=t.match(/^[\s]+/);(n=r&&r[0])&&(t=t.slice(n.length))}if(h)try{e=(new L).parseFromString(t,"text/html")}catch(t){}if(m&&d(ut,["title"]),!e||!e.documentElement){var o=e=W.createHTMLDocument(""),i=o.body;i.parentNode.removeChild(i.parentNode.firstElementChild),i.outerHTML=q?q.createHTML(t):t}return n&&e.body.insertBefore(_.createTextNode(n),e.body.childNodes[0]||null),U.call(e,mt?"html":"body")[0]};l.isSupported&&(function(){try{var t=Rt('<svg><p><style><img src="</style><img src=x onerror=1//">');t.querySelector("svg img")&&(h=!0)}catch(t){}}(),function(){try{var t=Rt("<x/><title>&lt;/title&gt;&lt;img&gt;");t.querySelector("title").innerHTML.match(/<\/title/)&&(m=!0)}catch(t){}}());var Pt=function(t){return G.call(t.ownerDocument||t,t,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,function(){return P.FILTER_ACCEPT},!1)},Ft=function(t){return"object"===(void 0===R?"undefined":M(R))?t instanceof R:t&&"object"===(void 0===t?"undefined":M(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},It=function(t,e,n){Y[t]&&Y[t].forEach(function(t){t.call(l,e,n,Et)})},zt=function(t){var e,n=void 0;if(It("beforeSanitizeElements",t,null),!((e=t)instanceof z||e instanceof B||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof I&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute))return Dt(t),!0;var r=t.nodeName.toLowerCase();if(It("uponSanitizeElement",t,{tagName:r,allowedTags:it}),!it[r]||ut[r]){if(Ot&&!Ct[r]&&"function"==typeof t.insertAdjacentHTML)try{var o=t.innerHTML;t.insertAdjacentHTML("AfterEnd",q?q.createHTML(o):o)}catch(t){}return Dt(t),!0}return"noscript"===r&&t.innerHTML.match(/<\/noscript/i)?(Dt(t),!0):"noembed"===r&&t.innerHTML.match(/<\/noembed/i)?(Dt(t),!0):(!dt||t.firstElementChild||t.content&&t.content.firstElementChild||!/</g.test(t.textContent)||(l.removed.push({element:t.cloneNode()}),t.innerHTML?t.innerHTML=t.innerHTML.replace(/</g,"&lt;"):t.innerHTML=t.textContent.replace(/</g,"&lt;")),vt&&3===t.nodeType&&(n=(n=(n=t.textContent).replace(X," ")).replace(Z," "),t.textContent!==n&&(l.removed.push({element:t.cloneNode()}),t.textContent=n)),It("afterSanitizeElements",t,null),!1)},Bt=function(t,e,n){if(St&&("id"===e||"name"===e)&&(n in _||n in Nt))return!1;if(pt&&tt.test(e));else if(lt&&et.test(e));else{if(!at[e]||ft[e])return!1;if(Tt[e]);else if(ot.test(n.replace(rt,"")));else if("src"!==e&&"xlink:href"!==e||"script"===t||0!==n.indexOf("data:")||!At[t])if(ht&&!nt.test(n.replace(rt,"")));else if(n)return!1}return!0},Lt=function(t){var e=void 0,n=void 0,r=void 0,o=void 0,i=void 0;It("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:at};for(i=s.length;i--;){var c=e=s[i],u=c.name,f=c.namespaceURI;if(n=e.value.trim(),r=u.toLowerCase(),a.attrName=r,a.attrValue=n,a.keepAttr=!0,It("uponSanitizeAttribute",t,a),n=a.attrValue,"name"===r&&"IMG"===t.nodeName&&s.id)o=s.id,s=C(A,s,[]),jt("id",t),jt(u,t),s.indexOf(o)>i&&t.setAttribute("id",o.value);else{if("INPUT"===t.nodeName&&"type"===r&&"file"===n&&(at[r]||!ft[r]))continue;"id"===u&&t.setAttribute(u,""),jt(u,t)}if(a.keepAttr){vt&&(n=(n=n.replace(X," ")).replace(Z," "));var p=t.nodeName.toLowerCase();if(Bt(p,r,n))try{f?t.setAttributeNS(f,u,n):t.setAttribute(u,n),l.removed.pop()}catch(t){}}}It("afterSanitizeAttributes",t,null)}},Vt=function t(e){var n=void 0,r=Pt(e);for(It("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)It("uponSanitizeShadowNode",n,null),zt(n)||(n.content instanceof D&&t(n.content),Lt(n));It("afterSanitizeShadowDOM",e,null)};return l.sanitize=function(t,e){var n=void 0,r=void 0,o=void 0,i=void 0,a=void 0;if(t||(t="\x3c!--\x3e"),"string"!=typeof t&&!Ft(t)){if("function"!=typeof t.toString)throw new TypeError("toString is not a function");if("string"!=typeof(t=t.toString()))throw new TypeError("dirty is not a string, aborting")}if(!l.isSupported){if("object"===M(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof t)return s.toStaticHTML(t);if(Ft(t))return s.toStaticHTML(t.outerHTML)}return t}if(gt||_t(e),l.removed=[],Mt);else if(t instanceof R)n=Rt("\x3c!--\x3e"),1===(r=n.ownerDocument.importNode(t,!0)).nodeType&&"BODY"===r.nodeName?n=r:n.appendChild(r);else{if(!bt&&!vt&&!mt&&-1===t.indexOf("<"))return q?q.createHTML(t):t;if(!(n=Rt(t)))return bt?null:H}n&&yt&&Dt(n.firstChild);for(var c=Pt(Mt?t:n);o=c.nextNode();)3===o.nodeType&&o===i||zt(o)||(o.content instanceof D&&Vt(o.content),Lt(o),i=o);if(i=null,Mt)return t;if(bt){if(xt)for(a=K.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return wt&&(a=Q.call(p,a,!0)),a}var u=mt?n.outerHTML:n.innerHTML;return vt&&(u=(u=u.replace(X," ")).replace(Z," ")),q?q.createHTML(u):u},l.setConfig=function(t){_t(t),gt=!0},l.clearConfig=function(){Et=null,gt=!1},l.isValidAttribute=function(t,e,n){Et||_t({});var r=t.toLowerCase(),o=e.toLowerCase();return Bt(r,o,n)},l.addHook=function(t,e){"function"==typeof e&&(Y[t]=Y[t]||[],Y[t].push(e))},l.removeHook=function(t){Y[t]&&Y[t].pop()},l.removeHooks=function(t){Y[t]&&(Y[t]=[])},l.removeAllHooks=function(){Y={}},l}()}()},function(t,e,n){var r=n(2),o=n(24),i="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(56);n(0)({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(t,e,n){"use strict";var r=n(190),o=n(4),i=n(15),s=n(191),a=n(77),c=n(17),u=n(78),f=n(56),l=n(2),p=[].push,h=Math.min,d=!l(function(){return!RegExp(4294967295,"y")});n(79)("split",2,function(t,e,n){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var o=String(i(this)),s=void 0===n?4294967295:n>>>0;if(0===s)return[];if(void 0===t)return[o];if(!r(t))return e.call(o,t,s);for(var a,c,u,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=new RegExp(t.source,h+"g");(a=f.call(v,o))&&!((c=v.lastIndex)>d&&(l.push(o.slice(d,a.index)),a.length>1&&a.index<o.length&&p.apply(l,a.slice(1)),u=a[0].length,d=c,l.length>=s));)v.lastIndex===a.index&&v.lastIndex++;return d===o.length?!u&&v.test("")||l.push(""):l.push(o.slice(d)),l.length>s?l.slice(0,s):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=i(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,n):l.call(String(r),e,n)},function(t,r){var i=n(l,t,this,r,l!==e);if(i.done)return i.value;var f=o(t),p=String(this),v=s(f,RegExp),m=f.unicode,g=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(d?"y":"g"),y=new v(d?f:"^(?:"+f.source+")",g),b=void 0===r?4294967295:r>>>0;if(0===b)return[];if(0===p.length)return null===u(y,p)?[p]:[];for(var x=0,w=0,S=[];w<p.length;){y.lastIndex=d?w:0;var O,M=u(y,d?p:p.slice(w));if(null===M||(O=h(c(y.lastIndex+(d?0:w)),p.length))===x)w=a(p,w,m);else{if(S.push(p.slice(x,w)),S.length===b)return S;for(var k=1;k<=M.length-1;k++)if(S.push(M[k]),S.length===b)return S;w=x=O}}return S.push(p.slice(x)),S}]},!d)},function(t,e,n){var r=n(72),o=n(46),i=n(23),s=n(17),a=n(183);t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,f=4==t,l=6==t,p=5==t||l,h=e||a;return function(e,a,d){for(var v,m,g=i(e),y=o(g),b=r(a,d,3),x=s(y.length),w=0,S=n?h(e,x):c?h(e,0):void 0;x>w;w++)if((p||w in y)&&(m=b(v=y[w],w,g),t))if(n)S[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:S.push(v)}else if(f)return!1;return l?-1:u||f?f:S}}},function(t,e){t.exports=!1},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(7),o=n(68),i=n(47),s=n(18),a=n(36),c=n(8),u=n(107),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=a(e,!0),u)try{return f(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,n){var r=n(35)("keys"),o=n(52);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(112),o=n(75).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){"use strict";var r,o,i=n(113),s=RegExp.prototype.exec,a=String.prototype.replace,c=s,u=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=void 0!==/()??/.exec("")[1];(u||f)&&(c=function(t){var e,n,r,o,c=this;return f&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(e=c.lastIndex),r=s.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),f&&r&&r.length>1&&a.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r}),t.exports=c},function(t,e,n){var r=n(209),o=n(210),i=n(211),s=n(212),a=n(213);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(85);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(20)(Object,"create");t.exports=r},function(t,e,n){var r=n(231);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(251),o=n(86),i=n(252),s=n(253),a=n(254),c=n(25),u=n(126),f=u(r),l=u(o),p=u(i),h=u(s),d=u(a),v=c;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(139),o=n(140);t.exports=function(t,e,n,i){var s=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],f=i?i(n[u],t[u],u,n,t):void 0;void 0===f&&(f=t[u]),s?o(n,u,f):r(n,u,f)}return n}},function(t,e,n){var r=n(9).f,o=n(8),i=n(3)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(25),o=n(16),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(64),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(347))&&"object"==typeof r&&"default"in r?r.default:r;var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},s={firstChild:{},lastChild:{},childCount:{}};i.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var u=s+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),n,r+u)}s=c}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)},0),o},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;c>t&&((s<t||c>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=c}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},s.firstChild.get=function(){return this.content.length?this.content[0]:null},s.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},s.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),function t(e,n,r){for(var o=0;;o++){if(o==e.childCount||o==n.childCount)return e.childCount==n.childCount?null:r;var i=e.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var c=t(i.content,s.content,r+1);if(null!=c)return c}r+=i.nodeSize}else r+=i.nodeSize}}(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),function t(e,n,r,o){for(var i=e.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=e.child(--i),c=n.child(--s),u=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:r,b:o};if(a.isText&&a.text!=c.text){for(var f=0,l=Math.min(a.text.length,c.text.length);f<l&&a.text[a.text.length-f-1]==c.text[c.text.length-f-1];)f++,r--,o--;return{a:r,b:o}}if(a.content.size||c.content.size){var p=t(a.content,c.content,r-1,o-1);if(p)return p}r-=u,o-=u}else r-=u,o-=u}}(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?c(n+1,o):c(n,r);r=o}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){return t?t instanceof i?t:Array.isArray(t)?this.fromArray(t):new i([t],t.nodeSize):i.empty},Object.defineProperties(i.prototype,s);var a={index:0,offset:0};function c(t,e){return a.index=t,a.offset=e,a}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!u(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e&&u(t[o],e[o])))return!1;for(var i in e)if(!(i in t))return!1}return!0}i.empty=new i([],0);var f=function(t,e){this.type=t,this.attrs=e};function l(t){var e=Error.call(this,t);return e.__proto__=l.prototype,e}f.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},f.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},f.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},f.prototype.eq=function(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)},f.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},f.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},f.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},f.setFrom=function(t){if(!t||0==t.length)return f.none;if(t instanceof f)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},f.none=[],l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="ReplaceError";var p=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},h={size:{}};function d(t,e,n){if(n.openStart>t.depth)throw new l("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new l("Inconsistent open depths");return function t(e,n,r,o){var s=e.index(o),a=e.node(o);if(s==n.index(o)&&o<e.depth-r.openStart){var c=t(e,n,r,o+1);return a.copy(a.content.replaceChild(s,c))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=o||n.depth!=o){var u=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(r,e),f=u.start,l=u.end;return b(a,function t(e,n,r,o,s){var a=e.depth>s&&m(e,n,s+1);var c=o.depth>s&&m(r,o,s+1);var u=[];y(null,e,s,u);a&&c&&n.index(s)==r.index(s)?(v(a,c),g(b(a,t(e,n,r,o,s+1)),u)):(a&&g(b(a,x(e,n,s+1)),u),y(n,r,s,u),c&&g(b(c,x(r,o,s+1)),u));y(o,null,s,u);return new i(u)}(e,f,l,n,o))}var p=e.parent,h=p.content;return b(p,h.cut(0,e.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}return b(a,x(e,n,o))}(t,e,n,0)}function v(t,e){if(!e.type.compatibleContent(t.type))throw new l("Cannot join "+e.type.name+" onto "+t.type.name)}function m(t,e,n){var r=t.node(n);return v(r,e.node(n)),r}function g(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function y(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(g(t.nodeAfter,r),i++));for(var a=i;a<s;a++)g(o.child(a),r);e&&e.depth==n&&e.textOffset&&g(e.nodeBefore,r)}function b(t,e){if(!t.type.validContent(e))throw new l("Invalid content for node "+t.type.name);return t.copy(e)}function x(t,e,n){var r=[];(y(null,t,n,r),t.depth>n)&&g(b(m(t,e,n+1),x(t,e,n+1)),r);return y(e,null,n,r),new i(r)}h.size.get=function(){return this.content.size-this.openStart-this.openEnd},p.prototype.insertAt=function(t,e){var n=function t(e,n,r,o){var i=e.findIndex(n);var s=i.index;var a=i.offset;var c=e.maybeChild(s);if(a==n||c.isText)return o&&!o.canReplace(s,s,r)?null:e.cut(0,n).append(r).append(e.cut(n));var u=t(c.content,n-a-1,r);return u&&e.replaceChild(s,c.copy(u))}(this.content,t+this.openStart,e,null);return n&&new p(n,this.openStart,this.openEnd)},p.prototype.removeBetween=function(t,e){return new p(function t(e,n,r){var o=e.findIndex(n);var i=o.index;var s=o.offset;var a=e.maybeChild(i);var c=e.findIndex(r);var u=c.index;var f=c.offset;if(s==n||a.isText){if(f!=r&&!e.child(u).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(r))}if(i!=u)throw new RangeError("Removing non-flat range");return e.replaceChild(i,a.copy(t(a.content,n-s-1,r-s-1)))}(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},p.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},p.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},p.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},p.fromJSON=function(t,e){if(!e)return p.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new p(i.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},p.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new p(t,n,r)},Object.defineProperties(p.prototype,h),p.empty=new p(i.empty,0,0);var w=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},S={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};w.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},S.parent.get=function(){return this.node(this.depth)},S.doc.get=function(){return this.node(0)},w.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},w.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},w.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},w.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},w.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},w.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},w.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},S.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},S.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},S.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},w.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return f.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},w.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},w.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},w.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new C(this,t,n)},w.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},w.prototype.max=function(t){return t.pos>this.pos?t:this},w.prototype.min=function(t){return t.pos<this.pos?t:this},w.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},w.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,u=o-c;if(n.push(i,a,r+c),!u)break;if((i=i.child(a)).isText)break;o=u-1,r+=c+1}return new w(e,n,o)},w.resolveCached=function(t,e){for(var n=0;n<O.length;n++){var r=O[n];if(r.pos==e&&r.doc==t)return r}var o=O[M]=w.resolve(t,e);return M=(M+1)%k,o},Object.defineProperties(w.prototype,S);var O=[],M=0,k=12,C=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},A={start:{},end:{},parent:{},startIndex:{},endIndex:{}};A.start.get=function(){return this.$from.before(this.depth+1)},A.end.get=function(){return this.$to.after(this.depth+1)},A.parent.get=function(){return this.$from.node(this.depth)},A.startIndex.get=function(){return this.$from.index(this.depth)},A.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(C.prototype,A);var T=Object.create(null),E=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||f.none},N={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};N.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},N.childCount.get=function(){return this.content.childCount},E.prototype.child=function(t){return this.content.child(t)},E.prototype.maybeChild=function(t){return this.content.maybeChild(t)},E.prototype.forEach=function(t){this.content.forEach(t)},E.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},E.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},N.textContent.get=function(){return this.textBetween(0,this.content.size,"")},E.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},N.firstChild.get=function(){return this.content.firstChild},N.lastChild.get=function(){return this.content.lastChild},E.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},E.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},E.prototype.hasMarkup=function(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||T)&&f.sameSet(this.marks,n||f.none)},E.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},E.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},E.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},E.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return p.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new p(a,r.depth-i,o.depth-i)},E.prototype.replace=function(t,e,n){return d(this.resolve(t),this.resolve(e),n)},E.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},E.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},E.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},E.prototype.resolve=function(t){return w.resolveCached(this,t)},E.prototype.resolveNoCache=function(t){return w.resolve(this,t)},E.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,function(t){return n.isInSet(t.marks)&&(r=!0),!r}),r},N.isBlock.get=function(){return this.type.isBlock},N.isTextblock.get=function(){return this.type.isTextblock},N.inlineContent.get=function(){return this.type.inlineContent},N.isInline.get=function(){return this.type.isInline},N.isText.get=function(){return this.type.isText},N.isLeaf.get=function(){return this.type.isLeaf},N.isAtom.get=function(){return this.type.isAtom},E.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),D(this.marks,t)},E.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},E.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},E.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},E.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},E.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},E.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(t){return t.check()})},E.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(t){return t.toJSON()})),t},E.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(E.prototype,N);var _=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{},nodeSize:{}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(E);function D(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var j=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},R={inlineContent:{},defaultType:{},edgeCount:{}};j.parse=function(t,e){var n=new P(t,e);if(null==n.next)return j.empty;var r=I(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return function n(r){var o=[];r.forEach(function(e){t[e].forEach(function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];q(t,r).forEach(function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)})}})});var i=e[r.join(",")]=new j(r.indexOf(t.length-1)>-1);for(var s=0;s<o.length;s+=2){var a=o[s+1].sort($);i.next.push(o[s],e[a.join(",")]||n(a))}return i}(q(t,0))}(function(t){var e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce(function(e,n){return e.concat(t(n,i))},[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],i);if(s==e.exprs.length-1)return a;o(a,i=n())}else{if("star"==e.type){var c=n();return r(i,c),o(t(e.expr,c),c),[r(c)]}if("plus"==e.type){var u=n();return o(t(e.expr,i),u),o(t(e.expr,u),u),[r(u)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){for(var f=i,l=0;l<e.min;l++){var p=n();o(t(e.expr,f),p),f=p}if(-1==e.max)o(t(e.expr,f),f);else for(var h=e.min;h<e.max;h++){var d=n();r(f,d),o(t(e.expr,f),d),f=d}return[r(f)]}if("name"==e.type)return[r(i,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach(function(t){return t.to=e})}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(o,n),o},j.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},j.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},R.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},R.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},j.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},j.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var c=s.matchFragment(t,n);if(c&&(!e||c.validEnd))return i.from(a.map(function(t){return t.createAndFill()}));for(var u=0;u<s.next.length;u+=2){var f=s.next[u],l=s.next[u+1];if(!f.isText&&!f.hasRequiredAttrs()&&-1==r.indexOf(l)){r.push(l);var p=o(l,a.concat(f));if(p)return p}}}(this,[])},j.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},j.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},R.edgeCount.get=function(){return this.next.length>>1},j.prototype.edge=function(t){var e=t<<1;if(e>this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},j.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map(function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r}).join("\n")},Object.defineProperties(j.prototype,R),j.empty=new j(!0);var P=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},F={next:{}};function I(t){var e=[];do{e.push(z(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function z(t){var e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){for(var e=function(t){if(t.eat("(")){var e=I(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=V(t,e)}return e}function L(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function V(t,e){var n=L(t),r=n;return t.eat(",")&&(r="}"!=t.next?L(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function $(t,e){return t-e}function q(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort($)}function H(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function J(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function W(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new K(t[n]);return e}F.next.get=function(){return this.tokens[this.pos]},P.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},P.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(P.prototype,F);var G=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=W(n.attrs),this.defaultAttrs=H(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},U={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};U.isInline.get=function(){return!this.isBlock},U.isTextblock.get=function(){return this.isBlock&&this.inlineContent},U.isLeaf.get=function(){return this.contentMatch==j.empty},U.isAtom.get=function(){return this.isLeaf||this.spec.atom},G.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},G.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},G.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:J(this.attrs,t)},G.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new E(this,this.computeAttrs(t),i.from(e),f.setFrom(n))},G.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new E(this,this.computeAttrs(t),e,f.setFrom(n))},G.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new E(this,t,e.append(o),f.setFrom(n)):null},G.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},G.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},G.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},G.prototype.allowedMarks=function(t){var e;if(null==this.markSet)return t;for(var n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:f.empty:t},G.compile=function(t,e){var n=Object.create(null);t.forEach(function(t,r){return n[t]=new G(t,e,r)});var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(G.prototype,U);var K=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Q={isRequired:{}};Q.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(K.prototype,Q);var Y=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=W(r.attrs),this.rank=e,this.excluded=null;var o=H(this.attrs);this.instance=o&&new f(this,o)};Y.prototype.create=function(t){return!t&&this.instance?this.instance:new f(this,J(this.attrs,t))},Y.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach(function(t,o){return n[t]=new Y(t,r++,e,o)}),n},Y.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},Y.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Y.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var X=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=G.compile(this.spec.nodes,this),this.marks=Y.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=j.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?Z(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],f=u.spec.excludes;u.excluded=null==f?[u]:""==f?[]:Z(this,f.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Z(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}X.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof G))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},X.prototype.text=function(t,e){var n=this.nodes.text;return new _(n,n.defaultAttrs,t,f.setFrom(e))},X.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},X.prototype.nodeFromJSON=function(t){return E.fromJSON(this,t)},X.prototype.markFromJSON=function(t){return f.fromJSON(this,t)},X.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var tt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})};tt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new ct(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},tt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new ct(this,e,!0);return n.addAll(t,null,e.from,e.to),p.maxOpen(n.finish())},tt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ft(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},tt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},tt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach(function(t){n(t=lt(t)),t.mark=e})};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach(function(t){n(t=lt(t)),t.node=s});return e},tt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new tt(t,tt.schemaRules(t)))};var et={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rt={ol:!0,ul:!0},ot=1,it=2;function st(t){return(t?ot:0)|("full"===t?it:0)}var at=function(t,e,n,r,o,i){this.type=t,this.attrs=e,this.solid=r,this.match=o||(4&i?null:t.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=f.none};at.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},at.prototype.finish=function(t){if(!(this.options&ot)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/\s+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var ct=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var r,o=e.topNode,i=st(e.preserveWhitespace)|(n?4:0);r=o?new at(o.type,o.attrs,f.none,!0,e.topMatch||o.type.contentMatch,i):new at(n?null:t.schema.topNodeType,null,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},ut={top:{},currentPos:{}};function ft(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function lt(t){var e={};for(var n in t)e[n]=t[n];return e}ut.top.get=function(){return this.nodes[this.open]},ct.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}},ct.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(e)){if(n.options&ot)n.options&it||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/\s+/g," "),/^\s/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/\s$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},ct.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();rt.hasOwnProperty(e)&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&rt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:nt.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;et.hasOwnProperty(e)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},ct.prototype.readStyles=function(t){for(var e=f.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},ct.prototype.addElementByRule=function(t,e){var n,r,o,i=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs)):n=this.enter(r,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(t){return i.insertNode(t)});else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}return n&&(this.sync(s),this.open--),o&&this.removePendingMark(o),!0},ct.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&et.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},ct.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},ct.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));n.content.push(t.mark(r))}},ct.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.type.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},ct.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),r},ct.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:st(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new at(t,e,o.activeMarks,n,null,i)),this.open++},ct.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},ct.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ct.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},ct.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},ct.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},ut.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},ct.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},ct.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},ct.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},ct.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},ct.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var u=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},ct.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Object.defineProperties(ct.prototype,ut);var pt=function(t,e){this.nodes=t||{},this.marks=e||{}};function ht(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function dt(t){return t.document||window.document}pt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=dt(e).createDocumentFragment());var o=n,i=null;return t.forEach(function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],u=r.serializeMark(c,t.isInline,e);u&&(i.push(c,o),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(r.serializeNode(t,e))}),n},pt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=pt.renderSpec(dt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},pt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},pt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&pt.renderSpec(dt(n),r(t,e))},pt.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,o=e[1],i=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o))for(var s in i=2,o)null!=o[s]&&n.setAttribute(s,o[s]);for(var a=i;a<e.length;a++){var c=e[a];if(0===c){if(a<e.length-1||a>i)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var u=pt.renderSpec(t,c),f=u.dom,l=u.contentDOM;if(n.appendChild(f),l){if(r)throw new RangeError("Multiple content holes");r=l}}return{dom:n,contentDOM:r}},pt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new pt(this.nodesFromSchema(t),this.marksFromSchema(t)))},pt.nodesFromSchema=function(t){var e=ht(t.nodes);return e.text||(e.text=function(t){return t.text}),e},pt.marksFromSchema=function(t){return ht(t.marks)},e.Node=E,e.ResolvedPos=w,e.NodeRange=C,e.Fragment=i,e.Slice=p,e.ReplaceError=l,e.Mark=f,e.Schema=X,e.NodeType=G,e.MarkType=Y,e.ContentMatch=j,e.DOMParser=tt,e.DOMSerializer=pt},function(t,e,n){var r=n(83);t.exports=function(t,e){return r(t,e)}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(112),o=n(75);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=n(185),i=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r.Slice.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var u=a[c],f=u.$from,l=u.$to,p=t.mapping.slice(s);t.replaceRange(p.map(f.pos),p.map(l.pos),c?r.Slice.empty:e),0==c&&m(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),u=c.map(s.pos),f=c.map(a.pos);o?t.deleteRange(u,f):(t.replaceRangeWith(u,f,e),m(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new u(t):v(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?v(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):v(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return v(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return v(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return u.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},u=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),t.prototype.replace.call(this,e,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new f(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i?n=r:(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0&&(n=r)),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",u);var f=function(t,e){this.anchor=t,this.head=e};f.prototype.map=function(t){return new f(t.map(this.anchor),t.map(this.head))},f.prototype.resolve=function(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))};var l=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new p(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);l.prototype.visible=!1,s.jsonID("node",l);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new f(r,r):new p(r)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&l.isSelectable(n)?new l(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return d},e}(s);s.jsonID("all",h);var d={map:function(){return this},resolve:function(t){return new h(t)}};function v(t,e,n,r,o,i){if(e.inlineContent)return u.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&l.isSelectable(a))return l.create(t,n-(o<0?a.nodeSize:0))}else{var c=v(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function m(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i,a=t.steps[r];if(a instanceof o.ReplaceStep||a instanceof o.ReplaceAroundStep)t.mapping.maps[r].forEach(function(t,e,n,r){null==i&&(i=r)}),t.setSelection(s.near(t.doc.resolve(i),n))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o))},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(o.Transform);function y(t,e){return e&&t?t.bind(e):t}var b=function(t,e,n){this.name=t,this.init=y(e.init,n),this.apply=y(e.apply,n)},x=[new b("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new b("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new b("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],w=function(t,e){var n=this;this.schema=t,this.fields=x.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new b(t.key,t.spec.state,t))})},S=function(t){this.config=t},O={schema:{},plugins:{},tr:{}};O.schema.get=function(){return this.config.schema},O.plugins.get=function(){return this.config.plugins},S.prototype.apply=function(t){return this.applyTransaction(t).state},S.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},S.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,u=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(var f=0;f<this.config.plugins.length;f++)r.push(f<i?{state:n,n:e.length}:{state:this,n:0})}e.push(u),n=n.applyInner(u),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},S.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new S(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<M.length;i++)M[i](this,t,e);return e},O.tr.get=function(){return new g(this)},S.create=function(t){for(var e=new w(t.schema||t.doc.type.schema,t.plugins),n=new S(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},S.prototype.reconfigure=function(t){for(var e=new w(t.schema||this.schema,t.plugins),n=e.fields,r=new S(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},S.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(function(t){return t.toJSON()})),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},S.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new w(t.schema,t.plugins),i=new S(o);return o.fields.forEach(function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(i[o.name]=u.fromJSON.call(c,t,e[a],i))}i[o.name]=o.init(t,i)}}),i},S.addApplyListener=function(t){M.push(t)},S.removeApplyListener=function(t){var e=M.indexOf(t);e>-1&&M.splice(e,1)},Object.defineProperties(S.prototype,O);var M=[];var k=function(t){this.props={},t.props&&function t(e,n,r){for(var o in e){var i=e[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=t(i,n,{})),r[o]=i}return r}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:A("plugin")};k.prototype.getState=function(t){return t[this.key]};var C=Object.create(null);function A(t){return t in C?t+"$"+ ++C[t]:(C[t]=0,t+"$")}var T=function(t){void 0===t&&(t="key"),this.key=A(t)};T.prototype.get=function(t){return t.config.pluginsByKey[this.key]},T.prototype.getState=function(t){return t[this.key]},e.Selection=s,e.SelectionRange=c,e.TextSelection=u,e.NodeSelection=l,e.AllSelection=h,e.Transaction=g,e.EditorState=S,e.Plugin=k,e.PluginKey=T},function(t,e,n){var r=n(33);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(1),o=n(11);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(18),o=n(17),i=n(189);t.exports=function(t){return function(e,n,s){var a,c=r(e),u=o(c.length),f=i(s,u);if(t&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(2),o=/#|\.prototype\./,i=function(t,e){var n=a[s(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},s=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){"use strict";var r=n(114);t.exports=function(t,e,n){return e+(n?r(t,e,!0).length:1)}},function(t,e,n){var r=n(24),o=n(56);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){"use strict";var r=n(11),o=n(13),i=n(2),s=n(3),a=n(56),c=s("species"),u=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=!i(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});t.exports=function(t,e,n,l){var p=s(t),h=!i(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),d=h&&!i(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!e});if(!h||!d||"replace"===t&&!u||"split"===t&&!f){var v=/./[p],m=n(p,""[t],function(t,e,n,r,o){return e.exec===a?h&&!o?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),g=m[0],y=m[1];o(String.prototype,t,g),o(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)}),l&&r(RegExp.prototype[p],"sham",!0)}}},function(t,e,n){var r=n(15),o="["+n(81)+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$");t.exports=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(i,"")),2&e&&(t=t.replace(s,"")),t}},function(t,e){t.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(t,e,n){var r=n(204);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n,o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(208),o=n(16);t.exports=function t(e,n,i,s,a){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,s,t,a))}},function(t,e,n){var r=n(57),o=n(214),i=n(215),s=n(216),a=n(217),c=n(218);function u(t){var e=this.__data__=new r(t);this.size=e.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,t.exports=u},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(20)(n(12),"Map");t.exports=r},function(t,e,n){var r=n(223),o=n(230),i=n(232),s=n(233),a=n(234);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(244),o=n(132),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return i.call(t,e)}))}:o;t.exports=a},function(t,e,n){(function(t){var r=n(12),o=n(247),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;t.exports=c}).call(this,n(90)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(117),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o&&r.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(90)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(128);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){"use strict";var r=n(74)(!1),o=[].indexOf,i=!!o&&1/[1].indexOf(1,-0)<0,s=n(39)("indexOf");n(0)({target:"Array",proto:!0,forced:i||s},{indexOf:function(t){return i?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(18),o=n(121),i=n(43),s=n(37),a=n(98),c=s.set,u=s.getterFor("Array Iterator");t.exports=a(Array,"Array",function(t,e){c(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=u(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){"use strict";var r=n(0),o=n(281),i=n(99),s=n(82),a=n(63),c=n(11),u=n(13),f=n(51),l=n(3)("iterator"),p=n(43),h=n(150),d=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,m=function(){return this};t.exports=function(t,e,n,h,g,y,b){o(n,e,h);var x,w,S,O=function(t){if(t===g&&T)return T;if(!v&&t in C)return C[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},M=e+" Iterator",k=!1,C=t.prototype,A=C[l]||C["@@iterator"]||g&&C[g],T=!v&&A||O(g),E="Array"==e&&C.entries||A;if(E&&(x=i(E.call(new t)),d!==Object.prototype&&x.next&&(f||i(x)===d||(s?s(x,d):"function"!=typeof x[l]&&c(x,l,m)),a(x,M,!0,!0),f&&(p[M]=m))),"values"==g&&A&&"values"!==A.name&&(k=!0,T=function(){return A.call(this)}),f&&!b||C[l]===T||c(C,l,T),p[e]=T,g)if(w={values:O("values"),keys:y?T:O("keys"),entries:O("entries")},b)for(S in w)!v&&!k&&S in C||u(C,S,w[S]);else r({target:e,proto:!0,forced:v||k},w);return w}},function(t,e,n){var r=n(8),o=n(23),i=n(54)("IE_PROTO"),s=n(151),a=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(13)(r,"toString",function(){var t=i.call(this);return t==t?o.call(this):"Invalid Date"})},function(t,e,n){var r=n(292),o=Object.prototype;r!==o.toString&&n(13)(o,"toString",r,{unsafe:!0})},function(t,e,n){"use strict";var r=n(4),o=n(2),i=n(113),s=n(7),a=/./.toString,c=o(function(){return"/a/b"!=a.call({source:"a",flags:"b"})}),u="toString"!=a.name;(c||u)&&n(13)(RegExp.prototype,"toString",function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)},{unsafe:!0})},function(t,e,n){var r=n(10),o=n(64),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){"use strict";var r=n(18),o=[].join,i=n(46)!=Object,s=n(39)("join",",");n(0)({target:"Array",proto:!0,forced:i||s},{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){var r=n(24);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(2),o=n(3)("species");t.exports=function(t){return!r(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(t,e,n){t.exports=!n(7)&&!n(2)(function(){return 7!=Object.defineProperty(n(108)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){t.exports=!n(2)(function(){String(Symbol())})},function(t,e,n){t.exports=n(35)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(8),o=n(188),i=n(53),s=n(9);t.exports=function(t,e){for(var n=o(e),a=s.f,c=i.f,u=0;u<n.length;u++){var f=n[u];r(t,f)||a(t,f,c(e,f))}}},function(t,e,n){var r=n(8),o=n(18),i=n(74)(!1),s=n(38);t.exports=function(t,e){var n,a=o(t),c=0,u=[];for(n in a)!r(s,n)&&r(a,n)&&u.push(n);for(;e.length>c;)r(a,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){"use strict";var r=n(4);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(34),o=n(15);t.exports=function(t,e,n){var i,s,a=String(o(t)),c=r(e),u=a.length;return c<0||c>=u?n?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?n?a.charAt(c):i:n?a.slice(c,c+2):s-56320+(i-55296<<10)+65536}},function(t,e,n){"use strict";var r=n(4),o=n(23),i=n(17),s=n(34),a=n(15),c=n(77),u=n(78),f=Math.max,l=Math.min,p=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(79)("replace",2,function(t,e,n){return[function(n,r){var o=a(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,o){var a=n(e,t,this,o);if(a.done)return a.value;var p=r(t),h=String(this),d="function"==typeof o;d||(o=String(o));var m=p.global;if(m){var g=p.unicode;p.lastIndex=0}for(var y=[];;){var b=u(p,h);if(null===b)break;if(y.push(b),!m)break;""===String(b[0])&&(p.lastIndex=c(h,i(p.lastIndex),g))}for(var x,w="",S=0,O=0;O<y.length;O++){b=y[O];for(var M=String(b[0]),k=f(l(s(b.index),h.length),0),C=[],A=1;A<b.length;A++)C.push(void 0===(x=b[A])?x:String(x));var T=b.groups;if(d){var E=[M].concat(C,k,h);void 0!==T&&E.push(T);var N=String(o.apply(void 0,E))}else N=v(M,h,k,C,T,o);k>=S&&(w+=h.slice(S,k)+N,S=k+M.length)}return w+h.slice(S)}];function v(t,n,r,i,s,a){var c=r+t.length,u=i.length,f=d;return void 0!==s&&(s=o(s),f=h),e.call(a,f,function(e,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":a=s[o.slice(1,-1)];break;default:var f=+o;if(0===f)return e;if(f>u){var l=p(f/10);return 0===l?e:l<=u?void 0===i[l-1]?o.charAt(1):i[l-1]+o.charAt(1):e}a=i[f-1]}return void 0===a?"":a})}})},function(t,e,n){"use strict";var r=n(80),o=n(193)("trim");n(0)({target:"String",proto:!0,forced:o},{trim:function(){return r(this,3)}})},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(118))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return o}),n.d(e,"__assign",function(){return i}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return c}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return f}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return h}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return y}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return x}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return S});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}function a(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})}function l(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){o[t]&&(r[t]=function(e){return new Promise(function(n,r){i.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=o[t](e)).value instanceof m?Promise.resolve(n.value.v).then(c,u):f(i[0][2],n)}catch(t){f(i[0][3],t)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function f(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function y(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=h(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,o,(e=t[n](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(119),o=n(41),i=["maj","major","Maj","M","Î"],s=["m","minor","min","â","-"],a=["aug","augmented","+"],c={parsing:{notes:[[o.Notes.AFlat,["Ab","Aâ­"]],[o.Notes.A,["A"]],[o.Notes.ASharp,["A#","Aâ¯"]],[o.Notes.BFlat,["Bb","Bâ­"]],[o.Notes.B,["B"]],[o.Notes.C,["C"]],[o.Notes.CSharp,["C#","Câ¯"]],[o.Notes.DFlat,["Db","Dâ­"]],[o.Notes.D,["D"]],[o.Notes.DSharp,["D#","Dâ¯"]],[o.Notes.EFlat,["Eb","Eâ­"]],[o.Notes.E,["E"]],[o.Notes.F,["F"]],[o.Notes.FSharp,["F#","Fâ¯"]],[o.Notes.GFlat,["Gb","Gâ­"]],[o.Notes.G,["G"]],[o.Notes.GSharp,["G#","Gâ¯"]]],qualities:[[o.Qualities.Major,i],[o.Qualities.Minor,s],[o.Qualities.MinorMajor,f(s,i)],[o.Qualities.Augmented,a],[o.Qualities.AugmentedMajor,f(a,i)],[o.Qualities.Diminished,["0","dim","diminished","Â°","o","O"]],[o.Qualities.HalfDiminished,["Ã","Ã¸"]],[o.Qualities.Power,["5","no3"]]],sevenths:[[o.Sevenths.Seventh,["7"]]],ninths:[[o.Ninths.Major9,["9"]],[o.Ninths.Minor9,["b9","â­9"]],[o.Ninths.Sharpened9,["#9","â¯9"]]],elevenths:[[o.Elevenths.Perfect11,["11"]],[o.Elevenths.Sharpened11,["#11","â¯11"]],[o.Elevenths.Flattened11,["b11","â­11"]]],thirteenths:[[o.Thirteenths.Major13,["13"]],[o.Thirteenths.Minor13,["b13","â­13"]]],addeds:[[o.Addeds.Add9,["add9","2","/9"]],[o.Addeds.Add11,["add11","4","/11"]],[o.Addeds.Add13,["add13","6","/13"]]],suspendeds:[[o.Suspendeds.Sus4,["sus4","suspended","sus"]],[o.Suspendeds.Sus2,["sus2","suspended2"]]],alteredFifths:[[o.AlteredFifths.Sharpened5,["#5","â¯5"]],[o.AlteredFifths.Flattened5,["b5","â­5"]]]},printing:{notes:[[o.Notes.AFlat,"Ab"],[o.Notes.A,"A"],[o.Notes.ASharp,"A#"],[o.Notes.BFlat,"Bb"],[o.Notes.B,"B"],[o.Notes.C,"C"],[o.Notes.CSharp,"C#"],[o.Notes.DFlat,"Db"],[o.Notes.D,"D"],[o.Notes.DSharp,"D#"],[o.Notes.EFlat,"Eb"],[o.Notes.E,"E"],[o.Notes.F,"F"],[o.Notes.FSharp,"F#"],[o.Notes.GFlat,"Gb"],[o.Notes.G,"G"],[o.Notes.GSharp,"G#"]],qualities:[[o.Qualities.Major,"maj"],[o.Qualities.Minor,"m"],[o.Qualities.MinorMajor,"mmaj"],[o.Qualities.Augmented,"aug"],[o.Qualities.AugmentedMajor,"augmaj"],[o.Qualities.Diminished,"dim"],[o.Qualities.HalfDiminished,"Ã"],[o.Qualities.Power,"5"]],sevenths:[[o.Sevenths.Seventh,"7"]],ninths:[[o.Ninths.Major9,"9"],[o.Ninths.Minor9,"b9"],[o.Ninths.Sharpened9,"#9"]],elevenths:[[o.Elevenths.Perfect11,"11"],[o.Elevenths.Sharpened11,"#11"],[o.Elevenths.Flattened11,"b11"]],thirteenths:[[o.Thirteenths.Major13,"13"],[o.Thirteenths.Minor13,"b13"]],addeds:[[o.Addeds.Add9,"add9"],[o.Addeds.Add11,"add11"],[o.Addeds.Add13,"add13"]],suspendeds:[[o.Suspendeds.Sus4,"sus4"],[o.Suspendeds.Sus2,"sus2"]],alteredFifths:[[o.AlteredFifths.Sharpened5,"#5"],[o.AlteredFifths.Flattened5,"b5"]]}};function u(t){var e=new Map;return t.forEach(function(t,n){t.forEach(function(t){return e.set(t,n)})}),e}function f(t,e){var n=[];return t.forEach(function(t){return n.push.apply(n,e.map(function(e){return""+t+e}))}),n}var l=function(){return function(t){var e=this;this.checkValidityOrThrow=function(){var t={notes:Object.keys(o.Notes).map(function(t){return o.Notes[t]}),qualities:Object.keys(o.Qualities).map(function(t){return o.Qualities[t]}),sevenths:Object.keys(o.Sevenths).map(function(t){return o.Sevenths[t]}),ninths:Object.keys(o.Ninths).map(function(t){return o.Ninths[t]}),elevenths:Object.keys(o.Elevenths).map(function(t){return o.Elevenths[t]}),thirteenths:Object.keys(o.Thirteenths).map(function(t){return o.Thirteenths[t]}),addeds:Object.keys(o.Addeds).map(function(t){return o.Addeds[t]}),suspendeds:Object.keys(o.Suspendeds).map(function(t){return o.Suspendeds[t]}),alteredFifths:Object.keys(o.AlteredFifths).map(function(t){return o.AlteredFifths[t]})};e.performCheckForChordPart(t.notes,e.names.notes,e.preferredNames.notes),e.performCheckForChordPart(t.qualities,e.names.qualities,e.preferredNames.qualities),e.performCheckForChordPart(t.sevenths,e.names.sevenths,e.preferredNames.sevenths),e.performCheckForChordPart(t.ninths,e.names.ninths,e.preferredNames.ninths),e.performCheckForChordPart(t.elevenths,e.names.elevenths,e.preferredNames.elevenths),e.performCheckForChordPart(t.thirteenths,e.names.thirteenths,e.preferredNames.thirteenths),e.performCheckForChordPart(t.addeds,e.names.addeds,e.preferredNames.addeds),e.performCheckForChordPart(t.suspendeds,e.names.suspendeds,e.preferredNames.suspendeds),e.performCheckForChordPart(t.alteredFifths,e.names.alteredFifths,e.preferredNames.alteredFifths)},this.performCheckForChordPart=function(t,n,r){e.checkAllEnumValuesAppearOrThrow(t,n,r),e.checkPreferredNameAppearsInNamesOrThrow(n,r),e.checkNamesAppearOnlyOnceOrThrow(n)},this.checkAllEnumValuesAppearOrThrow=function(t,e,n){var r=Array.from(e.keys()),o=Array.from(n.keys()),i=new Set(t).size,s=new Set(r).size,a=new Set(o).size;if(i!==s)throw new Error("[chords] Naming: expected all of "+JSON.stringify(t)+" to appear as keys in the name map, but only found "+JSON.stringify(t));if(i!==a)throw new Error("[chords] Naming: expected all of "+JSON.stringify(t)+" to appear as keys in the preferredName map, but only found "+JSON.stringify(o))},this.checkPreferredNameAppearsInNamesOrThrow=function(t,e){e.forEach(function(e,n){var r=t.get(n);if(void 0===e)throw new Error("[chords] Naming: preferred name value for '"+n+"' cannot be undefined");if(void 0===r)throw new Error("[chords] Naming: name list for '"+n+"' cannot be undefined");if(-1===r.indexOf(e))throw new Error("[chords] Naming: preferred name '"+e+"' for key '"+n+"' has to appear in the name list '"+JSON.stringify(r)+"'")})},this.checkNamesAppearOnlyOnceOrThrow=function(t){var e=[];t.forEach(function(t){e.push.apply(e,t)});var n=new Set(e);if(e.length!==n.size)throw new Error("[chords] Naming: some name appears twice in '"+JSON.stringify(e)+"'")},this.naming=r.__assign({},c,t),this.names={notes:new Map(this.naming.parsing.notes),qualities:new Map(this.naming.parsing.qualities),sevenths:new Map(this.naming.parsing.sevenths),ninths:new Map(this.naming.parsing.ninths),elevenths:new Map(this.naming.parsing.elevenths),thirteenths:new Map(this.naming.parsing.thirteenths),addeds:new Map(this.naming.parsing.addeds),suspendeds:new Map(this.naming.parsing.suspendeds),alteredFifths:new Map(this.naming.parsing.alteredFifths)},this.preferredNames={notes:new Map(this.naming.printing.notes),qualities:new Map(this.naming.printing.qualities),sevenths:new Map(this.naming.printing.sevenths),ninths:new Map(this.naming.printing.ninths),elevenths:new Map(this.naming.printing.elevenths),thirteenths:new Map(this.naming.printing.thirteenths),addeds:new Map(this.naming.printing.addeds),suspendeds:new Map(this.naming.printing.suspendeds),alteredFifths:new Map(this.naming.printing.alteredFifths)},this.lookups={notes:u(this.names.notes),qualities:u(this.names.qualities),sevenths:u(this.names.sevenths),ninths:u(this.names.ninths),elevenths:u(this.names.elevenths),thirteenths:u(this.names.thirteenths),addeds:u(this.names.addeds),suspendeds:u(this.names.suspendeds),alteredFifths:u(this.names.alteredFifths)},this.checkValidityOrThrow()}}();e.Naming=l},function(t,e,n){var r=n(3)("unscopables"),o=n(19),i=n(11),s=Array.prototype;null==s[r]&&i(s,r,o(null)),t.exports=function(t){s[r][t]=!0}},function(t,e,n){var r=n(6),o=n(82);t.exports=function(t,e,n){var i,s=e.constructor;return s!==n&&"function"==typeof s&&(i=s.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){"use strict";var r=[].forEach,o=n(50)(0),i=n(39)("forEach");t.exports=i?function(t){return o(this,t,arguments[1])}:r},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(25),o=n(21),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==s||e==a||e==i||e==c}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(235),o=n(238),i=n(239),s=1,a=2;t.exports=function(t,e,n,c,u,f){var l=n&s,p=t.length,h=e.length;if(p!=h&&!(l&&h>p))return!1;var d=f.get(t);if(d&&f.get(e))return d==e;var v=-1,m=!0,g=n&a?new r:void 0;for(f.set(t,e),f.set(e,t);++v<p;){var y=t[v],b=e[v];if(c)var x=l?c(b,y,v,e,t,f):c(y,b,v,t,e,f);if(void 0!==x){if(x)continue;m=!1;break}if(g){if(!o(e,function(t,e){if(!i(g,e)&&(y===t||u(y,t,n,c,f)))return g.push(e)})){m=!1;break}}else if(y!==b&&!u(y,b,n,c,f)){m=!1;break}}return f.delete(t),f.delete(e),m}},function(t,e,n){var r=n(12).Uint8Array;t.exports=r},function(t,e,n){var r=n(130),o=n(88),i=n(42);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(131),o=n(10);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(245),o=n(134),i=n(10),s=n(89),a=n(135),c=n(136),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&s(t),p=!n&&!f&&!l&&c(t),h=n||f||l||p,d=h?r(t.length,String):[],v=d.length;for(var m in t)!e&&!u.call(t,m)||h&&("length"==m||l&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,v))||d.push(m);return d}},function(t,e,n){var r=n(246),o=n(16),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(248),o=n(92),i=n(93),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(125),o=n(91);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){var r=n(140),o=n(85),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];i.call(t,e)&&o(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(257);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(133),o=n(260),i=n(138);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e,n){var r=n(131),o=n(143),i=n(88),s=n(132),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:s;t.exports=a},function(t,e,n){var r=n(137)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){"use strict";var r=n(1),o=n(8),i=n(7),s=n(51),a=n(0),c=n(13),u=n(38),f=n(2),l=n(35),p=n(63),h=n(52),d=n(3),v=n(145),m=n(146),g=n(279),y=n(105),b=n(4),x=n(6),w=n(18),S=n(36),O=n(47),M=n(19),k=n(280),C=n(53),A=n(9),T=n(68),E=n(11),N=n(70),_=n(54)("hidden"),D=n(37),j=D.set,R=D.getterFor("Symbol"),P=C.f,F=A.f,I=k.f,z=r.Symbol,B=r.JSON,L=B&&B.stringify,V=d("toPrimitive"),$=T.f,q=l("symbol-registry"),H=l("symbols"),J=l("op-symbols"),W=l("wks"),G=Object.prototype,U=r.QObject,K=n(109),Q=!U||!U.prototype||!U.prototype.findChild,Y=i&&f(function(){return 7!=M(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=P(G,e);r&&delete G[e],F(t,e,n),r&&t!==G&&F(G,e,r)}:F,X=function(t,e){var n=H[t]=M(z.prototype);return j(n,{type:"Symbol",tag:t,description:e}),i||(n.description=e),n},Z=K&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},tt=function(t,e,n){return t===G&&tt(J,e,n),b(t),e=S(e,!0),b(n),o(H,e)?(n.enumerable?(o(t,_)&&t[_][e]&&(t[_][e]=!1),n=M(n,{enumerable:O(0,!1)})):(o(t,_)||F(t,_,O(1,{})),t[_][e]=!0),Y(t,e,n)):F(t,e,n)},et=function(t,e){b(t);for(var n,r=g(e=w(e)),o=0,i=r.length;i>o;)tt(t,n=r[o++],e[n]);return t},nt=function(t){var e=$.call(this,t=S(t,!0));return!(this===G&&o(H,t)&&!o(J,t))&&(!(e||!o(this,t)||!o(H,t)||o(this,_)&&this[_][t])||e)},rt=function(t,e){if(t=w(t),e=S(e,!0),t!==G||!o(H,e)||o(J,e)){var n=P(t,e);return!n||!o(H,e)||o(t,_)&&t[_][e]||(n.enumerable=!0),n}},ot=function(t){for(var e,n=I(w(t)),r=[],i=0;n.length>i;)o(H,e=n[i++])||o(u,e)||r.push(e);return r},it=function(t){for(var e,n=t===G,r=I(n?J:w(t)),i=[],s=0;r.length>s;)!o(H,e=r[s++])||n&&!o(G,e)||i.push(H[e]);return i};K||(c((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=void 0===arguments[0]?void 0:String(arguments[0]),e=h(t),n=function(t){this===G&&n.call(J,t),o(this,_)&&o(this[_],e)&&(this[_][e]=!1),Y(this,e,O(1,t))};return i&&Q&&Y(G,e,{configurable:!0,set:n}),X(e,t)}).prototype,"toString",function(){return R(this).tag}),T.f=nt,A.f=tt,C.f=rt,n(55).f=k.f=ot,n(69).f=it,i&&(F(z.prototype,"description",{configurable:!0,get:function(){return R(this).description}}),s||c(G,"propertyIsEnumerable",nt,{unsafe:!0})),v.f=function(t){return X(d(t),t)}),a({global:!0,wrap:!0,forced:!K,sham:!K},{Symbol:z});for(var st=N(W),at=0;st.length>at;)m(st[at++]);a({target:"Symbol",stat:!0,forced:!K},{for:function(t){return o(q,t+="")?q[t]:q[t]=z(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol");for(var e in q)if(q[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),a({target:"Object",stat:!0,forced:!K,sham:!i},{create:function(t,e){return void 0===e?M(t):et(M(t),e)},defineProperty:tt,defineProperties:et,getOwnPropertyDescriptor:rt}),a({target:"Object",stat:!0,forced:!K},{getOwnPropertyNames:ot,getOwnPropertySymbols:it}),B&&a({target:"JSON",stat:!0,forced:!K||f(function(){var t=z();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})},{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(x(e)||void 0!==t)&&!Z(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,L.apply(B,r)}}),z.prototype[V]||E(z.prototype,V,z.prototype.valueOf),p(z,"Symbol"),u[_]=!0},function(t,e,n){e.f=n(3)},function(t,e,n){var r=n(147),o=n(8),i=n(145),s=n(9).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||s(e,t,{value:i.f(t)})}},function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var r=n(7),o=n(8),i=n(6),s=n(9).f,a=n(111),c=n(1).Symbol;if(r&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new c(t):void 0===t?c():c(t);return""===t&&(u[e]=!0),e};a(f,c);var l=f.prototype=c.prototype;l.constructor=f;var p=l.toString,h="Symbol(test)"==String(c("test")),d=/^Symbol\((.*)\)[^)]+$/;s(l,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=p.call(t);if(o(u,t))return"";var n=h?e.slice(7,-1):e.replace(d,"$1");return""===n?void 0:n}}),n(0)({global:!0,forced:!0},{Symbol:f})}},function(t,e,n){n(146)("iterator")},function(t,e,n){"use strict";var r,o,i,s=n(99),a=n(11),c=n(8),u=n(51),f=n(3)("iterator"),l=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):l=!0),null==r&&(r={}),u||c(r,f)||a(r,f,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},function(t,e,n){t.exports=!n(2)(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,n){n(0)({target:"Function",proto:!0},{bind:n(153)})},function(t,e,n){"use strict";var r=n(33),o=n(6),i=[].slice,s={};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?function(t,e,n){if(!(e in s)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";s[e]=Function("C,a","return new C("+r.join(",")+")")}return s[e](t,n)}(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){var r=n(7),o=n(9).f,i=Function.prototype,s=i.toString,a=/^\s*function ([^ (]*)/;!r||"name"in i||o(i,"name",{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},function(t,e,n){"use strict";t.exports=n(282)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},n(288),!0)},function(t,e,n){var r=n(52)("meta"),o=n(283),i=n(6),s=n(8),a=n(9).f,c=0,u=Object.isExtensible||function(){return!0},f=function(t){a(t,r,{value:{objectID:"O"+ ++c,weakData:{}}})},l=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,r)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[r].objectID},getWeakData:function(t,e){if(!s(t,r)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[r].weakData},onFreeze:function(t){return o&&l.REQUIRED&&u(t)&&!s(t,r)&&f(t),t}};n(38)[r]=!0},function(t,e,n){var r=n(4),o=n(284),i=n(17),s=n(72),a=n(285),c=n(286),u={};(t.exports=function(t,e,n,f,l){var p,h,d,v,m,g=s(e,n,f?2:1);if(l)p=t;else{if("function"!=typeof(h=a(t)))throw TypeError("Target is not iterable");if(o(h)){for(d=0,v=i(t.length);v>d;d++)if((f?g(r(m=t[d])[0],m[1]):g(t[d]))===u)return u;return}p=h.call(t)}for(;!(m=p.next()).done;)if(c(p,g,m.value,f)===u)return u}).BREAK=u},function(t,e,n){var r=n(24),o=n(3)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){n(0)({target:"Object",stat:!0,sham:!n(7)},{create:n(19)})},function(t,e,n){var r=n(23),o=n(99),i=n(151),s=n(2)(function(){o(1)});n(0)({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(t){return o(r(t))}})},function(t,e,n){n(0)({target:"Object",stat:!0},{setPrototypeOf:n(82)})},function(t,e,n){var r=n(19),o=n(33),i=n(4),s=n(6),a=n(2),c=n(153),u=(n(1).Reflect||{}).construct,f=a(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),l=!a(function(){u(function(){})}),p=f||l;n(0)({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){o(t),i(e);var n=arguments.length<3?t:o(arguments[2]);if(l&&!f)return u(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var a=[null];return a.push.apply(a,e),new(c.apply(t,a))}var p=n.prototype,h=r(s(p)?p:Object.prototype),d=Function.apply.call(t,h,e);return s(d)?d:h}})},function(t,e,n){"use strict";var r=n(114),o=n(37),i=n(98),s=o.set,a=o.getterFor("String Iterator");i(String,"String",function(t){s(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=a(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o,!0),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(124),o=n(97),i=n(1),s=n(11),a=n(3),c=a("iterator"),u=a("toStringTag"),f=o.values;for(var l in r){var p=i[l],h=p&&p.prototype;if(h){if(h[c]!==f)try{s(h,c,f)}catch(t){h[c]=f}if(h[u]||s(h,u,l),r[l])for(var d in o)if(h[d]!==o[d])try{s(h,d,o[d])}catch(t){h[d]=o[d]}}}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(169),o=n(65);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(10),o=n(103),i=n(300),s=n(303);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";var r=n(50)(2),o=n(106)("filter");n(0)({target:"Array",proto:!0,forced:!o},{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.HandlebarsEnvironment=u;var o=n(14),i=r(n(44)),s=n(322),a=n(330),c=r(n(332));e.VERSION="4.1.1";e.COMPILER_REVISION=7;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function u(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},s.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:c.default,log:c.default.log,registerHelper:function(t,e){if("[object Object]"===o.toString.call(t)){if(e)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if("[object Object]"===o.toString.call(t))o.extend(this.partials,t);else{if(void 0===e)throw new i.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if("[object Object]"===o.toString.call(t)){if(e)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var f=c.default.log;e.log=f,e.createFrame=o.createFrame,e.logger=c.default},function(t,e,n){"use strict";n(32),n(48),n(49);var r=n(10),o=n.n(r),i=n(45),s=n.n(i);function a(t){return s.a.sanitize(t)}function c(t){return s.a.sanitize(t,{ALLOWED_TAGS:["#text"],KEEP_CONTENT:!0})}n(192),n(115),n(116);var u=n(29),f=n.n(u),l=n(30),p=new l.Chords;function h(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\t+/g," ").replace(/  +/g," ").trim().split(" ").map(function(t){return t.replace(/\.*$/g,"")}).every(function(t){return function(t){return f()(t)&&p.isChord(t)}(t)})}n(200);var d=["2/2","3/2","3/4","4/4","5/4","3/8","6/8","9/8","12/8"];function v(t){return d.includes(t)}n(203),n(205);function m(t){if(!v(t))throw new TypeError("Expected time signature string, received: "+t);var e=t.split("/"),n=Number.parseInt(e[0],10),r=Number.parseInt(e[1],10),o=n;return 2===r?o=2*n:8===r&&(o=n/3),{string:t,count:n,value:r,beatCount:o}}n(26),n(207),n(27);var g=n(67),y=n.n(g),b=n(5),x=n.n(b),w=new l.Chords;n(144),n(148),n(149),n(96),n(97),n(100),n(152),n(154),n(155),n(160),n(161),n(162),n(101),n(163),n(102),n(164),n(165);var S=n(22),O=n.n(S);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){var e="function"==typeof Map?new Map:void 0;return(C=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return A(t,arguments,E(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T(r,t)})(t)}function A(t,e,n){return(A=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&T(o,n.prototype),o}).apply(null,arguments)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.string,o=n.duration,i=n.currentBeatCount,s=n.beatCount;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!r||!f()(r))throw new TypeError("IncorrectBeatCountException cannot be created without chord string, received: "+r);if(!o||!O()(o))throw new TypeError("IncorrectBeatCountException cannot be created without chord duration, received: "+o);if(!i||!O()(i))throw new TypeError("IncorrectBeatCountException cannot be created without currentBeatCount, received: "+i);if(!s||!O()(s))throw new TypeError("IncorrectBeatCountException cannot be created without beatCount, received: "+s);return(t=k(this,E(e).call(this))).name="IncorrectBeatCountException",t.string=r,t.duration=o,t.currentBeatCount=i,t.beatCount=s,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,C(Error)),e}();function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){var e="function"==typeof Map?new Map:void 0;return(j=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return R(t,arguments,F(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,t)})(t)}function R(t,e,n){return(R=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&P(o,n.prototype),o}).apply(null,arguments)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).string;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!n||!f()(n))throw new TypeError("InvalidChordRepetitionException cannot be created without chord string, received: "+n);return(t=D(this,F(e).call(this))).name="InvalidChordRepetitionException",t.string=n,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,j(Error)),e}();function z(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).timeSignature,n=void 0===e?m("4/4"):e,r=n.beatCount,o=t.replace(/  +/g," ").trim().split(" "),i=[],s={allChords:[]},a={},c={},u=0,f=0,l={};if(o.forEach(function(t){if(c=function(t){return w.parse(t)}(t.replace(/\./g,"")),(a={string:t,duration:(t.match(/\./g)||[]).length||r,model:c}).beat=u+1,u+=a.duration,s.allChords.length>0&&(l=s.allChords[s.allChords.length-1],y()(l.model,a.model)))throw new I({string:a.string});if(s.allChords.push(a),f++,u===r)s.timeSignature=n,i.push(x()(s)),s={allChords:[]},u=0,l={};else if(u>r)throw new N({message:"",string:a.string,duration:a.duration,currentBeatCount:u,beatCount:r})}),u>0&&u<r)throw new N({message:"",string:a.string,duration:a.duration,currentBeatCount:u,beatCount:r});return{chordCount:f,allBars:i}}var B=n(175),L=n.n(B),V=n(31);n.d(e,"a",function(){return q});var $="4/4";function q(t){var e=o()(t)?t:t.split("\n"),n=m($),r=e.map(a).map(c).map(function(t){return{string:t}}).map(function(t){if(v(t.string))n=m(t.string),t.type="time-signature",t.model=n;else if(h(t.string))try{t.type="chord",t.model=z(t.string,{timeSignature:n})}catch(e){t.type="text"}else t.type="text";return t});return{allLines:r,allChords:function(t){var e,n=[];return Object(V.a)(t,function(t){-1===(e=L()(n,function(e){return y()(e.model,t.model)}))?n.push({model:x()(t.model),occurrences:1}):n[e].occurrences++}),n}(r)}}},function(t,e,n){"use strict";n(171),n(104),n(32),n(26),n(27);n(100),n(101),n(102);var r=n(5),o=n.n(r),i={0:{"":[]},2:{2:[3],11:[3,2]},3:{3:[3],12:[2,4],21:[6,0],111:[2,2,0]},4:{4:[3],13:[1,4],22:[3,2],31:[5,0],112:[1,1,3],121:[1,4,0],211:[4,1,0],1111:[2,2,2]}};var s=2,a=1;n(96);var c=n(176),u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],f={"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},l=n.n(c)()(f);function p(t){return l[t]||t}function h(t,e,n){var r=u.indexOf(t)+e,o=Math.floor(r/12),i=u[r-12*o];return n&&f[i]||i}var d=n(31);function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.transposeValue,i=void 0===r?0:r,s=n.accidentalsType,a=void 0===s?"auto":s,c=n.harmonizeAccidentals,u=void 0===c||c,f=o()(t),l="auto"===a?function(t){var e="",n=0,r=0;return t.forEach(function(t){2===(e=t.model.symbol.rootNote).length&&("b"===e[1]?n+=t.occurrences:r+=t.occurrences)}),n>r?"flat":"sharp"}(e):a;return(u||0!==i)&&(f=Object(d.a)(f,function(t){t.transposedModel=function(t,e,n){var r=o()(t),i=r.symbol.rootNote,s=r.symbol.bassNote,a=p(i);if(r.symbol.rootNote=h(a,e,n),s){var c=p(s);r.symbol.bassNote=h(c,e,n)}return r}(t.model,i,"flat"===l)})),f}var m=n(177),g=n.n(m),y=(n(184),n(337),n(22)),b=n.n(y),x=n(178),w=n.n(x);var S=n(179),O=n.n(S),M=" ",k=0,C=2;function A(t){var e=0,n=0,r=t.allChords.reduce(function(t,r){var o;return e=b()(r.spacesWithin)?r.spacesWithin:k,n=b()(r.spacesAfter)?r.spacesAfter:C,t+=(o=r.symbol,w()({chordSymbol:o})+M.repeat(e)+M.repeat(n))},"");return O()({barContent:r})}var T=n(180),E=n.n(T);var N=n(181),_=n.n(N);var D=n(182),j=n.n(D),R=new(n(30).Chords),P=function(t){return R.print(t.symbol)};function F(t,e){var n=e.alignBars,r=void 0!==n&&n,c=e.transposeValue,u=void 0===c?0:c,f=e.accidentalsType,l=void 0===f?"auto":f,p=e.harmonizeAccidentals,h=void 0===p||p,m=t.allLines;m=v(m,t.allChords,{transposeValue:u,accidentalsType:l,harmonizeAccidentals:h});var y=function(t){var e=[];return t.filter(function(t){return"chord"===t.type}).forEach(function(t){t.model.allBars.forEach(function(t,n){if(!e[n]){e[n]={};for(var r=1;r<=t.timeSignature.beatCount;r++)e[n][r]=0}t.allChords.forEach(function(t){e[n][t.beat]=Math.max(e[n][t.beat],t.symbol.length)})})}),e}(m=Object(d.a)(m,function(t){t.symbol=t.transposedModel?P(t.transposedModel):P(t.model)})),b=m.map(function(t){if("chord"===t.type){var e=r?function(t,e){var n,r=o()(t);return r.allBars.forEach(function(t,r){t.allChords.forEach(function(o){if(o.spacesWithin=e[r][o.beat]-o.symbol.length,o.spacesAfter=0,o.beat!==t.timeSignature.beatCount){o.spacesAfter=s;for(var i=o.beat+1;i<o.beat+o.duration;i++)n=e[r][i],o.spacesAfter+=n||a,i!==t.timeSignature.beatCount&&n&&(o.spacesAfter+=s)}})}),r}(t.model,y):(c=t.model,u=o()(c),f=0,l="",p=[],u.allBars.forEach(function(t){f=0,l="",t.allChords.forEach(function(t){l+=t.duration.toString(),f+=t.duration}),p=i[f][l];for(var e=0;e<l.length;e++)t.allChords[e].spacesAfter=p[e]}),u);t.rendered=function(t){var e=t.allBars.map(function(t){return A(t)}),n=E()(),r=n+e.join(n)+n;return g()({chordLine:r})}(e)}else"text"===t.type&&(t.rendered=(n=t.string,_()({textLine:n})));var n,c,u,f,l,p;return t}).filter(function(t){return t.rendered}).map(function(t){return t.rendered}).join("\n");return j()({song:b})}n.d(e,"a",function(){return F})},function(t,e,n){var r=n(293),o=n(294),i=n(312),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var c=null==n?0:i(n);return c<0&&(c=s(a+c,0)),r(t,o(e,3),c)}},function(t,e,n){var r=n(315),o=n(316),i=n(170),s=Object.prototype.toString,a=o(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=s.call(e)),t[e]=n},r(i));t.exports=a},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){var i;return'<p class="ucc-chord-line">'+(null!=(i=t.lambda(null!=e?e.chordLine:e,e))?i:"")+"</p>"},useData:!0})},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){return'<span class="ucc-chord-symbol">'+t.escapeExpression(t.lambda(null!=e?e.chordSymbol:e,e))+"</span>"},useData:!0})},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){var i;return'<span class="ucc-bar-content">'+(null!=(i=t.lambda(null!=e?e.barContent:e,e))?i:"")+"</span>"},useData:!0})},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){return'<span class="ucc-bar-separator">|</span>'},useData:!0})},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){var i;return'<p class="ucc-text-line">'+(null!=(i=t.lambda(null!=e?e.textLine:e,e))?i:"")+"</p>"},useData:!0})},function(t,e,n){var r=n(28);t.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,r,o){var i;return'<div class="ucc-song">'+(null!=(i=t.lambda(null!=e?e.song:e,e))?i:"")+"</div>"},useData:!0})},function(t,e,n){var r=n(6),o=n(105),i=n(3)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var r=n(336),o=n(39)("reduce");n(0)({target:"Array",proto:!0,forced:o},{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=65535,i=Math.pow(2,16);function s(t){return t&o}var a=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},c=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};c.prototype.recover=function(t){var e=0,n=s(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(t&o))/i}(t)},c.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},c.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},c.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,s=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var u=this.ranges[c]-(this.inverted?r:0);if(u>t)break;var f=this.ranges[c+o],l=this.ranges[c+s],p=u+f;if(t<=p){var h=u+r+((f?t==u?-1:t==p?1:e:e)<0?0:l);if(n)return h;var d=c/3+(t-u)*i;return new a(h,e<0?t!=u:t!=p,d)}r+=l-f}return n?t+r:new a(t+r)},c.prototype.touches=function(t,e){for(var n=0,r=s(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var u=this.ranges[a+o];if(t<=c+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1},c.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],u=this.ranges[r+n];t(s,s+c,a,a+u),o+=u-c}},c.prototype.invert=function(){return new c(this.ranges,!this.inverted)},c.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},c.offset=function(t){return 0==t?c.empty:new c(t<0?[0,-t,0]:[0,0,t])},c.empty=new c([]);var u=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function f(t){var e=Error.call(this,t);return e.__proto__=f.prototype,e}u.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new u(this.maps,this.mirror,t,e)},u.prototype.copy=function(){return new u(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},u.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},u.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},u.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},u.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},u.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},u.prototype.invert=function(){var t=new u;return t.appendMappingInverted(this),t},u.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},u.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},u.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var s=this.maps[i],c=o&&o[i];if(null!=c&&s.touches(t,c))t=s.recover(c);else{var u=s.mapResult(t,e);if(null!=u.recover){var f=this.getMirror(i);if(null!=f&&f>i&&f<this.to){if(u.deleted){i=f,t=this.maps[f].recover(u.recover);continue}(o||(o=Object.create(null)))[f]=u.recover}}u.deleted&&(r=!0),t=u.pos}}return n?t:new a(t,r)},f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="TransformError";var l=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new u},p={before:{},docChanged:{}};function h(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},l.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new f(e.failed);return this},l.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},p.docChanged.get=function(){return this.steps.length>0},l.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(l.prototype,p);var d=Object.create(null),v=function(){};v.prototype.apply=function(t){return h()},v.prototype.getMap=function(){return c.empty},v.prototype.invert=function(t){return h()},v.prototype.map=function(t){return h()},v.prototype.merge=function(t){return null},v.prototype.toJSON=function(){return h()},v.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=d[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},v.jsonID=function(t,e){if(t in d)throw new RangeError("Duplicate use of step JSON ID "+t);return d[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(t,e,n,o){try{return m.ok(t.replace(e,n,o))}catch(t){if(t instanceof r.ReplaceError)return m.fail(t.message);throw t}};var g=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&b(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new c([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(v);v.jsonID("replace",g);var y=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(b(t,this.from,this.gapFrom)||b(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?m.fromReplace(t,this.from,this.to,n):m.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new c([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(v);function b(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function x(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function w(t){return{type:t,attrs:null}}function S(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function O(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function M(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(M(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}v.jsonID("replaceAround",y),l.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),c=s,u=a,f=r.Fragment.empty,l=0,p=i,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,f=r.Fragment.from(n.node(p).copy(f)),l++):c--;for(var d=r.Fragment.empty,v=0,m=i,g=!1;m>e;m--)g||o.after(m+1)<o.end(m)?(g=!0,d=r.Fragment.from(o.node(m).copy(d)),v++):u++;return this.step(new y(c,u,s,a,new r.Slice(f.append(d),l,v),f.size-l,!0))},l.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,o=e.length-1;o>=0;o--)n=r.Fragment.from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new y(i,s,i,s,new r.Slice(n,0,0),e.length,!0))},l.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),c=a.map(e,1),u=a.map(e+t.nodeSize,1);return i.step(new y(c,u,c+1,u-1,new r.Slice(r.Fragment.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}}),this},l.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new y(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},l.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,c=o.depth-e,u=e-1;a>c;a--,u--){i=r.Fragment.from(o.node(a).copy(i));var f=n&&n[u];s=r.Fragment.from(f?f.type.create(f.attrs,s):o.node(a).copy(s))}return this.step(new g(t,t,new r.Slice(i.append(s),e,e,!0)))},l.prototype.join=function(t,e){void 0===e&&(e=1);var n=new g(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var k=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(M(n.content,function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t},i),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new C(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(v);v.jsonID("addMark",k);var C=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.Slice(M(n.content,function(t){return t.mark(e.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new k(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(v);function A(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.Slice.empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);if(N(i,s,o))return new g(e,n,o);var a=function(t,e){var n=function t(e,n,o,i){var s=r.Fragment.empty,a=0,c=o[n];if(e.depth>n){var u=t(e,n+1,o,i||c);a=u.openEnd+1,s=r.Fragment.from(e.node(n+1).copy(u.content))}c&&(s=s.append(c.content),a=c.openEnd);i&&(s=s.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),a=0);return{content:s,openEnd:a}}(t,0,e,!1),o=n.content,i=n.openEnd;return new r.Slice(o,t.depth,i||0)}(i,function(t,e){for(var n=new _(t),r=1;e.size&&r<=3;r++)e=n.placeSlice(e.content,e.openStart,e.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(i,o)),c=E(i,s,a);if(!c)return null;if(a.size!=c.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var r,o=n.openEnd?function(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd}(i,s,a)){for(var u=s.depth,f=s.after(u);u>1&&f==s.end(--u);)++f;var l=E(i,t.resolve(f),a);if(l)return new y(e,f,n,s.end(),l,a.size)}return c.size||e!=n?new g(e,n,c):null}function T(t,e,n,o,i,s,a){var c,u=t.childCount,f=u-(a>0?1:0),l=s<0?e:n.node(i);c=s<0?l.contentMatchAt(f):1==u&&a>0?l.contentMatchAt(s?n.index(i):n.indexAfter(i)):l.contentMatchAt(n.indexAfter(i)).matchFragment(t,u>0&&s?1:0,f);var p=o.node(i);if(a>0&&i<o.depth){var h=p.content.cutByIndex(o.indexAfter(i)).addToStart(t.lastChild),d=c.fillBefore(h,!0);if(d&&d.size&&s>0&&1==u&&(d=null),d){var v=T(t.lastChild.content,t.lastChild,n,o,i+1,1==u?s-1:-1,a-1);if(v){var m=t.lastChild.copy(v);return d.size?t.cutByIndex(0,u-1).append(d).addToEnd(m):t.replaceChild(u-1,m)}}}a>0&&(c=c.matchType((1==u&&s>0?n.node(i+1):t.lastChild).type));var g=o.index(i);if(g==p.childCount&&!p.type.compatibleContent(e.type))return null;for(var y=c.fillBefore(p.content,!0,g),b=g;y&&b<p.content.childCount;b++)l.type.allowsMarks(p.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var x=function t(e,n,o,i,s){var a,c=e.content,u=c.childCount;a=s>=0?o.node(i).contentMatchAt(o.indexAfter(i)).matchFragment(c,s>0?1:0,u):e.contentMatchAt(u);if(n>0){var f=t(c.lastChild,n-1,o,i+1,1==u?s-1:-1);c=c.replaceChild(u-1,f)}return e.copy(c.append(a.fillBefore(r.Fragment.empty,!0)))}(t.lastChild,a-1,n,i+1,1==u?s-1:-1);t=t.replaceChild(u-1,x)}return t=t.append(y),o.depth>i&&(t=t.addToEnd(function t(e,n){var r=e.node(n);var o=r.contentMatchAt(0).fillBefore(r.content,!0,e.index(n));e.depth>n&&(o=o.addToEnd(t(e,n+1)));return r.copy(o)}(o,i+1))),t}function E(t,e,n){var o=T(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return o?function(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new r.Slice(t,e,n)}(o,n.openStart,e.depth):null}function N(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}v.jsonID("removeMark",C),l.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,function(r,c,u){if(r.isInline){var f=r.marks;if(!n.isInSet(f)&&u.type.allowsMarkType(n.type)){for(var l=Math.max(c,t),p=Math.min(c+r.nodeSize,e),h=n.addToSet(f),d=0;d<f.length;d++)f[d].isInSet(h)||(s&&s.to==l&&s.mark.eq(f[d])?s.to=p:o.push(s=new C(l,p,f[d])));a&&a.to==l?a.to=p:i.push(a=new k(l,p,n))}}}),o.forEach(function(t){return r.step(t)}),i.forEach(function(t){return r.step(t)}),this},l.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.MarkType){var u=n.isInSet(o.marks);u&&(c=[u])}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var f=Math.min(a+o.nodeSize,e),l=0;l<c.length;l++){for(var p=c[l],h=void 0,d=0;d<i.length;d++){var v=i[d];v.step==s-1&&p.eq(i[d].style)&&(h=v)}h?(h.to=f,h.step=s):i.push({style:p,from:Math.max(a,t),to:f,step:s})}}}),i.forEach(function(t){return o.step(new C(t.from,t.to,t.style))}),this},l.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var c=o.child(a),u=s+c.nodeSize,f=n.matchType(c.type,c.attrs);if(f){n=f;for(var l=0;l<c.marks.length;l++)e.allowsMarkType(c.marks[l].type)||this.step(new C(s,u,c.marks[l]))}else i.push(new g(s,u,r.Slice.empty));s=u}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},l.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var o=A(this.doc,t,e,n);return o&&this.step(o),this},l.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},l.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},l.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var _=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),o=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:o,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function D(t,e,n){var r=t.content;if(e>1){var o=D(t.firstChild,e-1,1==t.childCount?n-1:0);r=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(r,0==n);return t.copy(i.append(r))}function j(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(j(i.content,e+1,n,r,i)))}return e>r&&(t=o.contentMatchAt(0).fillBefore(t,!0).append(t)),t}function R(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}_.prototype.placeSlice=function(t,e,n,o,i){if(e>0){var s=t.firstChild,a=this.placeSlice(s.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,o,s);a.content!=s.content&&(a.content.size?(t=t.replaceChild(0,s.copy(a.content)),e=a.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),e=0))}var c=this.placeContent(t,e,n,o,i);if(o>2&&c.size&&0==e){for(var u=0;u<c.content.childCount;u++){var f=c.content.child(u);this.placeContent(f.content,0,n&&u==c.content.childCount.length-1?n-1:0,o,f)}c=r.Fragment.empty}return c},_.prototype.placeContent=function(t,e,n,o,i){for(var s=0;s<t.childCount;s++){for(var a=t.child(s),c=!1,u=s==t.childCount-1,f=this.open.length-1;f>=0;f--){var l=this.open[f],p=void 0;if(o>1&&(p=l.match.findWrapping(a.type))&&(!i||!p.length||p[p.length-1]!=i.type)){for(;this.open.length-1>f;)this.closeNode();for(var h=0;h<p.length;h++)l.match=l.match.matchType(p[h]),f++,l={parent:p[h].create(),match:p[h].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:f+h},this.open.push(l)}var d=l.match.matchType(a.type);if(!d){var v=l.match.fillBefore(r.Fragment.from(a));if(!v){if(i&&l.match.matchType(i.type))break;continue}for(var m=0;m<v.childCount;m++){var g=v.child(m);this.addNode(l,g,0),d=l.match.matchFragment(g)}}for(;this.open.length-1>f;)this.closeNode();a=a.mark(l.parent.type.allowedMarks(a.marks)),e&&(a=D(a,e,u?n:0),e=0),this.addNode(l,a,u?n:0),l.match=d,u&&(n=0),c=!0;break}if(!c)break}return this.open.length>1&&(s>0&&s==t.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new r.Slice(t.cutByIndex(s),e,n)},_.prototype.addNode=function(t,e,n){var o,i;t.content=(o=t.content,i=t.openEnd,i?o.replaceChild(o.childCount-1,function t(e,n){var o=e.content;if(n>1){var i=t(e.lastChild,n-1);o=e.content.replaceChild(e.childCount-1,i)}var s=e.contentMatchAt(e.childCount).fillBefore(r.Fragment.empty,!0);return e.copy(o.append(s))}(o.lastChild,i)):o).addToEnd(e),t.openEnd=n},_.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},l.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(N(o,i,n))return this.step(new g(t,e,n));var s=R(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,u=o.pos-1;c>0;c--,u--){var f=o.node(c).type.spec;if(f.defining||f.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==u&&s.splice(1,0,-c)}for(var l=s.indexOf(a),p=[],h=n.openStart,d=n.content,v=0;;v++){var m=d.firstChild;if(p.push(m),v==n.openStart)break;d=m.content}h>0&&p[h-1].type.spec.defining&&o.node(l).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(l).type!=p[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var b=(y+h+1)%(n.openStart+1),x=p[b];if(x)for(var w=0;w<s.length;w++){var S=s[(w+l)%s.length],O=!0;S<0&&(O=!1,S=-S);var M=o.node(S-1),k=o.index(S-1);if(M.canReplaceWith(k,k,x.type,x.marks))return this.replace(o.before(S),O?i.after(S):e,new r.Slice(j(n.content,0,n.openStart,b),b,n.openEnd))}}return this.replace(t,e,n)},l.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=O(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},l.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=R(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c))return this.delete(n.before(c),e);return this.delete(t,e)},e.Transform=l,e.TransformError=f,e.Step=v,e.StepResult=m,e.joinPoint=function(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0;if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),s=r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),s=r.node(o+1)),i&&!i.isTextblock&&S(i,s))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}},e.canJoin=function(t,e){var n=t.resolve(e),r=n.index();return S(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},e.canSplit=function(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var u=o.node(a),f=o.index(a);if(u.type.spec.isolating)return!1;var l=u.content.cutByIndex(f,u.childCount),p=r&&r[c]||u;if(p!=u&&(l=l.replaceChild(0,p.type.create(p.attrs))),!u.canReplace(f+1,u.childCount)||!p.type.validContent(l))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)},e.insertPoint=O,e.dropPoint=function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(u,u,o):r.node(a).contentMatchAt(u).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null},e.liftTarget=function(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!x(r,o,i))break}},e.findWrapping=function(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);return a&&a.validEnd?s:null}(r,e);return i?o.map(w).concat({type:e,attrs:n}).concat(i.map(w)):null},e.StepMap=c,e.MapResult=a,e.Mapping=u,e.AddMarkStep=k,e.RemoveMarkStep=C,e.ReplaceStep=g,e.ReplaceAroundStep=y,e.replaceStep=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(351))&&"object"==typeof r&&"default"in r?r.default:r,i=n(185),s=n(71),a=function(t,e){this.items=t,this.eventCount=e};a.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(n.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,u,f=t.tr,l=[],p=[];return this.items.forEach(function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void p.push(t);if(r){p.push(new c(t.map));var h,d=t.step.map(r.slice(o));d&&f.maybeStep(d).doc&&(h=f.mapping.maps[f.mapping.maps.length-1],l.push(new c(h,null,null,l.length+p.length))),o--,h&&r.appendMap(h,o)}else f.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,u=new a(n.items.slice(0,i).append(p.reverse().concat(l)),n.eventCount-1),!1):void 0},this.items.length,0),{remaining:u,transform:f,selection:s}},a.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,u=!r&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var p,h=t.steps[l].invert(t.docs[l]),d=new c(t.mapping.maps[l],h,e);(p=u&&u.merge(d))&&(d=p,l?o.pop():s=s.slice(0,s.length-1)),o.push(d),e&&(i++,e=null),r||(u=d)}var v,m,g,y=i-n.depth;return y>f&&(m=y,(v=s).forEach(function(t,e){if(t.selection&&0==m--)return g=e,!1}),s=v.slice(g),i-=y),new a(s.append(o),i)},a.prototype.remapping=function(t,e){var n=new i.Mapping;return this.items.forEach(function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?o=n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)},t,e),n},a.prototype.addMaps=function(t){return 0==this.eventCount?this:new a(this.items.append(t.map(function(t){return new c(t)})),this.eventCount)},a.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach(function(t){t.selection&&s--},r);var u=e;this.items.forEach(function(e){var r=o.getMirror(--u);if(null!=r){i=Math.min(i,r);var a=o.maps[r];if(e.step){var f=t.steps[r].invert(t.docs[r]),l=e.selection&&e.selection.map(o.slice(u+1,r));l&&s++,n.push(new c(a,f,l))}else n.push(new c(a))}},r);for(var f=[],l=e;l<i;l++)f.push(new c(o.maps[l]));var p=this.items.slice(0,r).append(f).append(n),h=new a(p,s);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-n.length)),h},a.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(e){e.step||t++}),t},a.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach(function(o,s){if(s>=t)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(e.slice(n)),u=a&&a.getMap();if(n--,u&&e.appendMap(u,n),a){var f=o.selection&&o.selection.map(e.slice(n));f&&i++;var l,p=new c(u.invert(),a,f),h=r.length-1;(l=r.length&&r[h].merge(p))?r[h]=l:r.push(p)}}else o.map&&n--},this.items.length,0),new a(o.from(r.reverse()),i)},a.empty=new a(o.empty,0);var c=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};c.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new c(e.getMap().invert(),e,this.selection)}};var u=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},f=20;function l(t){var e=[];return t.forEach(function(t,n,r,o){return e.push(r,o)}),e}function p(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function h(t,e,n,r){var o=m(e),i=g.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),f=new u(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(g,{redo:r,historyState:f}).scrollIntoView())}}var d=!1,v=null;function m(t){var e=t.plugins;if(v!=e){d=!1,v=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){d=!0;break}}return d}var g=new s.PluginKey("history"),y=new s.PluginKey("closeHistory");e.HistoryState=u,e.closeHistory=function(t){return t.setMeta(y,!0)},e.history=function(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new s.Plugin({key:g,state:{init:function(){return new u(a.empty,a.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(g);if(i)return i.historyState;n.getMeta(y)&&(t=new u(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(g))return s.getMeta(g).redo?new u(t.done.addTransform(n,null,r,m(e)),t.undone,l(n.mapping.maps[n.steps.length-1]),t.prevTime):new u(t.done,t.undone.addTransform(n,null,r,m(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new u(t.done.rebased(n,o),t.undone.rebased(n,o),p(t.prevRanges,n.mapping),t.prevTime):new u(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),p(t.prevRanges,n.mapping),t.prevTime);var c=t.prevTime<(n.time||0)-r.newGroupDelay||!s&&!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach(function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)}),n}(n,t.prevRanges),f=s?p(t.prevRanges,n.mapping):l(n.mapping.maps[n.steps.length-1]);return new u(t.done.addTransform(n,c?e.selection.getBookmark():null,r,m(e)),a.empty,f,n.time)}(n,r,e,t)}},config:t})},e.undo=function(t,e){var n=g.getState(t);return!(!n||0==n.done.eventCount||(e&&h(n,t,e,!1),0))},e.redo=function(t,e){var n=g.getState(t);return!(!n||0==n.undone.eventCount||(e&&h(n,t,e,!0),0))},e.undoDepth=function(t){var e=g.getState(t);return e?e.done.eventCount:0},e.redoDepth=function(t){var e=g.getState(t);return e?e.undone.eventCount:0}},function(t,e,n){var r=n(110),o=n(1).WeakMap;t.exports="function"==typeof o&&/native code/.test(r.call(o))},function(t,e,n){var r=n(55),o=n(69),i=n(4),s=n(1).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(34),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(6),o=n(24),i=n(3)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(4),o=n(33),i=n(3)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[i])?e:o(n)}},function(t,e,n){"use strict";var r=n(50)(4),o=n(39)("every");n(0)({target:"Array",proto:!0,forced:o},{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var r=n(2),o=n(81);t.exports=function(t){return r(function(){return!!o[t]()||"âÂá "!="âÂá "[t]()||o[t].name!==t})}},function(t,e,n){var r=n(40),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(197),o=n(198),i=n(120),s=function(){return function(t){var e=this;this.parse=function(t){return e.chordParser.parse(t)},this.isChord=function(t){return e.chordParser.isValidString(t)},this.print=function(t){return e.chordPrinter.print(t)};var n=new i.Naming(t);this.chordParser=new o.ChordParser(n),this.chordPrinter=new r.ChordPrinter(n)}}();e.Chords=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){function t(t){this.naming=t}return t.prototype.print=function(t){var e=t.rootNote,n=t.quality,o=t.seventh,i=t.ninth,s=t.eleventh,a=t.thirteenth,c=t.addeds,u=t.suspendeds,f=t.alteredFifth,l=t.bassNote,p="";return p+=e,p+=this.getSymbolText(n,this.naming.preferredNames.qualities),p+=this.getSymbolText(o,this.naming.preferredNames.sevenths),p+=this.getSymbolText(i,this.naming.preferredNames.ninths),p+=this.getSymbolText(s,this.naming.preferredNames.elevenths),p+=this.getSymbolText(a,this.naming.preferredNames.thirteenths),p+=this.getSymbolTextForSet(c,r.addedOrder,this.naming.preferredNames.addeds),p+=this.getSymbolTextForSet(u,r.suspendedOrder,this.naming.preferredNames.suspendeds),p+=this.getSymbolText(f,this.naming.preferredNames.alteredFifths),void 0!==l&&(p+="/"+l),p},t.prototype.getSymbolTextForSet=function(t,e,n){var r=this;return e.map(function(e){if(t.has(e))return r.getSymbolText(e,n)}).filter(function(t){return void 0!==t}).join("")},t.prototype.getSymbolText=function(t,e){if(void 0===t)return"";var n=e.get(t);if(void 0===n)throw new Error("[Chords] No preferred name found for symbol '"+t+"'");return n},t}();e.ChordPrinter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(199),o=n(41),i=function(){function t(t){this.qualityBasicConstraints=new Map([[o.Qualities.Major,{4:!0}],[o.Qualities.Minor,{3:!0}],[o.Qualities.MinorMajor,void 0],[o.Qualities.Augmented,{4:!0,8:!0}],[o.Qualities.AugmentedMajor,void 0],[o.Qualities.Diminished,{3:!0,6:!0}],[o.Qualities.HalfDiminished,void 0],[o.Qualities.Power,{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!0,8:!1,9:!1,10:!1,11:!1}]]),this.qualityExtendedConstraints=new Map([[o.Qualities.Major,{11:!0}],[o.Qualities.Minor,{3:!0,10:!0}],[o.Qualities.MinorMajor,{3:!0,11:!0}],[o.Qualities.Augmented,{4:!0,8:!0,10:!0}],[o.Qualities.AugmentedMajor,{4:!0,8:!0,11:!0}],[o.Qualities.Diminished,{3:!0,6:!0,9:!0}],[o.Qualities.HalfDiminished,{3:!0,6:!0,10:!0}],[o.Qualities.Power,{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!0,8:!1,9:!1,10:!1,11:!1}]]),this.seventhConstraints=new Map([[o.Sevenths.Seventh,{}]]),this.ninthConstraints=new Map([[o.Ninths.Major9,{2:!0}],[o.Ninths.Minor9,{1:!0}],[o.Ninths.Sharpened9,{3:!0}]]),this.eleventhConstraints=new Map([[o.Elevenths.Perfect11,{5:!0}],[o.Elevenths.Sharpened11,{6:!0}],[o.Elevenths.Flattened11,{4:!0}]]),this.thirteenthConstraints=new Map([[o.Thirteenths.Major13,{9:!0}],[o.Thirteenths.Minor13,{8:!0}]]),this.addedConstraints=new Map([[o.Addeds.Add9,{2:!0}],[o.Addeds.Add11,{5:!0}],[o.Addeds.Add13,{9:!0}]]),this.suspendedConstraints=new Map([[o.Suspendeds.Sus4,{3:!1,4:!1,5:!0}],[o.Suspendeds.Sus2,{2:!0,3:!1,4:!1}]]),this.alteredFifthConstraints=new Map([[o.AlteredFifths.Sharpened5,{7:!1,8:!0}],[o.AlteredFifths.Flattened5,{6:!0,7:!1}]]),this.chordSymbolParser=new r.ChordSymbolParser(t)}return t.prototype.isValidString=function(t){return void 0!==this.parse(t)},t.prototype.parse=function(t){var e=this.chordSymbolParser.parse(t);return void 0===e?void 0:this.symbolToChord(e)},t.prototype.symbolToChord=function(t){var e=this.symbolToStructure(t);return void 0===e?void 0:{symbol:t,structure:e}},t.prototype.symbolToStructure=function(t){var e=this.symbolToConstraints(t);return this.resolveConstraints(e)},t.prototype.resolveConstraints=function(t){for(var e=[],n=0;n<12;n++)e.push(new Set);t.forEach(function(t){e[1].add(t[1]),e[2].add(t[2]),e[3].add(t[3]),e[4].add(t[4]),e[5].add(t[5]),e[6].add(t[6]),e[7].add(t[7]),e[8].add(t[8]),e[9].add(t[9]),e[10].add(t[10]),e[11].add(t[11])});var r={1:this.constraintSetToValue(e[1]),2:this.constraintSetToValue(e[2]),3:this.constraintSetToValue(e[3]),4:this.constraintSetToValue(e[4]),5:this.constraintSetToValue(e[5]),6:this.constraintSetToValue(e[6]),7:this.constraintSetToValue(e[7]),8:this.constraintSetToValue(e[8]),9:this.constraintSetToValue(e[9]),10:this.constraintSetToValue(e[10]),11:this.constraintSetToValue(e[11])};if(void 0!==r[1]&&void 0!==r[2]&&void 0!==r[3]&&void 0!==r[4]&&void 0!==r[5]&&void 0!==r[6]&&void 0!==r[7]&&void 0!==r[8]&&void 0!==r[9]&&void 0!==r[10]&&void 0!==r[11])return{1:r[1],2:r[2],3:r[3],4:r[4],5:r[5],6:r[6],7:r[7],8:r[8],9:r[9],10:r[10],11:r[11]}},t.prototype.constraintSetToValue=function(t){if(!t.has(!0)||!t.has(!1))return!!t.has(!0)},t.prototype.symbolToConstraints=function(t){var e=[],n=t.quality,r=t.seventh,i=t.ninth,s=t.eleventh,a=t.thirteenth,c=t.addeds,u=t.suspendeds,f=t.alteredFifth,l=void 0!==r||void 0!==i||void 0!==s||void 0!==a,p=l?this.qualityExtendedConstraints:this.qualityBasicConstraints;return e.push(this.getConstraint(n,p)),e.push(this.getConstraint(r,this.seventhConstraints)),e.push(this.getConstraint(i,this.ninthConstraints)),e.push(this.getConstraint(s,this.eleventhConstraints)),e.push(this.getConstraint(a,this.thirteenthConstraints)),e.push.apply(e,this.getConstraintsForSet(c,this.addedConstraints)),e.push.apply(e,this.getConstraintsForSet(u,this.suspendedConstraints)),e.push(this.getConstraint(f,this.alteredFifthConstraints)),void 0===n&&l&&e.push({10:!0}),void 0!==i||void 0===s&&void 0===a||e.push({2:!0}),void 0===s&&void 0!==a&&e.push({5:!0}),void 0!==f||void 0!==n&&-1!==[o.Qualities.Augmented,o.Qualities.AugmentedMajor,o.Qualities.Diminished,o.Qualities.HalfDiminished].indexOf(n)||e.push({7:!0}),(void 0===n||n===o.Qualities.Major&&l)&&0===u.size&&e.push({4:!0}),e},t.prototype.getConstraintsForSet=function(t,e){var n=this,r=[];return t.forEach(function(t){r.push(n.getConstraint(t,e))}),r},t.prototype.getConstraint=function(t,e){if(void 0===t)return{};var n=e.get(t);if(void 0===n)throw new Error("[chords] Couldn't find symbol '"+t+"' in the constraint lookup table");return n},t}();e.ChordParser=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){function t(t){this.naming=t,this.chordsRegex=this.getChordsRegex()}return t.prototype.parse=function(t){var e=this.matchChordsRegex(t),n=this.chordsRegexMatchToChord(e);if(void 0!==n)return this.isSymbolValid(n)?n:void 0},t.prototype.isSymbolValid=function(t){var e=t.quality,n=t.seventh,o=t.ninth,i=t.eleventh,s=t.thirteenth,a=t.addeds,c=t.suspendeds,u=t.alteredFifth,f=void 0===u||new Set([void 0,r.Qualities.Major,r.Qualities.Minor,r.Qualities.MinorMajor,r.Qualities.Power]).has(e),l=e!==r.Qualities.Power||void 0===n&&void 0===o&&void 0===i&&void 0===s&&0===a.size&&0===c.size&&void 0===u;return f&&l},t.prototype.chordsRegexMatchToChord=function(t){var e=this;if(void 0!==t){var n=t.rootNoteString,r=t.qualityString,o=t.seventhString,i=t.ninthString,s=t.eleventhString,a=t.thirteenthString,c=t.addedStrings,u=t.suspendedStrings,f=t.alteredFifthString,l=t.bassNoteString,p=void 0===n?void 0:this.naming.lookups.notes.get(n);if(void 0===p)throw new Error("[chords] Error when parsing chord: couldn't find root note "+n);return{rootNote:p,quality:void 0===r?void 0:this.naming.lookups.qualities.get(r),seventh:void 0===o?void 0:this.naming.lookups.sevenths.get(o),ninth:void 0===i?void 0:this.naming.lookups.ninths.get(i),eleventh:void 0===s?void 0:this.naming.lookups.elevenths.get(s),thirteenth:void 0===a?void 0:this.naming.lookups.thirteenths.get(a),addeds:new Set(c.map(function(t){return void 0===t?void 0:e.naming.lookups.addeds.get(t)}).filter(function(t){return void 0!==t})),suspendeds:new Set(u.map(function(t){return void 0===t?void 0:e.naming.lookups.suspendeds.get(t)}).filter(function(t){return void 0!==t})),alteredFifth:void 0===f?void 0:this.naming.lookups.alteredFifths.get(f),bassNote:void 0===l?void 0:this.naming.lookups.notes.get(l)}}},t.prototype.matchChordsRegex=function(t){var e=t.match(new RegExp(this.chordsRegex));return null===e?void 0:{rootNoteString:e[1],qualityString:e[2],seventhString:e[3],ninthString:e[4],eleventhString:e[5],thirteenthString:e[6],addedStrings:[e[7],e[8],e[9]],suspendedStrings:[e[10],e[11]],alteredFifthString:e[12],bassNoteString:e[13]}},t.prototype.getChordsRegex=function(){return this.getRegexEntireStringMatch(this.getChordsContentRegex())},t.prototype.getChordsContentRegex=function(){return""+this.getRootNotesRegex()+this.getQualitiesRegex()+this.getSeventhsRegex()+this.getNinthsRegex()+this.getEleventhsRegex()+this.getThirteenthsRegex()+this.getAddedsRegex()+this.getSuspendedsRegex()+this.getAlteredFifthsRegex()+this.getBassNotesRegex()},t.prototype.getRootNotesRegex=function(){return this.getRegexFromArrayMap(this.naming.names.notes,{isMatching:!0,isOptional:!1,isShortestFirst:!1,isMultiple:!1})},t.prototype.getQualitiesRegex=function(){return this.getRegexFromArrayMap(this.naming.names.qualities,{isMatching:!0,isOptional:!0,isShortestFirst:!0,isMultiple:!1})},t.prototype.getSeventhsRegex=function(){return this.getRegexFromArrayMap(this.naming.names.sevenths,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})},t.prototype.getNinthsRegex=function(){return this.getRegexFromArrayMap(this.naming.names.ninths,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})},t.prototype.getEleventhsRegex=function(){return this.getRegexFromArrayMap(this.naming.names.elevenths,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})},t.prototype.getThirteenthsRegex=function(){return this.getRegexFromArrayMap(this.naming.names.thirteenths,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})},t.prototype.getAddedsRegex=function(){return this.getRegexFromOrderedEnumValues(r.addedOrder,this.naming.names.addeds)},t.prototype.getSuspendedsRegex=function(){return this.getRegexFromOrderedEnumValues(r.suspendedOrder,this.naming.names.suspendeds)},t.prototype.getAlteredFifthsRegex=function(){return this.getRegexFromArrayMap(this.naming.names.alteredFifths,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})},t.prototype.getBassNotesRegex=function(){return this.getRegexGroup("/"+this.getRegexFromArrayMap(this.naming.names.notes,{isMatching:!0,isOptional:!1,isShortestFirst:!1,isMultiple:!1}),!1,!0,!1)},t.prototype.getRegexFromOrderedEnumValues=function(t,e){var n=this;return t.map(function(t){return e.get(t)}).filter(function(t){return void 0!==t}).map(function(t){return n.getRegexFromStringList(t,{isMatching:!0,isOptional:!0,isShortestFirst:!1,isMultiple:!1})}).join("")},t.prototype.getRegexFromArrayMap=function(t,e){var n=this.getValuesFromArrayMap(t);return this.getRegexFromStringList(n,e)},t.prototype.getRegexFromStringList=function(t,e){var n=e.isShortestFirst,r=e.isMatching,o=e.isOptional,i=e.isMultiple,s=this.sortValuesByLength(t,n).map(this.escapeRegex);return this.getRegexDisjunction(s,r,o,i)},t.prototype.getRegexDisjunction=function(t,e,n,r){return this.getRegexGroup(t.join("|"),e,n,r)},t.prototype.getRegexGroup=function(t,e,n,r){return"("+(e?"":"?:")+t+")"+(n&&r?"*":n&&!r?"?":!n&&r?"+":"")},t.prototype.getRegexEntireStringMatch=function(t){return"^"+t+"$"},t.prototype.sortValuesByLength=function(t,e){var n=e?1:-1;return t.sort(function(t,e){var r=t.length-e.length;return 0!==r?(r<0?-1:1)*n:(t>e?-1:1)*n})},t.prototype.getValuesFromArrayMap=function(t){var e=[];return t.forEach(function(t){return e.push.apply(e,t)}),e},t.prototype.escapeRegex=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t}();e.ChordSymbolParser=o},function(t,e,n){"use strict";var r=n(74)(!0);n(0)({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(121)("includes")},function(t,e,n){var r=n(7),o=n(9),i=n(4),s=n(70);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=s(e),a=r.length,c=0;a>c;)o.f(t,n=r[c++],e[n]);return t}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){"use strict";var r=n(1),o=n(76),i=n(8),s=n(24),a=n(122),c=n(36),u=n(2),f=n(55).f,l=n(53).f,p=n(9).f,h=n(80),d=r.Number,v=d.prototype,m="Number"==s(n(19)(v)),g="trim"in String.prototype,y=function(t){var e,n,r,o,i,s,a,u,f=c(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=g?f.trim():h(f,3)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+f}for(s=(i=f.slice(2)).length,a=0;a<s;a++)if((u=i.charCodeAt(a))<48||u>o)return NaN;return parseInt(i,r)}return+f};if(o("Number",!d(" 0o1")||!d("0b1")||d("+0x1"))){for(var b,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(m?u(function(){v.valueOf.call(n)}):"Number"!=s(n))?a(new d(y(e)),n,x):y(e)},w=n(7)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,b=w[S])&&!i(x,b)&&p(x,b,l(d,b));x.prototype=v,v.constructor=x,n(13)(r,"Number",x)}},function(t,e,n){var r=n(6),o=n(4);t.exports=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}},function(t,e,n){var r=n(206);n(0)({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},function(t,e,n){var r=n(1).parseInt,o=n(80),i=n(81),s=/^[-+]?0[xX]/,a=8!==r(i+"08")||22!==r(i+"0x16");t.exports=a?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},function(t,e,n){"use strict";var r=n(4),o=n(17),i=n(15),s=n(77),a=n(78);n(79)("match",1,function(t,e,n){return[function(e){var n=i(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var c=r(t),u=String(this);if(!c.global)return a(c,u);var f=c.unicode;c.lastIndex=0;for(var l,p=[],h=0;null!==(l=a(c,u));){var d=String(l[0]);p[h]=d,""===d&&(c.lastIndex=s(u,o(c.lastIndex),f)),h++}return 0===h?null:p}]})},function(t,e,n){var r=n(84),o=n(127),i=n(240),s=n(243),a=n(61),c=n(10),u=n(89),f=n(136),l=1,p="[object Arguments]",h="[object Array]",d="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,g,y){var b=c(t),x=c(e),w=b?h:a(t),S=x?h:a(e),O=(w=w==p?d:w)==d,M=(S=S==p?d:S)==d,k=w==S;if(k&&u(t)){if(!u(e))return!1;b=!0,O=!1}if(k&&!O)return y||(y=new r),b||f(t)?o(t,e,n,m,g,y):i(t,e,w,n,m,g,y);if(!(n&l)){var C=O&&v.call(t,"__wrapped__"),A=M&&v.call(e,"__wrapped__");if(C||A){var T=C?t.value():t,E=A?e.value():e;return y||(y=new r),g(T,E,n,m,y)}}return!!k&&(y||(y=new r),s(t,e,n,m,g,y))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(58),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(58);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(57),o=n(86),i=n(87),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(125),o=n(220),i=n(21),s=n(126),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,f=c.toString,l=u.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?p:a).test(s(t))}},function(t,e,n){var r,o=n(221),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(12)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(224),o=n(57),i=n(86);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(225),o=n(226),i=n(227),s=n(228),a=n(229);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(59);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(59),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(59),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(59),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){var r=n(60);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(60);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(60);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(60);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(87),o=n(236),i=n(237);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,t.exports=s},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(40),o=n(128),i=n(85),s=n(127),a=n(241),c=n(242),u=1,f=2,l="[object Boolean]",p="[object Date]",h="[object Error]",d="[object Map]",v="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",S=r?r.prototype:void 0,O=S?S.valueOf:void 0;t.exports=function(t,e,n,r,S,M,k){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!M(new o(t),new o(e)));case l:case p:case v:return i(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case d:var C=a;case g:var A=r&u;if(C||(C=c),t.size!=e.size&&!A)return!1;var T=k.get(t);if(T)return T==e;r|=f,k.set(t,e);var E=s(C(t),C(e),r,S,M,k);return k.delete(t),E;case b:if(O)return O.call(t)==O.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(129),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,a,c){var u=n&o,f=r(t),l=f.length;if(l!=r(e).length&&!u)return!1;for(var p=l;p--;){var h=f[p];if(!(u?h in e:i.call(e,h)))return!1}var d=c.get(t);if(d&&c.get(e))return d==e;var v=!0;c.set(t,e),c.set(e,t);for(var m=u;++p<l;){var g=t[h=f[p]],y=e[h];if(s)var b=u?s(y,g,h,e,t,c):s(g,y,h,t,e,c);if(!(void 0===b?g===y||a(g,y,n,s,c):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(v=!1)}return c.delete(t),c.delete(e),v}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(25),o=n(16),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(25),o=n(91),i=n(16),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[r(t)]}},function(t,e,n){var r=n(94),o=n(250),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(137)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(20)(n(12),"DataView");t.exports=r},function(t,e,n){var r=n(20)(n(12),"Promise");t.exports=r},function(t,e,n){var r=n(20)(n(12),"Set");t.exports=r},function(t,e,n){var r=n(20)(n(12),"WeakMap");t.exports=r},function(t,e,n){var r=n(84),o=n(256),i=n(139),s=n(258),a=n(259),c=n(262),u=n(263),f=n(264),l=n(265),p=n(129),h=n(266),d=n(61),v=n(267),m=n(268),g=n(273),y=n(10),b=n(89),x=n(275),w=n(21),S=n(277),O=n(42),M=1,k=2,C=4,A="[object Arguments]",T="[object Function]",E="[object GeneratorFunction]",N="[object Object]",_={};_[A]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_[N]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[T]=_["[object WeakMap]"]=!1,t.exports=function t(e,n,D,j,R,P){var F,I=n&M,z=n&k,B=n&C;if(D&&(F=R?D(e,j,R,P):D(e)),void 0!==F)return F;if(!w(e))return e;var L=y(e);if(L){if(F=v(e),!I)return u(e,F)}else{var V=d(e),$=V==T||V==E;if(b(e))return c(e,I);if(V==N||V==A||$&&!R){if(F=z||$?{}:g(e),!I)return z?l(e,a(F,e)):f(e,s(F,e))}else{if(!_[V])return R?e:{};F=m(e,V,I)}}P||(P=new r);var q=P.get(e);if(q)return q;if(P.set(e,F),S(e))return e.forEach(function(r){F.add(t(r,n,D,r,e,P))}),F;if(x(e))return e.forEach(function(r,o){F.set(o,t(r,n,D,o,e,P))}),F;var H=B?z?h:p:z?keysIn:O,J=L?void 0:H(e);return o(J||e,function(r,o){J&&(r=e[o=r]),i(F,o,t(r,n,D,o,e,P))}),F}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(20),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(62),o=n(42);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(62),o=n(141);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(94),i=n(261),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(12),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(90)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(62),o=n(88);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(62),o=n(142);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(130),o=n(142),i=n(141);t.exports=function(t){return r(t,i,o)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(95),o=n(269),i=n(270),s=n(271),a=n(272),c="[object Boolean]",u="[object Date]",f="[object Map]",l="[object Number]",p="[object RegExp]",h="[object Set]",d="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",k="[object Uint16Array]",C="[object Uint32Array]";t.exports=function(t,e,n){var A=t.constructor;switch(e){case m:return r(t);case c:case u:return new A(+t);case g:return o(t,n);case y:case b:case x:case w:case S:case O:case M:case k:case C:return a(t,n);case f:return new A;case l:case d:return new A(t);case p:return i(t);case h:return new A;case v:return s(t)}}},function(t,e,n){var r=n(95);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(40),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(95);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(274),o=n(143),i=n(94);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(276),o=n(92),i=n(93),s=i&&i.isMap,a=s?o(s):r;t.exports=a},function(t,e,n){var r=n(61),o=n(16),i="[object Map]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(278),o=n(92),i=n(93),s=i&&i.isSet,a=s?o(s):r;t.exports=a},function(t,e,n){var r=n(61),o=n(16),i="[object Set]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(70),o=n(69),i=n(68);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var s,a=n(t),c=i.f,u=0;a.length>u;)c.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,n){var r=n(18),o=n(55).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(r(t))}},function(t,e,n){"use strict";var r=n(150).IteratorPrototype,o=n(19),i=n(47),s=n(63),a=n(43),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),s(t,u,!1,!0),a[u]=c,t}},function(t,e,n){"use strict";var r=n(1),o=n(76),i=n(0),s=n(13),a=n(156),c=n(157),u=n(159),f=n(6),l=n(2),p=n(287),h=n(63),d=n(122);t.exports=function(t,e,n,v,m){var g=r[t],y=g&&g.prototype,b=g,x=v?"set":"add",w={},S=function(t){var e=y[t];s(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!f(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!f(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof g||!(m||y.forEach&&!l(function(){(new g).entries().next()}))))b=n.getConstructor(e,t,v,x),a.REQUIRED=!0;else if(o(t,!0)){var O=new b,M=O[x](m?{}:-0,1)!=O,k=l(function(){O.has(1)}),C=p(function(t){new g(t)}),A=!m&&l(function(){for(var t=new g,e=5;e--;)t[x](e,e);return!t.has(-0)});C||((b=e(function(e,n){u(e,b,t);var r=d(new g,e,b);return null!=n&&c(n,r[x],r,v),r})).prototype=y,y.constructor=b),(k||A)&&(S("delete"),S("has"),v&&S("get")),(A||M)&&S(x),m&&y.clear&&delete y.clear}return w[t]=b,i({global:!0,forced:b!=g},w),h(b,t),m||n.setStrong(b,t,v),b}},function(t,e,n){t.exports=!n(2)(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,e,n){var r=n(43),o=n(3)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(158),o=n(3)("iterator"),i=n(43);t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(4);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(3)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(9).f,o=n(19),i=n(289),s=n(72),a=n(159),c=n(157),u=n(98),f=n(290),l=n(7),p=n(156).fastKey,h=n(37),d=h.set,v=h.getterFor;t.exports={getConstructor:function(t,e,n,u){var f=t(function(t,r){a(t,f,e),d(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),l||(t.size=0),null!=r&&c(r,t[u],t,n)}),h=v(e),m=function(t,e,n){var r,o,i=h(t),s=g(t,e);return s?s.value=n:(i.last=s={index:o=p(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),l?i.size++:t.size++,"F"!==o&&(i.index[o]=s)),t},g=function(t,e){var n,r=h(t),o=p(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(f.prototype,{clear:function(){for(var t=h(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,l?t.size=0:this.size=0},delete:function(t){var e=h(this),n=g(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),l?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=h(this),r=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),i(f.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),l&&r(f.prototype,"size",{get:function(){return h(this).size}}),f},setStrong:function(t,e,n){var r=e+" Iterator",o=v(e),i=v(r);u(t,e,function(t,e){d(this,{type:r,target:t,state:o(t),kind:e,last:void 0})},function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){"use strict";var r=n(291),o=n(9),i=n(7),s=n(3)("species");t.exports=function(t){var e=r(t),n=o.f;i&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(147),o=n(1),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){"use strict";var r=n(158),o={};o[n(3)("toStringTag")]="z",t.exports="[object z]"!==String(o)?function(){return"[object "+r(this)+"]"}:o.toString},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(295),o=n(298),i=n(170),s=n(10),a=n(309);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?s(t)?o(t[0],t[1]):r(t):a(t)}},function(t,e,n){var r=n(296),o=n(297),i=n(167);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(84),o=n(83),i=1,s=2;t.exports=function(t,e,n,a){var c=n.length,u=c,f=!a;if(null==t)return!u;for(t=Object(t);c--;){var l=n[c];if(f&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++c<u;){var p=(l=n[c])[0],h=t[p],d=l[1];if(f&&l[2]){if(void 0===h&&!(p in t))return!1}else{var v=new r;if(a)var m=a(h,d,p,t,e,v);if(!(void 0===m?o(d,h,i|s,a,v):m))return!1}}return!0}},function(t,e,n){var r=n(166),o=n(42);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],s=t[i];e[n]=[i,s,r(s)]}return e}},function(t,e,n){var r=n(83),o=n(299),i=n(306),s=n(103),a=n(166),c=n(167),u=n(65),f=1,l=2;t.exports=function(t,e){return s(t)&&a(e)?c(u(t),e):function(n){var s=o(n,t);return void 0===s&&s===e?i(n,t):r(e,s,f|l)}}},function(t,e,n){var r=n(168);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(301),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=s},function(t,e,n){var r=n(302),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(87),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(304);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(40),o=n(305),i=n(10),s=n(64),a=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(307),o=n(308);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(169),o=n(134),i=n(10),s=n(135),a=n(91),c=n(65);t.exports=function(t,e,n){for(var u=-1,f=(e=r(e,t)).length,l=!1;++u<f;){var p=c(e[u]);if(!(l=null!=t&&n(t,p)))break;t=t[p]}return l||++u!=f?l:!!(f=null==t?0:t.length)&&a(f)&&s(p,f)&&(i(t)||o(t))}},function(t,e,n){var r=n(310),o=n(311),i=n(103),s=n(65);t.exports=function(t){return i(t)?r(s(t)):o(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(168);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(313);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(314),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(21),o=n(64),i=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||u.test(t)?f(t.slice(2),n?2:8):a.test(t)?i:+t}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(317);t.exports=function(t,e){return function(n,o){return r(n,t,e(o),{})}}},function(t,e,n){var r=n(318);t.exports=function(t,e,n,o){return r(t,function(t,r,i){e(o,n(t),r,i)}),o}},function(t,e,n){var r=n(319),o=n(42);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(320)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++o];if(!1===n(i[c],c,i))break}return e}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.__esModule=!0;var i=o(n(172)),s=r(n(333)),a=r(n(44)),c=o(n(14)),u=o(n(334)),f=r(n(335));function l(){var t=new i.HandlebarsEnvironment;return c.extend(t,i),t.SafeString=s.default,t.Exception=a.default,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=u,t.template=function(e){return u.template(e,t)},t}var p=l();p.create=l,f.default(p),p.default=p,e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.registerDefaultHelpers=function(t){o.default(t),i.default(t),s.default(t),a.default(t),c.default(t),u.default(t),f.default(t)};var o=r(n(323)),i=r(n(324)),s=r(n(325)),a=r(n(326)),c=r(n(327)),u=r(n(328)),f=r(n(329))},function(t,e,n){"use strict";e.__esModule=!0;var r=n(14);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var o=n.inverse,i=n.fn;if(!0===e)return i(this);if(!1===e||null==e)return o(this);if(r.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):o(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return i(e,n)})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r,o=n(14),i=n(44),s=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("each",function(t,e){if(!e)throw new s.default("Must pass iterator to #each");var n=e.fn,r=e.inverse,i=0,a="",c=void 0,u=void 0;function f(e,r,i){c&&(c.key=e,c.index=r,c.first=0===r,c.last=!!i,u&&(c.contextPath=u+e)),a+=n(t[e],{data:c,blockParams:o.blockParams([t[e],e],[u+e,null])})}if(e.data&&e.ids&&(u=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(c=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var l=t.length;i<l;i++)i in t&&f(i,i,i===t.length-1);else{var p=void 0;for(var h in t)t.hasOwnProperty(h)&&(void 0!==p&&f(p,i-1),p=h,i++);void 0!==p&&f(p,i-1,!0)}return 0===i&&(a=r(this)),a})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r,o=n(44),i=(r=o)&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(14);e.default=function(t){t.registerHelper("if",function(t,e){return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),e[0]=o,t.log.apply(t,e)})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(14);e.default=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);var o=e.data;return e.data&&e.ids&&((o=r.createFrame(e.data)).contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:o,blockParams:r.blockParams([t],[o&&o.contextPath])})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var r,o=n(331),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(14);e.default=function(t){t.registerDecorator("inline",function(t,e,n,o){var i=t;return e.partials||(e.partials={},i=function(o,i){var s=n.partials;n.partials=r.extend({},s,e.partials);var a=t(o,i);return n.partials=s,a}),e.partials[o.args[0]]=o.fn,i})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(14),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console[e].apply(console,r)}}};e.default=o,t.exports=e.default},function(t,e,n){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,n=a.COMPILER_REVISION;if(e!==n){if(e<n){var r=a.REVISION_CHANGES[n],o=a.REVISION_CHANGES[e];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){if(!e)throw new s.default("No environment passed to template");if(!t||!t.main)throw new s.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n={strict:function(t,e){if(!(e in t))throw new s.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:o.escapeExpression,invokePartial:function(n,r,i){i.hash&&(r=o.extend({},r,i.hash),i.ids&&(i.ids[0]=!0));n=e.VM.resolvePartial.call(this,n,r,i);var a=e.VM.invokePartial.call(this,n,r,i);null==a&&e.compile&&(i.partials[i.name]=e.compile(n,t.compilerOptions,e),a=i.partials[i.name](r,i));if(null!=a){if(i.indent){for(var c=a.split("\n"),u=0,f=c.length;u<f&&(c[u]||u+1!==f);u++)c[u]=i.indent+c[u];a=c.join("\n")}return a}throw new s.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,r,o){var i=this.programs[t],s=this.fn(t);return e||o||r||n?i=c(this,t,s,e,n,r,o):i||(i=this.programs[t]=c(this,t,s)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=o.extend({},e,t)),n},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};function r(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=o.data;r._setup(o),!o.partial&&t.useData&&(i=function(t,e){e&&"root"in e||((e=e?a.createFrame(e):{}).root=t);return e}(e,i));var s=void 0,c=t.useBlockParams?[]:void 0;function u(e){return""+t.main(n,e,n.helpers,n.partials,i,c,s)}return t.useDepths&&(s=o.depths?e!=o.depths[0]?[e].concat(o.depths):o.depths:[e]),(u=f(t.main,u,n,o.depths||[],i,c))(e,o)}return r.isTop=!0,r._setup=function(r){r.partial?(n.helpers=r.helpers,n.partials=r.partials,n.decorators=r.decorators):(n.helpers=n.merge(r.helpers,e.helpers),t.usePartial&&(n.partials=n.merge(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(n.decorators=n.merge(r.decorators,e.decorators)))},r._child=function(e,r,o,i){if(t.useBlockParams&&!o)throw new s.default("must pass block params");if(t.useDepths&&!i)throw new s.default("must pass parent depths");return c(n,e,t[e],r,0,o,i)},r},e.wrapProgram=c,e.resolvePartial=function(t,e,n){t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return t},e.invokePartial=function(t,e,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;n.fn&&n.fn!==u&&function(){n.data=a.createFrame(n.data);var t=n.fn;i=n.data["partial-block"]=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=r,t(e,n)},t.partials&&(n.partials=o.extend({},n.partials,t.partials))}();void 0===t&&i&&(t=i);if(void 0===t)throw new s.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)},e.noop=u;var r,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(14)),i=n(44),s=(r=i)&&r.__esModule?r:{default:r},a=n(172);function c(t,e,n,r,o,i,s){function a(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(a=[e].concat(s)),n(t,e,t.helpers,t.partials,o.data||r,i&&[o.blockParams].concat(i),a)}return(a=f(n,a,t,s,r,i)).program=e,a.depth=s?s.length:0,a.blockParams=o||0,a}function u(){return""}function f(t,e,n,r,i,s){if(t.decorator){var a={};e=t.decorator(e,a,n,r&&r[0],i,s,r),o.extend(e,a)}return e}},function(t,e,n){"use strict";(function(n){e.__esModule=!0,e.default=function(t){var e=void 0!==n?n:window,r=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=r),t}},t.exports=e.default}).call(this,n(118))},function(t,e,n){var r=n(33),o=n(23),i=n(46),s=n(17);t.exports=function(t,e,n,a,c){r(e);var u=o(t),f=i(u),l=s(u.length),p=c?l-1:0,h=c?-1:1;if(n<2)for(;;){if(p in f){a=f[p],p+=h;break}if(p+=h,c?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;c?p>=0:l>p;p+=h)p in f&&(a=e(a,f[p],p,u));return a}},function(t,e,n){n(0)({target:"String",proto:!0},{repeat:n(338)})},function(t,e,n){"use strict";var r=n(34),o=n(15);t.exports="".repeat||function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(350))&&"object"==typeof r&&"default"in r?r.default:r,i=n(71),s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function a(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var c=0;c<i.length-1;c++){var u=i[c];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);s?o=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function c(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function u(t){var e=function(t){var e=Object.create(null);for(var n in t)e[a(n)]=t[n];return e}(t);return function(t,n){var r,i=o(n),s=1==i.length&&" "!=i,a=e[c(i,n,!s)];if(a&&a(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(r=o.base[n.keyCode])&&r!=i){var u=e[c(r,n,!0)];if(u&&u(t.state,t.dispatch,t))return!0}return!1}}e.keymap=function(t){return new i.Plugin({props:{handleKeyDown:u(t)}})},e.keydownHandler=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},o={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}},i=new(n(66).Schema)({nodes:r,marks:o});e.nodes=r,e.marks=o,e.schema=i},function(t,e,n){var r=n(346);n(0)({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=n(71),i=n(185),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var f=s.ie=!!(c||u||a);s.ie_version=c?document.documentMode||6:u?+u[1]:a?+a[1]:null,s.gecko=!f&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var l=!f&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!l,s.chrome_version=l&&+l[1],s.ios=!f&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit=!f&&"WebkitAppearance"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},d=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},v=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},m=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:y(t))||3==t.nodeType&&"\ufeff"==t.nodeValue){var i=t.parentNode;if(1!=i.nodeType||(s=void 0,(s=t.pmViewDesc)&&s.node&&s.node.isBlock)||m.test(t.nodeName)||"false"==t.contentEditable)return!1;e=p(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;t=t.childNodes[e+(o<0?-1:0)],e=o<0?y(t):0}}var s}function y(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}var b=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function w(t,e){return"number"==typeof t?t:t[e]}function S(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=i.defaultView,a=n||t.dom;a;a=h(a))if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,u=c?x(s):a.getBoundingClientRect(),f=0,l=0;if(e.top<u.top+w(r,"top")?l=-(u.top-e.top+w(o,"top")):e.bottom>u.bottom-w(r,"bottom")&&(l=e.bottom-u.bottom+w(o,"bottom")),e.left<u.left+w(r,"left")?f=-(u.left-e.left+w(o,"left")):e.right>u.right-w(r,"right")&&(f=e.right-u.right+w(o,"right")),(f||l)&&(c?s.scrollBy(f,l):(l&&(a.scrollTop+=l),f&&(a.scrollLeft+=f))),c)break}}function O(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,u=0;c;c=c.nextSibling,u++){var f=void 0;if(1==c.nodeType)f=c.getClientRects();else{if(3!=c.nodeType)continue;f=d(c).getClientRects()}for(var l=0;l<f.length;l++){var p=f[l];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==c.nodeType&&h&&(i=u+(e.left>=(p.left+p.right)/2?1:0));continue}}!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=u+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=C(r,1);if(i.top!=i.bottom&&M(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:O(n,r)}function M(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function k(t,e){var n,r,o=t.root;if(o.caretPositionFromPoint){var i,s=o.caretPositionFromPoint(e.left,e.top);if(s)n=(i=s).offsetNode,r=i.offset}if(!n&&o.caretRangeFromPoint){var a,c=o.caretRangeFromPoint(e.left,e.top);if(c)n=(a=c).startContainer,r=a.startOffset}var u,f=o.elementFromPoint(e.left,e.top+1);if(!f||!t.dom.contains(1!=f.nodeType?f.parentNode:f)){var l=t.dom.getBoundingClientRect();if(!M(e,l))return null;if(!(f=function t(e,n,r){var o=e.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2),s=i;;){var a=e.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),u=0;u<c.length;u++){var f=c[u];if(M(n,f))return t(a,n,f)}if((s=(s+1)%o)==i)break}return e}(t.dom,e,l)))return null}f=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(f,e),n&&(n==t.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(u=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,n,r,e))),null==u&&(u=function(t,e,n){var r=O(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,f,e));var p=t.docView.nearestDesc(f,!0);return{pos:u,inside:p?p.posAtStart-p.border:-1}}function C(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function A(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(s.chrome||s.gecko)){var i=C(d(r,o,o),0);if(s.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var a=C(d(r,o-1,o-1),-1);if(Math.abs(a.left-i.left)<1&&a.top==i.top){var c=C(d(r,o,o+1),-1);return T(c,c.left<a.left)}}return i}for(var u=-1;u<2;u+=2)if(u<0&&o){var f=void 0,l=3==r.nodeType?d(r,o-1,o):3==(f=r.childNodes[o-1]).nodeType?d(f):1==f.nodeType&&"BR"!=f.nodeName?f:null;if(l){var p=C(l,1);if(p.top<p.bottom)return T(p,!1)}}else if(u>0&&o<y(r)){var h=void 0,v=3==r.nodeType?d(r,o,o+1):3==(h=r.childNodes[o]).nodeType?d(h):1==h.nodeType?h:null;if(v){var m=C(v,-1);if(m.top<m.bottom)return T(m,!0)}}return T(C(3==r.nodeType?d(r):r,0),!1)}function T(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function E(t,e,n){var r=t.state,o=t.root.activeElement;r==e&&t.inDOMChange||t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o.focus()}}var N=/[\u0590-\u08ac]/;var _=null,D=null,j=!1;function R(t,e,n){return _==e&&D==n?j:(_=e,D=n,j="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return E(t,e,function(){for(var e=t.docView.domFromPos(o.pos).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=A(t,o.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=d(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var u=a[c];if(u.bottom>u.top&&("up"==n?u.bottom<i.top+1:u.top>i.bottom-1))return!1}}return!0})}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return N.test(r.parent.textContent)&&a.modify?E(t,e,function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset;a.modify("move",n,"character");var s=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),s}):"left"==n||"backward"==n?i:s}(t,e,n))}var P=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},F={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};P.prototype.matchesWidget=function(){return!1},P.prototype.matchesMark=function(){return!1},P.prototype.matchesNode=function(){return!1},P.prototype.matchesHack=function(){return!1},F.beforePosition.get=function(){return!1},P.prototype.parseRule=function(){return null},P.prototype.stopEvent=function(){return!1},F.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},F.border.get=function(){return 0},P.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},P.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},F.posBefore.get=function(){return this.parent.posBeforeChild(this)},F.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},F.posAfter.get=function(){return this.posBefore+this.size},F.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},P.prototype.localPosFromDOM=function(t,e,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var o,i;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){r=!1;break}if(c.parentNode.firstChild!=c)break}if(null==r&&e==t.childNodes.length)for(var u=t;;u=u.parentNode){if(u==this.dom){r=!0;break}if(u.parentNode.lastChild!=u)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart},P.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(t):o.nodeDOM==t))return o;n=!1}}},P.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},P.prototype.posFromDOM=function(t,e,n){for(var r=t;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}},P.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},P.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},P.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var u=i+a.border;if(t>=u&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t-u,e-u,n+u);t=n+i;for(var f=s;f>0;f--){var l=this.children[f-1];if(l.size&&l.dom.parentNode==this.contentDOM&&!l.emptyChildAt(1)){r=p(l.dom)+1;break}t-=l.size}-1==r&&(r=0)}if(r>-1&&e<=c){e=n+c;for(var h=s+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=p(d.dom);break}e+=d.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},P.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},P.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},P.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=this.children[s],u=a+c.size;if(o>a&&i<u)return c.setSelection(t-a-c.border,e-a-c.border,n,r);a=u}var f=this.domFromPos(t),l=this.domFromPos(e),p=n.getSelection(),h=document.createRange();if(r||!v(f.node,f.offset,p.anchorNode,p.anchorOffset)||!v(l.node,l.offset,p.focusNode,p.focusOffset)){if(p.extend)h.setEnd(f.node,f.offset),h.collapse(!1);else{if(t>e){var d=f;f=l,l=d}h.setEnd(l.node,l.offset),h.setStart(f.node,f.offset)}p.removeAllRanges(),p.addRange(h),p.extend&&p.extend(l.node,l.offset)}},P.prototype.ignoreMutation=function(t){return!this.contentDOM},F.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},P.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t==s&&e==a&&o.contentLost?o.dirty=3:o.markDirty(t-s,e-s));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(P.prototype,F);var I=[],z=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o})),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,I,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},Object.defineProperties(e.prototype,n),e}(P),B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){for(var e,n=this.dom.firstChild;n;n=n.nextSibling){var r=void 0;if(3==n.nodeType){var o=n.nodeValue.replace(/\ufeff/g,"");if(!o)continue;r=document.createTextNode(o)}else{if("\ufeff"==n.textContent)continue;r=n.cloneNode(!0)}e||(e=document.createDocumentFragment()),e.appendChild(r)}return e?{skip:e}:t.prototype.parseRule.call(this)},e.prototype.ignoreMutation=function(){return!1},e}(z),L=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,o,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,o);return a&&a.dom||(a=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,o))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e}(P),V=function(t){function e(e,n,r,o,i,s,a,c,u){t.call(this,e,n.isLeaf?I:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,u)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{},border:{}};return e.create=function(t,n,o,i,s,a){var c,u=s.nodeViews[n.type.name],f=u&&u(n,s,function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a},o),l=f&&f.dom,p=f&&f.contentDOM;if(n.isText)if(l){if(3!=l.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else l=document.createTextNode(n.text);else if(!l){var h;l=(h=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,p=h.contentDOM}p||n.isText||"BR"==l.nodeName||(l.hasAttribute("contenteditable")||(l.contentEditable=!1),n.type.spec.draggable&&(l.draggable=!0));var d=l;return l=Y(l,o,n),f?c=new J(t,n,o,i,l,p,d,f,s,a+1):n.isText?new q(t,n,o,i,l,d,s):new e(t,n,o,i,l,p,d,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?r.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&X(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,o=new tt(this),i=this.node.inlineContent;!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,u=[],f=null,l=0;;){if(c<o.length&&o[c].to==i){for(var p=o[c++],h=void 0;c<o.length&&o[c].to==i;)(h||(h=[p])).push(o[c++]);if(h){h.sort(et);for(var d=0;d<h.length;d++)n(h[d],l)}else n(p,l)}var v=void 0;if(f)v=f,f=null;else{if(!(l<t.childCount))break;v=t.child(l++)}for(var m=0;m<u.length;m++)u[m].to<=i&&u.splice(m--,1);for(;c<o.length&&o[c].from==i;)u.push(o[c++]);var g=i+v.nodeSize;if(v.isText){var y=g;c<o.length&&o[c].from<y&&(y=o[c].from);for(var b=0;b<u.length;b++)u[b].to<y&&(y=u[b].to);y<g&&(f=v.cut(y-i),v=v.cut(0,y-i),g=y)}r(v,u.length?u.slice():I,e.forChild(i,v),l-1),i=g}}(this.node,this.innerDeco,function(s,a){s.spec.marks?o.syncToMarks(s.spec.marks,i,t):s.type.side>=0&&o.syncToMarks(a==n.node.childCount?r.Mark.none:n.node.child(a).marks,i,t),o.placeWidget(s,t,e)},function(n,r,s,a){o.syncToMarks(n.marks,i,t),o.findNodeMatch(n,r,s,a)||o.updateNextNode(n,r,s,t,a)||o.addNode(n,r,s,t,e),e+=n.nodeSize}),o.syncToMarks(I,i,t),this.node.isTextblock&&o.addTextblockHacks(),o.destroyRest(),(o.changed||2==this.dirty)&&this.renderChildren()},e.prototype.renderChildren=function(){!function t(e,n){var r=e.firstChild;for(var o=0;o<n.length;o++){var i=n[o],s=i.dom;if(s.parentNode==e){for(;s!=r;)r=Z(r);r=r.nextSibling}else e.insertBefore(s,r);if(i instanceof L){var a=r?r.previousSibling:e.lastChild;t(i.contentDOM,i.children),r=a?a.nextSibling:e.firstChild}}for(;r;)r=Z(r)}(this.contentDOM,this.children,e.is),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom)},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!X(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=K(this.dom,this.nodeDOM,U(this.outerDeco,this.node,e),U(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(e.prototype,n),e}(P);function $(t,e,n,r,o){return Y(r,e,t),new V(null,t,e,n,r,r,r,o,0)}var q=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){var t=this.nodeDOM.parentNode;return t?{skip:t}:{ignore:!0}},e.prototype.update=function(t,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type},e}(V),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(P),J=function(t){function e(e,n,r,o,i,s,a,c,u,f){t.call(this,e,n,r,o,i,s,a,u,f),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(V);function W(t){t&&(this.nodeName=t)}W.prototype=Object.create(null);var G=[new W];function U(t,e,n){if(0==t.length)return G;for(var r=n?G[0]:new W,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new W(s.nodeName)),s){var u=s[c];null!=u&&(n&&1==o.length&&o.push(a=r=new W(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+u:"style"==c?a.style=(a.style?a.style+";":"")+u:"nodeName"!=c&&(a[c]=u))}}return o}function K(t,e,n,r){if(n==G&&r==G)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=e.parentNode)&&c.tagName.toLowerCase()==s.nodeName?o=c:((c=document.createElement(s.nodeName)).appendChild(o),o=c)}Q(o,a||G[0],s)}return o}function Q(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):I,s=n.class?n.class.split(" "):I,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var u,f=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;u=f.exec(e.style);)t.style[u[1].toLowerCase()]="";n.style&&(t.style.cssText+=n.style)}}function Y(t,e,n){return K(t,t,G,U(e,n,1!=t.nodeType))}function X(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Z(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var tt=function(t){this.top=t,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n[--r]=i}}return n}(t.node.content,t.children)};function et(t,e){return t.type.side-e.type.side}function nt(t,e){var n=t.selection,r=n.$anchor,i=n.$head,s=e>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&o.Selection.findFrom(a,e)}function rt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ot(t,e,n){var r=t.state.selection;if(r instanceof o.TextSelection){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=nt(t.state,e);return!!(i&&i instanceof o.NodeSelection)&&rt(t,i)}var s,a=r.$head,c=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(c&&o.NodeSelection.isSelectable(c)){var u=e<0?a.pos-c.nodeSize:a.pos;if(c.isAtom||(s=t.docView.descAt(u))&&!s.contentDOM)return rt(t,new o.NodeSelection(e<0?t.state.doc.resolve(a.pos-c.nodeSize):a))}return!1}if(r instanceof o.NodeSelection&&r.node.isInline)return rt(t,new o.TextSelection(e>0?r.$to:r.$from));var f=nt(t.state,e);return!!f&&rt(t,f)}function it(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function st(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function at(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<it(n)&&st(n.childNodes[r])&&(a=!0);;)if(r>0)if(1!=n.nodeType){if(3!=n.nodeType||"\ufeff"!=n.nodeValue.charAt(r-1))break;s.ie&&s.ie_version<=11&&(a=!0),o=n,i=--r}else{var c=n.childNodes[r-1];if(st(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(ut(n))break;for(var u=n.previousSibling;u&&st(u);)o=n.parentNode,i=p(u),u=u.previousSibling;if(u)r=it(n=u);else{if((n=n.parentNode)==t.dom)break;r=0}}a?ft(t,e,n,r):o&&ft(t,e,o,i)}}function ct(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=it(n);;)if(r<s){if(1!=n.nodeType)break;if(!st(n.childNodes[r]))break;o=n,i=++r}else{if(ut(n))break;for(var a=n.nextSibling;a&&st(a);)o=a.parentNode,i=p(a)+1,a=a.nextSibling;if(a)r=0,s=it(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&ft(t,e,o,i)}}function ut(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ft(t,e,n,r){if(b(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.selectionReader.storeDOMState(t.selection)}function lt(t,e,n){var r=t.state.selection;if(r instanceof o.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var a=nt(t.state,e);if(a&&a instanceof o.NodeSelection)return rt(t,a)}if(!i.parent.inlineContent){var c=o.Selection.findFrom(e<0?i:s,e);return!c||rt(t,c)}return!1}function pt(t,e){if(!(t.state.selection instanceof o.TextSelection))return!0;var n=t.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),t.dispatch(c),!0}return!1}function ht(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function dt(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?pt(t,-1)||at(t):46==n||s.mac&&68==n&&"c"==r?pt(t,1)||ct(t):13==n||27==n||(37==n?ot(t,-1,r)||at(t):39==n?ot(t,1,r)||ct(t):38==n?lt(t,-1,r)||at(t):40==n?function(t){if(s.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;ht(t,o,!0),setTimeout(function(){return ht(t,o,!1)},20)}}}(t)||lt(t,1,r)||ct(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}tt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},tt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},tt.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.top.children.splice(this.index,s-this.index)),this.top=this.top.children[this.index];else{var c=L.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},tt.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=this.preMatched[r],s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var u=s[a];if(u.matchesNode(t,e,n)&&this.preMatched.indexOf(u)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},tt.prototype.updateNextNode=function(t,e,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof V){var s=this.preMatched.indexOf(i);if(s>-1&&s!=o)return!1;var a=i.dom;if(i.update(t,e,n,r))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},tt.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,V.create(this.top,t,e,n,r,o)),this.changed=!0},tt.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var r=new(t.spec.isCursorWrapper?B:z)(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},tt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof L;)t=t.children[t.children.length-1];if(!t||!(t instanceof q)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new H(this.top,I,e,null)),this.changed=!0}};var vt=function(t,e,n){this.prev=t,this.mapping=e,this.state=n},mt=function(t){this.seen=[new vt(null,null,t)],o.EditorState.addApplyListener(this.track=this.track.bind(this))};mt.prototype.destroy=function(){o.EditorState.removeApplyListener(this.track)},mt.prototype.find=function(t){for(var e=this.seen.length-1;e>=0;e--){var n=this.seen[e];if(n.state==t)return n}},mt.prototype.track=function(t,e,n){var r=this.seen.length<200?this.find(t):null;r&&this.seen.push(new vt(r,e.docChanged?e.mapping:null,n))},mt.prototype.getMapping=function(t,e){var n=this.find(t);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var s=e||new i.Mapping,a=r.length-1;a>=0;a--)s.appendMapping(r[a]);return s};var gt=function(t){var e=this;this.view=t,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=t.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?yt:bt)(this),this.focusFunc=function(){return e.poller.start(Ct(e.view))}.bind(this),this.blurFunc=this.poller.stop,t.dom.addEventListener("focus",this.focusFunc),t.dom.addEventListener("blur",this.blurFunc),t.editable||this.poller.start(!1)};gt.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},gt.prototype.poll=function(t){this.poller.poll(t)},gt.prototype.editableChanged=function(){this.view.editable?Ct(this.view)||this.poller.stop():this.poller.start()},gt.prototype.domChanged=function(){var t=this.view.root.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastHeadNode||t.focusOffset!=this.lastHeadOffset},gt.prototype.storeDOMState=function(t){var e=this.view.root.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastHeadNode=e.focusNode,this.lastHeadOffset=e.focusOffset,this.lastSelection=t},gt.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},gt.prototype.readFromDOM=function(t){if(!this.ignoreUpdates&&this.domChanged()&&Ct(this.view)){if(this.suppressUpdates)return xt(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var e,n,r=this.view.root.getSelection(),i=this.view.state.doc,s=this.view.docView.nearestDesc(r.focusNode),a=s&&0==s.size,c=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),u=i.resolve(c);if(b(r)){for(e=u;s&&!s.node;)s=s.parent;if(s&&s.node.isAtom&&o.NodeSelection.isSelectable(s.node)&&s.parent){var f=s.posBefore;n=new o.NodeSelection(c==f?u:i.resolve(f))}}else e=i.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var l="pointer"==t||this.view.state.selection.head<u.pos&&!a?1:-1;n=kt(this.view,e,u,l)}if(this.view.state.selection.eq(n))xt(this.view);else{var p=this.view.state.tr.setSelection(n);"pointer"==t?p.setMeta("pointer",!0):"key"==t&&p.scrollIntoView(),this.view.dispatch(p)}}}};var yt=function(t){var e=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=t,this.readFunc=function(){return t.readFromDOM(e.originTime>Date.now()-50?e.curOrigin:null)}};yt.prototype.poll=function(t){this.curOrigin=t,this.originTime=Date.now()},yt.prototype.start=function(t){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,t&&this.readFunc())},yt.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var bt=function(t){this.polling=null,this.reader=t,this.pollFunc=this.doPoll.bind(this,null)};function xt(t,e,n){var r=t.state.selection;if(Ot(t,r),t.editable&&!t.hasFocus()){if(!e)return;s.gecko&&s.gecko_version<=55&&(t.selectionReader.ignoreUpdates=!0,t.dom.focus(),t.selectionReader.ignoreUpdates=!1)}else if(!t.editable&&!At(t)&&!e)return;var i=t.selectionReader;if(!i.lastSelection||!i.lastSelection.eq(r)||i.domChanged()){if(i.ignoreUpdates=!0,t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom;n.setEnd(r,r.childNodes.length),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var a,c,u=r.anchor,f=r.head;!wt||r instanceof o.TextSelection||(r.$from.parent.inlineContent||(a=St(t,r.from)),r.empty||r.$from.parent.inlineContent||(c=St(t,r.to))),t.docView.setSelection(u,f,t.root,n),wt&&(a&&(a.contentEditable="false"),c&&(c.contentEditable="false")),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):u!=f&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}i.storeDOMState(r),i.ignoreUpdates=!1}}bt.prototype.doPoll=function(t){var e=this.reader.view;e.focused||!e.editable?(this.reader.readFromDOM(t),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},bt.prototype.poll=function(t){clearTimeout(this.polling),this.polling=setTimeout(t?this.doPoll.bind(this,t):this.pollFunc,0)},bt.prototype.start=function(){null==this.polling&&this.poll()},bt.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var wt=s.safari||s.chrome&&s.chrome_version<63;function St(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return i.contentEditable="true",i;if(s)return s.contentEditable="true",s}}function Ot(t,e){if(e instanceof o.NodeSelection){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Mt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Mt(t)}function Mt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function kt(t,e,n,r){return t.someProp("createSelectionBetween",function(r){return r(t,e,n)})||o.TextSelection.between(e,n,r)}function Ct(t){return(!t.editable||t.root.activeElement==t.dom)&&At(t)}function At(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function Tt(t){return!1===t.type.spec.inclusive}function Et(t){var e=t.selection,n=e.$head,r=e.$anchor,o=e.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||t.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Tt))?i:null}var Nt=function t(e,n){var r=this;this.view=e,this.state=e.state,this.composing=n,this.compositionEndedAt=null,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout(function(){return r.finish()},t.commitTimeout),this.trackMappings=new mt(e.state),this.mapping=new i.Mapping,this.mappingTo=e.state};function _t(t,e){return function(n){var r=n.pmViewDesc;if(r)return r.parseRule();if("BR"==n.nodeName&&n.parentNode){if(s.safari&&/^(ul|ol)$/i.test(n.parentNode.nodeName))return t.matchTag(document.createElement("li"),e);if(n.parentNode.lastChild==n||s.safari&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}}}function Dt(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(n)+1<t.node(n).childCount)return!1;return t.parentOffset==t.parent.content.size}function jt(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(0)>0)return!1;return 0==t.parentOffset}function Rt(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Pt(t,e,n,r){return Math.max(r.anchor,r.head)>e.content.size?null:kt(t,e.resolve(n.map(r.anchor)),e.resolve(n.map(r.head)))}function Ft(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function It(t,e){for(var n=[],o=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),o=a.content}var c=t.someProp("clipboardSerializer")||r.DOMSerializer.fromSchema(t.state.schema),u=document.createElement("div");u.appendChild(c.serializeFragment(o));for(var f,l=u.firstChild;l&&1==l.nodeType&&(f=Lt[l.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var h=document.createElement(f[p]);u.firstChild;)h.appendChild(u.firstChild);u.appendChild(h)}l=u.firstChild}return l&&1==l.nodeType&&l.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:u,text:t.someProp("clipboardTextSerializer",function(t){return t(e)})||e.content.textBetween(0,e.content.size,"\n\n")}}function zt(t,e,n,o,i){var s,a,c=i.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(o||c||!n);if(u){if(t.someProp("transformPastedText",function(t){e=t(e)}),c)return new r.Slice(r.Fragment.from(t.state.schema.text(e)),0,0);var f=t.someProp("clipboardTextParser",function(t){return t(e,i)});f?a=f:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach(function(t){s.appendChild(document.createElement("p")).textContent=t}))}else t.someProp("transformPastedHTML",function(t){return n=t(n)}),s=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=(Vt||(Vt=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&Lt[o[1].toLowerCase()])&&(t=n.map(function(t){return"<"+t+">"}).join("")+t+n.map(function(t){return"</"+t+">"}).reverse().join(""),i=n.length);r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var l=s&&s.querySelector("[data-pm-slice]"),p=l&&/^(\d+) (\d+) (.*)/.exec(l.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||r.DOMParser.fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!u&&!p),context:i})}return a=p?function(t,e){if(!t.size)return t;var n,o=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var u=o.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;i=r.Fragment.from(u.create(n[c+1],i)),s++,a++}return new r.Slice(i,s,a)}(new r.Slice(a.content,Math.min(a.openStart,+p[1]),Math.min(a.openEnd,+p[2])),p[3]):r.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var o=e.node(n),i=o.contentMatchAt(e.index(n)),s=void 0,a=[];if(t.forEach(function(t){if(a){var e,n=i.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&s.length&&function t(e,n,o,i,s){if(s<e.length&&s<n.length&&e[s]==n[s]){var a=t(e,n,o,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));var c=i.contentMatchAt(i.childCount);if(c.matchType(s==e.length-1?o.type:e[s+1]))return i.copy(i.content.append(r.Fragment.from(Bt(o,e,s+1))))}}(n,s,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=function t(e,n){if(0==n)return e;var o=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1));var i=e.contentMatchAt(e.childCount).fillBefore(r.Fragment.empty,!0);return e.copy(o.append(i))}(a[a.length-1],s.length));var o=Bt(t,n);a.push(o),i=i.matchType(o.type,o.attrs),s=n}}}),a)return{v:r.Fragment.from(a)}},o=e.depth;o>=0;o--){var i=n(o);if(i)return i.v}return t}(a.content,i),!1),t.someProp("transformPasted",function(t){a=t(a)}),a}function Bt(t,e,n){void 0===n&&(n=0);for(var o=e.length-1;o>=n;o--)t=e[o].create(null,r.Fragment.from(t));return t}Nt.prototype.addRange=function(t,e){null==this.from?(this.from=t,this.to=e):(this.from=Math.min(t,this.from),this.to=Math.max(e,this.to))},Nt.prototype.changedRange=function(){if(null==this.from)return function(t){var e=t.$anchor.min(t.$head),n=t.$anchor.max(t.$head);if(e.sameParent(n)&&e.parent.inlineContent&&e.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,e.parentOffset),o=e.parent.content.size,i=Math.min(o,n.parentOffset);if(r>0&&(r=e.parent.childBefore(r).offset),i<o){var s=e.parent.childAfter(i);i=s.offset+s.node.nodeSize}var a=e.start();return{from:a+r,to:a+i}}for(var c=0;;c++){var u=jt(e,c+1),f=Dt(n,c+1);if(u||f||e.index(c)!=n.index(c)||n.node(c).isTextblock){var l=e.before(c+1),p=n.after(c+1);return u&&e.index(c)>0&&(l-=e.node(c).child(e.index(c)-1).nodeSize),f&&n.index(c)+1<n.node(c).childCount&&(p+=n.node(c).child(n.index(c)+1).nodeSize),{from:l,to:p}}}}(this.state.selection);var t=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),e=this.state.doc.resolve(this.to),n=t.sharedDepth(this.to);return{from:t.before(n+1),to:e.after(n+1)}},Nt.prototype.markDirty=function(t){null==this.from?this.view.docView.markDirty((t=t||this.changedRange()).from,t.to):this.view.docView.markDirty(this.from,this.to)},Nt.prototype.stateUpdated=function(t){return this.trackMappings.getMapping(t,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new mt(t),this.mappingTo=t,!0):(this.markDirty(),this.destroy(),!1)},Nt.prototype.finish=function(t){if(clearTimeout(this.timeout),!this.composing||t){this.view.domObserver.flush();var e=this.changedRange();this.markDirty(e),this.destroy();var n=this.state.selection,i=this.typeOver&&n instanceof o.TextSelection&&!n.empty&&n.$head.sameParent(n.$anchor);!function(t,e,n,i,a){var c,u,f=function(t,e,n){var o=t.docView.parseRange(n.from,n.to),i=o.node,a=o.fromOffset,c=o.toOffset,u=o.from,f=o.to,l=t.root.getSelection(),p=null,h=l.anchorNode;h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:l.anchorOffset}],b(l)||p.push({node:l.focusNode,offset:l.focusOffset}));if(s.chrome&&8===t.lastKeyCode)for(var d=c;d>a;d--){var v=i.childNodes[d-1],m=v.pmViewDesc;if("BR"==v.nodeType&&!m){c=d;break}if(!m||m.size)break}var g=e.doc,y=t.someProp("domParser")||r.DOMParser.fromSchema(t.state.schema),x=g.resolve(u),w=null,S=y.parse(i,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!x.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:_t(y,x),context:x});if(p&&null!=p[0].pos){var O=p[0].pos,M=p[1]&&p[1].pos;null==M&&(M=O),w={anchor:O+u,head:M+u}}return{doc:S,sel:w,from:u,to:f}}(t,n,i),l=n.doc,p=l.slice(f.from,f.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(c=n.selection.to,u="end"):(c=n.selection.from,u="start");t.lastKeyCode=null;var h=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){var u=Math.max(0,i-Math.min(a,c));r-=a+u-i}if(a<i&&t.size<e.size){var f=r<=i&&r>=a?i-r:0;c=(i-=f)+(c-a),a=i}else if(c<i){var l=r<=i&&r>=c?i-r:0;a=(i-=l)+(a-c),c=i}return{start:i,endA:a,endB:c}}(p.content,f.doc.content,f.from,c,u);if(!h){if(a){var d=t.state,v=d.selection;t.dispatch(d.tr.replaceSelectionWith(d.schema.text(d.doc.textBetween(v.from,v.to)),!0).scrollIntoView())}else if(f.sel){var m=Pt(t,t.state.doc,e,f.sel);m&&!m.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(m))}return}n.selection.from<n.selection.to&&h.start==h.endB&&n.selection instanceof o.TextSelection&&(h.start>n.selection.from&&h.start<=n.selection.from+2?h.start=n.selection.from:h.endA<n.selection.to&&h.endA>=n.selection.to-2&&(h.endB+=n.selection.to-h.endA,h.endA=n.selection.to));var g,y=f.doc.resolveNoCache(h.start-f.from),x=f.doc.resolveNoCache(h.endB-f.from);if(!y.sameParent(x)&&y.pos<f.doc.content.size&&(g=o.Selection.findFrom(f.doc.resolve(y.pos+1),1,!0))&&g.head==x.pos&&t.someProp("handleKeyDown",function(e){return e(t,Rt(13,"Enter"))}))return;if(n.selection.anchor>h.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Ft(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(Ft(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||Ft(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(l,h.start,h.endA,y,x)&&t.someProp("handleKeyDown",function(e){return e(t,Rt(8,"Backspace"))}))return void(s.android&&s.chrome&&(t.selectionReader.suppressUpdates=!0,setTimeout(function(){return t.selectionReader.suppressUpdates=!1},50)));var w,S,O,M,k=e.map(h.start),C=e.map(h.endA,-1);if(y.sameParent(x)&&y.parent.inlineContent)if(y.pos==x.pos)w=t.state.tr.delete(k,C),S=l.resolve(h.start).marksAcross(l.resolve(h.endA));else if(h.endA==h.endB&&(M=l.resolve(h.start))&&(O=function(t,e){for(var n,o,i,s=t.firstChild.marks,a=e.firstChild.marks,c=s,u=a,f=0;f<a.length;f++)c=a[f].removeFromSet(c);for(var l=0;l<s.length;l++)u=s[l].removeFromSet(u);if(1==c.length&&0==u.length)o=c[0],n="add",i=function(t){return t.mark(o.addToSet(t.marks))};else{if(0!=c.length||1!=u.length)return null;o=u[0],n="remove",i=function(t){return t.mark(o.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(i(e.child(h)));if(r.Fragment.from(p).eq(t))return{mark:o,type:n}}(y.parent.content.cut(y.parentOffset,x.parentOffset),M.parent.content.cut(M.parentOffset,h.endA-M.start()))))w=t.state.tr,"add"==O.type?w.addMark(k,C,O.mark):w.removeMark(k,C,O.mark);else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){var A=y.parent.textBetween(y.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,k,C,A)}))return;w=t.state.tr.insertText(A,k,C)}w||(w=t.state.tr.replace(k,C,f.doc.slice(h.start-f.from,h.endB-f.from)));if(f.sel){var T=Pt(t,w.doc,e,f.sel);T&&w.setSelection(T)}S&&w.ensureMarks(S);t.dispatch(w.scrollIntoView())}(this.view,this.mapping,this.state,e,i),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Nt.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Nt.prototype.compositionEnd=function(t){var e=this;this.composing&&(this.composing=!1,t&&(this.compositionEndedAt=t.timeStamp),this.timeout=setTimeout(function(){return e.finish()},50))},Nt.prototype.ignoreKeyDownOnCompositionEnd=function(t){return!!(s.safari&&null!==this.compositionEndedAt&&Math.abs(t.timeStamp-this.compositionEndedAt)<500)&&(this.compositionEndedAt=null,!0)},Nt.start=function(t,e){return t.inDOMChange?e&&(clearTimeout(t.inDOMChange.timeout),t.inDOMChange.composing=!0,t.inDOMChange.compositionEndedAt=null):t.inDOMChange=new Nt(t,e),t.inDOMChange},Nt.commitTimeout=20;var Lt={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Vt=null;var $t={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},qt=s.ie&&s.ie_version<=11,Ht=function(t){var e=this;this.view=t,this.observer=window.MutationObserver&&new window.MutationObserver(function(t){return e.registerMutations(t)}),qt&&(this.onCharData=function(t){return e.registerMutation({target:t.target,type:"characterData",oldValue:t.prevValue})})};Ht.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,$t),qt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},Ht.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),qt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},Ht.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},Ht.prototype.registerMutations=function(t){for(var e=0;e<t.length;e++)this.registerMutation(t[e])},Ht.prototype.registerMutation=function(t){if(this.view.editable){var e=this.view.docView.nearestDesc(t.target);if(("attributes"!=t.type||e!=this.view.docView&&"contenteditable"!=t.attributeName)&&e&&!e.ignoreMutation(t)){var n,r;if("childList"==t.type){var o=t.previousSibling&&t.previousSibling.parentNode==t.target?p(t.previousSibling)+1:0;if(-1==o)return;n=e.localPosFromDOM(t.target,o,-1);var i=t.nextSibling&&t.nextSibling.parentNode==t.target?p(t.nextSibling):t.target.childNodes.length;if(-1==i)return;r=e.localPosFromDOM(t.target,i,1)}else"attributes"==t.type?(n=e.posAtStart-e.border,r=e.posAtEnd+e.border):(n=e.posAtStart,r=e.posAtEnd,t.target.nodeValue==t.oldValue&&(Nt.start(this.view).typeOver=!0));Nt.start(this.view).addRange(n,r)}}};var Jt={},Wt={};function Gt(t){t.someProp("handleDOMEvents",function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Ut(t,e)})})}function Ut(t,e){return t.someProp("handleDOMEvents",function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)})}function Kt(t){return{left:t.clientX,top:t.clientY}}Wt.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,t.inDOMChange){if(t.inDOMChange.composing)return;if(t.inDOMChange.ignoreKeyDownOnCompositionEnd(e))return;t.inDOMChange.finish()}t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),t.someProp("handleKeyDown",function(n){return n(t,e)})||dt(t,e)?e.preventDefault():t.selectionReader.poll("key")},Wt.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Wt.keypress=function(t,e){if(!(t.inDOMChange||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",function(n){return n(t,e)}))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof o.TextSelection&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(e.charCode);t.someProp("handleTextInput",function(e){return e(t,n.$from.pos,n.$to.pos,r)})||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}}};var Qt={time:0,x:0,y:0,type:""};function Yt(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Xt(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Zt(t,e,n,r,i){return Yt(t,"handleClickOn",e,n,r)||t.someProp("handleClick",function(n){return n(t,e,r)})||(i?function(t,e){if(-1==e)return!1;var n,r,i=t.state.selection;i instanceof o.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(o.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(Xt(t,o.NodeSelection.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&o.NodeSelection.isSelectable(r))&&(Xt(t,new o.NodeSelection(n),"pointer"),!0)}(t,n))}function te(t,e,n,r){return Yt(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",function(n){return n(t,e,r)})||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(Xt(t,o.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(e),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)Xt(t,o.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(s))continue;Xt(t,o.NodeSelection.create(n,a),"pointer")}return!0}}(t,n)}function ee(t){return!!t.inDOMChange&&(t.inDOMChange.finish(!0),!0)}var ne=s.mac?"metaKey":"ctrlKey";Jt.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=ee(t),r=Date.now(),o="singleClick";r-Qt.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,Qt)&&!e[ne]&&("singleClick"==Qt.type?o="doubleClick":"doubleClick"==Qt.type&&(o="tripleClick")),Qt={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Kt(e));i&&("singleClick"==o?t.mouseDown=new re(t,i,e,n):("doubleClick"==o?function(t,e,n,r){return Yt(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",function(n){return n(t,e,r)})}:te)(t,i.pos,i.inside,e)?e.preventDefault():t.selectionReader.poll("pointer"))};var re=function(t,e,n,r){var i,a,c=this;if(this.view=t,this.pos=e,this.event=n,this.flushed=r,this.selectNode=n[ne],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var u=t.state.doc.resolve(e.pos);i=u.parent,a=u.depth?u.before():0}this.mightDrag=null;var f=r?null:n.target,l=f?t.docView.nearestDesc(f,!0):null;this.target=l?l.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof o.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return c.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),t.selectionReader.poll("pointer")};re.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},re.prototype.up=function(t){this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)&&(this.allowDefault?(s.ie&&Et(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Zt(this.view,this.pos.pos,this.pos.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!s.chrome||this.view.state.selection instanceof o.TextSelection||this.pos.pos!=this.view.state.selection.from&&this.pos.pos!=this.view.state.selection.to)?this.view.selectionReader.poll("pointer"):(Xt(this.view,o.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),t.preventDefault()))},re.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Jt.touchdown=function(t){ee(t),t.selectionReader.poll("pointer")},Jt.contextmenu=function(t){return ee(t)},Wt.compositionstart=Wt.compositionupdate=function(t){Nt.start(t,!0)},Wt.compositionend=function(t,e){if(!t.inDOMChange){if(!e.data)return;Nt.start(t,!0)}t.inDOMChange.compositionEnd(e)},Wt.input=function(t){var e=Nt.start(t);e.composing||e.finish()};var oe=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ie(t,e,n,r){var o=zt(t,e,n,t.shiftKey,t.state.selection.$from);if(!o)return!1;if(t.someProp("handlePaste",function(e){return e(t,r,o)}))return!0;var i=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),s=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Jt.copy=Wt.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=oe?null:e.clipboardData,i=It(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){var n=e.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(function(){n.body.removeChild(r),t.focus()},50)}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Wt.paste=function(t,e){var n=oe?null:e.clipboardData;n&&(ie(t,n.getData("text/plain"),n.getData("text/html"),e)||n.files.length>0)?e.preventDefault():function(t,e){var n=t.dom.ownerDocument,r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(function(){t.focus(),n.body.removeChild(o),r?ie(t,o.value,null,e):ie(t,o.textContent,o.innerHTML,e)},50)}(t,e)};var se=function(t,e){this.slice=t,this.move=e},ae=s.mac?"altKey":"ctrlKey";for(var ce in Jt.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r=t.state.selection,i=r.empty?null:t.posAtCoords(Kt(e));if(i&&i.pos>=r.from&&i.pos<=(r instanceof o.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(o.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(o.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=It(t,a),u=c.dom,f=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(oe?"Text":"text/html",u.innerHTML),oe||e.dataTransfer.setData("text/plain",f),t.dragging=new se(a,!e[ae])}},Jt.dragend=function(t){window.setTimeout(function(){return t.dragging=null},50)},Wt.dragover=Wt.dragenter=function(t,e){return e.preventDefault()},Wt.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords(Kt(e));if(r){var s=t.state.doc.resolve(r.pos);if(s){var a=n&&n.slice||zt(t,e.dataTransfer.getData(oe?"Text":"text/plain"),oe?null:e.dataTransfer.getData("text/html"),!1,s);if(a&&(e.preventDefault(),!t.someProp("handleDrop",function(r){return r(t,e,a,n&&n.move)}))){var c=a?i.dropPoint(t.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var u=t.state.tr;n&&n.move&&u.deleteSelection();var f=u.mapping.map(c),l=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=u.doc;if(l?u.replaceRangeWith(f,f,a.content.firstChild):u.replaceRange(f,f,a),!u.doc.eq(p)){var h=u.doc.resolve(f);l&&o.NodeSelection.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild)?u.setSelection(new o.NodeSelection(h)):u.setSelection(kt(t,h,u.doc.resolve(u.mapping.map(c)))),t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}}}}}},Jt.focus=function(t){t.focused||(t.dom.classList.add("ProseMirror-focused"),t.focused=!0)},Jt.blur=function(t){t.focused&&(t.dom.classList.remove("ProseMirror-focused"),t.focused=!1)},Wt)Jt[ce]=Wt[ce];function ue(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var fe=function(t,e){this.spec=e||me,this.side=this.spec.side||0,this.toDOM=t};fe.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new he(i-n,i-n,this)},fe.prototype.valid=function(){return!0},fe.prototype.eq=function(t){return this==t||t instanceof fe&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ue(this.spec,t.spec))};var le=function(t,e){this.spec=e||me,this.attrs=t};le.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new he(o,i,this)},le.prototype.valid=function(t,e){return e.from<e.to},le.prototype.eq=function(t){return this==t||t instanceof le&&ue(this.attrs,t.attrs)&&ue(this.spec,t.spec)},le.is=function(t){return t.type instanceof le};var pe=function(t,e){this.spec=e||me,this.attrs=t};pe.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new he(o.pos-n,i.pos-n,this)},pe.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},pe.prototype.eq=function(t){return this==t||t instanceof pe&&ue(this.attrs,t.attrs)&&ue(this.spec,t.spec)};var he=function(t,e,n){this.from=t,this.to=e,this.type=n},de={spec:{}};he.prototype.copy=function(t,e){return new he(t,e,this.type)},he.prototype.eq=function(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to},he.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},he.widget=function(t,e,n){return new he(t,t,new fe(e,n))},he.inline=function(t,e,n,r){return new he(t,e,new le(n,r))},he.node=function(t,e,n,r){return new he(t,e,new pe(n,r))},de.spec.get=function(){return this.type.spec},Object.defineProperties(he.prototype,de);var ve=[],me={},ge=function(t,e){this.local=t&&t.length?t:ve,this.children=e&&e.length?e:ve};ge.create=function(t,e){return e.length?Oe(e,t,0,me):ye},ge.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},ge.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},ge.prototype.map=function(t,e,n){return this==ye||0==t.maps.length?this:this.mapInner(t,e,0,0,n||me)},ge.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],u=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:(u=r-n-(e-t)+(i-o))&&(a[s]+=u,a[s+1]+=u))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(c);for(var f=!1,l=0;l<a.length;l+=3)if(-1==a[l+1]){var p=n.map(a[l]+i),h=p-o;if(h<0||h>=r.content.size){f=!0;continue}var d=n.map(t[l+1]+i,-1),v=d-o,m=r.content.findIndex(h),g=m.index,y=m.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==v){var x=a[l+2].mapInner(n,b,p+1,a[l]+i+1,s);x!=ye?(a[l]=h,a[l+1]=v,a[l+2]=x):(a[l+1]=-2,f=!0)}else f=!0}if(f){var w=function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var u=0;u<t.children.length;u+=3)a(t.children[u+2],t.children[u]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}(a,t,e||[],n,o,i,s),S=Oe(w,r,0,s);e=S.local;for(var O=0;O<a.length;O+=3)a[O+1]<0&&(a.splice(O,3),O-=3);for(var M=0,k=0;M<S.children.length;M+=3){for(var C=S.children[M];k<a.length&&a[k]<C;)k+=3;a.splice(k,0,S.children[M],S.children[M+1],S.children[M+2])}}return new ge(e&&e.sort(Me),a)}(this.children,i,t,e,n,r,o):i?new ge(i.sort(Me)):ye},ge.prototype.add=function(t,e){return e.length?this==ye?ge.create(t,e):this.addInner(t,e,0):this},ge.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach(function(t,s){var a,c=s+n;if(a=we(e,t,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,Oe(a,t,c+1,me)),i+=3}});var s=xe(i?Se(e):e,-n);return new ge(s.length?this.local.concat(s).sort(Me):this.local,r||this.children)},ge.prototype.remove=function(t){return 0==t.length||this==ye?this:this.removeInner(t,0)},ge.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,u=void 0;c<t.length;c++)(u=t[c])&&u.from>s&&u.to<a&&(t[c]=null,(i||(i=[])).push(u));if(i){n==this.children&&(n=this.children.slice());var f=n[o+2].removeInner(i,s+1);f!=ye?n[o+2]=f:(n.splice(o,3),o-=3)}}if(r.length)for(var l=0,p=void 0;l<t.length;l++)if(p=t[l])for(var h=0;h<r.length;h++)r[h].type.eq(p.type)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ge(r,n):ye},ge.prototype.forChild=function(t,e){var n,r;if(this==ye)return this;if(e.isLeaf)return ge.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof le){var u=Math.max(i,c.from)-i,f=Math.min(s,c.to)-i;u<f&&(r||(r=[])).push(c.copy(u,f))}}if(r){var l=new ge(r.sort(Me));return n?new be([l,n]):l}return n||ye},ge.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof ge)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!1},ge.prototype.locals=function(t){return ke(this.localsInner(t))},ge.prototype.localsInner=function(t){if(this==ye)return ve;if(t.inlineContent||!this.local.some(le.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof le||e.push(this.local[n]);return e};var ye=new ge;ge.empty=ye,ge.removeOverlap=ke;var be=function(t){this.members=t};function xe(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new he(o.from+e,o.to+e,o.type))}return n}function we(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Se(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Oe(t,e,n,r){var o=[],i=!1;e.forEach(function(e,s){var a=we(t,e,s+n);if(a){i=!0;var c=Oe(a,e,n+s+1,r);c!=ye&&o.push(s,s+e.nodeSize,c)}});for(var s=xe(i?Se(t):t,-n).sort(Me),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ge(s,o):ye}function Me(t,e){return t.from-e.from||t.to-e.to}function ke(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Ce(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Ce(e,o+1,i.copy(r.to,i.to)))}}return e}function Ce(t,e,n){for(;e<t.length&&Me(n,t[e])>0;)e++;t.splice(e,0,n)}function Ae(t){var e=[];return t.someProp("decorations",function(n){var r=n(t.state);r&&r!=ye&&e.push(r)}),t.cursorWrapper&&e.push(ge.create(t.state.doc,[t.cursorWrapper.deco])),be.from(e)}be.prototype.forChild=function(t,e){if(e.isLeaf)return ge.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=ye&&(o instanceof be?n=n.concat(o.members):n.push(o))}return be.from(n)},be.prototype.eq=function(t){if(!(t instanceof be)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},be.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?ke(n?e:e.sort(Me)):ve},be.from=function(t){switch(t.length){case 0:return ye;case 1:return t[0];default:return new be(t)}};var Te=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=De(this),this.redraw=!1,this.cursorWrapper=null,_e(this),this.nodeViews=Re(this),this.docView=$(this.state.doc,Ne(this),Ae(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.inDOMChange=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.domObserver=new Ht(t),t.domObserver.start(),t.eventHandlers=Object.create(null);var e=function(e){var n=Jt[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||Ut(t,e)||!t.editable&&e.type in Wt||n(t,e)})};for(var n in Jt)e(n);Gt(t)}(this),this.selectionReader=new gt(this),this.pluginViews=[],this.updatePluginViews()},Ee={props:{},root:{}};function Ne(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))}),[he.node(0,t.state.doc.content.size,e)]}function _e(t){var e=Et(t.state);if(!e||s.ie&&t.mouseDown)t.cursorWrapper=null;else{var n,o=t.state.selection.visible,i=t.state.storedMarks||e.marks();t.cursorWrapper&&r.Mark.sameSet(t.cursorWrapper.deco.spec.marks,i)&&"\ufeff"==t.cursorWrapper.dom.textContent&&t.cursorWrapper.deco.spec.visible==o?t.cursorWrapper.deco.pos!=e.pos&&(n=t.cursorWrapper.dom):n=function(t){var e=document.createElement("span");return e.textContent="\ufeff",t||(e.style.position="absolute",e.style.left="-100000px"),e}(o),n&&(t.cursorWrapper={dom:n,deco:he.widget(e.pos,n,{isCursorWrapper:!0,marks:i,raw:!0,visible:o})})}}function De(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}function je(t){var e=t.getSelection(),n=e.focusOffset,r=e.focusNode;return r&&3!=r.nodeType?[r,n,1==r.nodeType?r.childNodes[n-1]:null,1==r.nodeType?r.childNodes[n]:null]:null}function Re(t){var e={};return t.someProp("nodeViews",function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}),e}Ee.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Te.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Gt(this),this._props=t;var e=Re(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,this.redraw=!0),this.updateState(t.state)},Te.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Te.prototype.updateState=function(t){var e=this,n=this.state;if(this.state=t,n.plugins!=t.plugins&&Gt(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(t)){var r=this.editable;this.editable=De(this),_e(this);var i,a,c,u=Ae(this),f=Ne(this),l=n.config!=t.config?"reset":t.scrollToSelection>n.scrollToSelection?"to selection":"preserve",p=this.redraw||!this.docView.matchesNode(t.doc,f,u),d=p||!t.selection.eq(n.selection)||this.selectionReader.domChanged(),m="preserve"==l&&d&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=t.dom.ownerDocument,s=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var c=t.root.elementFromPoint(s,a);if(c!=t.dom&&t.dom.contains(c)){var u=c.getBoundingClientRect();if(u.top>=o-20){e=c,n=u.top;break}}}for(var f=[],l=t.dom;l&&(f.push({dom:l,top:l.scrollTop,left:l.scrollLeft}),l!=i.body);l=h(l));return{refDOM:e,refTop:n,stack:f}}(this);if(d){this.domObserver.stop();var g=!1;if(p){var y=s.chrome&&je(this.root);!this.redraw&&this.docView.update(t.doc,f,u,this)||(this.docView.destroy(),this.docView=$(t.doc,f,u,this.dom,this),this.redraw=!1),this.selectionReader.clearDOMState(),y&&(g=function(t,e){var n=je(e);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<t.length;r++)if(n[r]!=t[r])return!0;return!1}(y,this.root))}g||!(this.mouseDown&&this.selectionReader.domChanged()&&(i=this,a=i.docView.domFromPos(i.state.selection.anchor),c=i.root.getSelection(),v(a.node,a.offset,c.anchorNode,c.anchorOffset)))?xt(this,!1,g):Ot(this,t.selection),this.domObserver.start()}if(r!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(n),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var b=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(t){return t(e)})||(t.selection instanceof o.NodeSelection?S(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),b):S(this,this.coordsAtPos(t.selection.head),b))}else m&&function(t){for(var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0,i=0==o?0:o-n,s=0;s<r.length;s++){var a=r[s],c=a.dom,u=a.top,f=a.left;c.scrollTop!=u+i&&(c.scrollTop=u+i),c.scrollLeft!=f&&(c.scrollLeft=f)}}(m)}},Te.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Te.prototype.updatePluginViews=function(t){var e=this.state.plugins;if(t&&t.plugins==e)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,t)}else{this.destroyPluginViews();for(var o=0;o<e.length;o++){var i=e[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Te.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},Te.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Te.prototype.focus=function(){this.domObserver.stop(),xt(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},Ee.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return this._root=e;return t||document},Te.prototype.posAtCoords=function(t){var e=k(this,t);return this.inDOMChange&&e&&(e.pos=this.inDOMChange.mapping.map(e.pos),-1!=e.inside&&(e.inside=this.inDOMChange.mapping.map(e.inside))),e},Te.prototype.coordsAtPos=function(t){return this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t)),A(this,t)},Te.prototype.domAtPos=function(t){return this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t)),this.docView.domFromPos(t)},Te.prototype.nodeDOM=function(t){this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t));var e=this.docView.descAt(t);return e?e.nodeDOM:null},Te.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},Te.prototype.endOfTextblock=function(t,e){return R(this,e||this.state,t)},Te.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.inDOMChange&&t.inDOMChange.destroy(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],Ae(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Te.prototype.dispatchEvent=function(t){return function(t,e){Ut(t,e)||!Jt[e.type]||!t.editable&&e.type in Wt||Jt[e.type](t,e)}(this,t)},Te.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Te.prototype,Ee),e.EditorView=Te,e.Decoration=he,e.DecorationSet=ge,e.__serializeForClipboard=It,e.__parseFromClipboard=zt},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,s=r.length;i<s;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(185),o=n(66),i=n(71);function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var s=f(o);if(!s){var a=o.blockRange(),u=a&&r.liftTarget(a);return null!=u&&(e&&e(t.tr.lift(a,u).scrollIntoView()),!0)}var l=s.nodeBefore;if(!l.type.spec.isolating&&x(t,s,e))return!0;if(0==o.parent.content.size&&(c(l,"end")||i.NodeSelection.isSelectable(l))){if(e){var p=t.tr.deleteRange(o.before(),o.after());p.setSelection(c(l,"end")?i.Selection.findFrom(p.doc.resolve(p.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(p.doc,s.pos-l.nodeSize)),e(p.scrollIntoView())}return!0}return!(!l.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos-l.nodeSize,s.pos).scrollIntoView()),!0)}function c(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function u(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=f(r),s=o&&o.nodeBefore;return!(!s||!i.NodeSelection.isSelectable(s))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}function f(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function l(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=h(r);if(!o)return!1;var s=o.nodeAfter;if(x(t,o,e))return!0;if(0==r.parent.content.size&&(c(s,"start")||i.NodeSelection.isSelectable(s))){if(e){var a=t.tr.deleteRange(r.before(),r.after());a.setSelection(c(s,"start")?i.Selection.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):i.NodeSelection.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0)}function p(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=h(r),s=o&&o.nodeAfter;return!(!s||!i.NodeSelection.isSelectable(s))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,o.pos)).scrollIntoView()),!0)}function h(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function d(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function v(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,c))return!1;if(e){var u=r.after(),f=t.tr.replaceWith(u,u,c.createAndFill());f.setSelection(i.Selection.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0}function m(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(i.TextSelection.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function g(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(r.canSplit(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),s=i&&r.liftTarget(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}function y(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!s.parentOffset||!r.canSplit(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var c=a.parentOffset==a.parent.content.size,u=t.tr;t.selection instanceof i.TextSelection&&u.deleteSelection();var f=0==s.depth?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType,l=c&&f?[{type:f}]:null,p=r.canSplit(u.doc,s.pos,1,l);l||p||!r.canSplit(u.doc,u.mapping.map(s.pos),1,f&&[{type:f}])||(l=[{type:f}],p=!0),p&&(u.split(u.mapping.map(s.pos),1,l),c||s.parentOffset||s.parent.type==f||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o.Fragment.from(f.create(),s.parent))||u.setNodeMarkup(u.mapping.map(s.before()),f)),e(u.scrollIntoView())}return!0}function b(t,e){return e&&e(t.tr.setSelection(new i.AllSelection(t.doc))),!0}function x(t,e,n){var s,a,c=e.nodeBefore,u=e.nodeAfter;if(c.type.spec.isolating||u.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!i.isTextblock&&!r.canJoin(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(u.type))&&a.matchType(s[0]||u.type).validEnd){if(n){for(var f=e.pos+u.nodeSize,l=o.Fragment.empty,p=s.length-1;p>=0;p--)l=o.Fragment.from(s[p].create(null,l));l=o.Fragment.from(c.copy(l));var h=t.tr.step(new r.ReplaceAroundStep(e.pos-1,f,e.pos,f,new o.Slice(l,1,0),s.length,!0)),d=f+2*s.length;r.canJoin(h.doc,d)&&h.join(d),n(h.scrollIntoView())}return!0}var v=i.Selection.findFrom(e,1),m=v&&v.$from.blockRange(v.$to),g=m&&r.liftTarget(m);return null!=g&&g>=e.depth&&(n&&n(t.tr.lift(m,g).scrollIntoView()),!0)}function w(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var S=w(s,a,u),O=w(s,l,p),M={Enter:w(d,m,g,y),"Mod-Enter":v,Backspace:S,"Mod-Backspace":S,Delete:O,"Mod-Delete":O,"Mod-a":b},k={"Ctrl-h":M.Backspace,"Alt-Backspace":M["Mod-Backspace"],"Ctrl-d":M.Delete,"Ctrl-Alt-Backspace":M["Mod-Delete"],"Alt-Delete":M["Mod-Delete"],"Alt-d":M["Mod-Delete"]};for(var C in M)k[C]=M[C];var A=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?k:M;e.deleteSelection=s,e.joinBackward=a,e.selectNodeBackward=u,e.joinForward=l,e.selectNodeForward=p,e.joinUp=function(t,e){var n,o=t.selection,s=o instanceof i.NodeSelection;if(s){if(o.node.isTextblock||!r.canJoin(t.doc,o.from))return!1;n=o.from}else if(null==(n=r.joinPoint(t.doc,o.from,-1)))return!1;if(e){var a=t.tr.join(n);s&&a.setSelection(i.NodeSelection.create(a.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},e.joinDown=function(t,e){var n,o=t.selection;if(o instanceof i.NodeSelection){if(o.node.isTextblock||!r.canJoin(t.doc,o.to))return!1;n=o.to}else if(null==(n=r.joinPoint(t.doc,o.to,1)))return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},e.lift=function(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&r.liftTarget(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)},e.newlineInCode=d,e.exitCode=v,e.createParagraphNear=m,e.liftEmptyBlock=g,e.splitBlock=y,e.splitBlockKeepMarks=function(t,e){return y(t,e&&function(n){var r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();r&&n.ensureMarks(r),e(n)})},e.selectParentNode=function(t,e){var n,r=t.selection,o=r.$from,s=r.to,a=o.sharedDepth(s);return 0!=a&&(n=o.before(a),e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,n))),!0)},e.selectAll=b,e.wrapIn=function(t,e){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),u=c&&r.findWrapping(c,t,e);return!!u&&(o&&o(n.tr.wrap(c,u).scrollIntoView()),!0)}},e.setBlockType=function(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}}),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}},e.toggleMark=function(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)}),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,u=n.tr,f=0;!c&&f<a.length;f++){var l=a[f],p=l.$from,h=l.$to;c=n.doc.rangeHasMark(p.pos,h.pos,t)}for(var d=0;d<a.length;d++){var v=a[d],m=v.$from,g=v.$to;c?u.removeMark(m.pos,g.pos,t):u.addMark(m.pos,g.pos,t.create(e))}r(u.scrollIntoView())}return!0}},e.autoJoin=function(t,e){if(Array.isArray(e)){var n=e;e=function(t){return n.indexOf(t.type.name)>-1}}return function(n,o){return t(n,o&&function(t,e){return function(n){if(!n.isGeneric)return t(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var s=n.mapping.maps[i],a=0;a<o.length;a++)o[a]=s.map(o[a]);s.forEach(function(t,e,n,r){return o.push(n,r)})}for(var c=[],u=0;u<o.length;u+=2)for(var f=o[u],l=o[u+1],p=n.doc.resolve(f),h=p.sharedDepth(l),d=p.node(h),v=p.indexAfter(h),m=p.after(h+1);m<=l;++v){var g=d.maybeChild(v);if(!g)break;if(v&&-1==c.indexOf(m)){var y=d.child(v-1);y.type==g.type&&e(y,g)&&c.push(m)}m+=g.nodeSize}c.sort(function(t,e){return t-e});for(var b=c.length-1;b>=0;b--)r.canJoin(n.doc,c[b])&&n.join(c[b]);t(n)}}(o,e))}},e.chainCommands=w,e.pcBaseKeymap=M,e.macBaseKeymap=k,e.baseKeymap=A},,function(t,e,n){"use strict";var r=n(70),o=n(69),i=n(68),s=n(23),a=n(46),c=Object.assign;t.exports=!c||n(2)(function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||"abcdefghijklmnopqrst"!=r(c({},e)).join("")})?function(t,e){for(var n=s(t),c=arguments.length,u=1,f=o.f,l=i.f;c>u;)for(var p,h=a(arguments[u++]),d=f?r(h).concat(f(h)):r(h),v=d.length,m=0;v>m;)l.call(h,p=d[m++])&&(n[p]=h[p]);return n}:c},function(t,e){function n(t){this.content=t}n.prototype={constructor:n,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,r){var o=r&&r!=t?this.remove(r):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(r||t,e):(s[i+1]=e,r&&(s[i]=r)),new n(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var r=this.content.slice();return r.splice(e,2),new n(r)},addToStart:function(t,e){return new n([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new n(r)},addBefore:function(t,e,r){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,r),new n(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=n.from(t)).size?new n(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=n.from(t)).size?new n(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=n.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},get size(){return this.content.length>>1}},n.from=function(t){if(t instanceof n)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new n(e)},t.exports=n},function(t,e,n){"use strict";var r=n(105),o=n(6),i=n(23),s=n(17),a=n(349),c=n(183),u=n(3)("isConcatSpreadable"),f=!n(2)(function(){var t=[];return t[u]=!1,t.concat()[0]!==t}),l=n(106)("concat"),p=function(t){if(!o(t))return!1;var e=t[u];return void 0!==e?!!e:r(t)},h=!f||!l;n(0)({target:"Array",proto:!0,forced:h},{concat:function(t){var e,n,r,o,u,f=i(this),l=c(f,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(u=-1===e?f:arguments[e],p(u)){if(h+(o=s(u.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,h++)n in u&&a(l,h,u[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");a(l,h++,u)}return l.length=h,l}})},function(t,e,n){"use strict";var r=n(36),o=n(9),i=n(47);t.exports=function(t,e,n){var s=r(e);s in t?o.f(t,s,i(0,n)):t[s]=n}},function(t,e){for(var n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),i="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),c=o&&(a||+o[1]<57)||s&&a,u=0;u<10;u++)n[48+u]=n[96+u]=String(u);for(u=1;u<=24;u++)n[u+111]="F"+u;for(u=65;u<=90;u++)n[u]=String.fromCharCode(u+32),r[u]=String.fromCharCode(u);for(var f in n)r.hasOwnProperty(f)||(r[f]=n[f]);function l(t){var e=!(c&&(t.ctrlKey||t.altKey||t.metaKey)||i&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?r:n)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}t.exports=l,l.base=n,l.shift=r},function(t,e){var n=function(){};n.prototype.append=function(t){return t.length?(t=n.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},n.prototype.prepend=function(t){return t.length?n.from(t).append(this):this},n.prototype.appendInner=function(t){return new o(this,t)},n.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?n.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},n.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},n.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},n.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(e,n){return r.push(t(e,n))},e,n),r},n.from=function(t){return t instanceof n?t:t&&t.length?new r(t):n.empty};var r=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{},depth:{}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(n);n.empty=new r([]);var o=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(n);t.exports=n},function(t,e,n){"use strict";var r=n(23),o=n(36),i=n(2)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})});n(0)({target:"Date",proto:!0,forced:i},{toJSON:function(t){var e=r(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";n(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,n){"use strict";n.r(e);var r=n(173),o=(n(341),n(71)),i=n(342),s=n(66),a=(n(348),n(343)),c=n.n(a);var u=n(339),f=n(344),l=n(186);function p(t){return new o.Plugin({key:"onStateChange",view:function(){return{update:function(e){t.emit("statechange",e.state)}}}})}var h=n(340),d=new s.Schema({nodes:h.nodes,marks:h.marks});n(104),n(32),n(184),n(352),n(353);function v(t){return t.toJSON().doc.content.map(function(t){return t.content?t.content.reduce(function(t,e){return t+=e.text},""):""}).join("\n")}n(48),n(49);var m=n(45),g=n.n(m);function y(t){return g.a.sanitize(t,{ALLOWED_TAGS:["p","#text"],KEEP_CONTENT:!1})}function b(t){var e,n,r,a=(e={},n={_emitter:new c.a,on:function(t,e){this._emitter.on(t,e)},once:function(t,e){this._emitter.once(t,e)},off:function(t,e){this._emitter.off(t,e)},emit:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this._emitter).emit.apply(e,[t].concat(r))}},Object.assign(e,n)),h=function(t){return[Object(l.history)(),Object(u.keymap)({"Mod-z":l.undo,"Mod-y":l.redo}),Object(u.keymap)(f.baseKeymap),p(t)]}(a);return a.on("statechange",function(t){a.emit("change",v(t))}),Object.assign(a,{load:function(e){var n=function(t){var e=y(t).split("\n").map(function(t){return"<p>".concat(t,"</p>")}).join(""),n=document.createElement("div");return n.innerHTML=y(e),n}(e),c=o.EditorState.create({doc:s.DOMParser.fromSchema(d).parse(n,{preserveWhitespace:"full"}),plugins:h});r?r.updateState(c):r=new i.EditorView(t,{state:c}),a.emit("statechange",c)},getContent:function(){return v(r.state)}})}var x=n(174);!function(){var t=new Error("Cannot find module '../scss/ucc-editor.scss'");throw t.code="MODULE_NOT_FOUND",t}(),n.d(e,"parseSong",function(){return r.a}),n.d(e,"editorFactory",function(){return b}),n.d(e,"renderSong",function(){return x.a})}]);
//# sourceMappingURL=ucc-editor.js.map